{"version":3,"sources":["actions/roomActions.js","actions/meActions.js","utils.js","components/LoadingView.js","urlFactory.js","RoomClient.js","actions/requestActions.js","actions/peerActions.js","actions/peerVolumeActions.js","actions/chatActions.js","actions/fileActions.js","actions/lobbyPeerActions.js","actions/consumerActions.js","actions/producerActions.js","actions/transportActions.js","RoomContext.js","components/ReactLazyPreload.js","deviceInfo.js","components/UnsupportedBrowser.js","components/ChooseRoom.js","serviceWorker.js","index.js","actions/settingsActions.js","actions/notificationActions.js","reducers/room.js","reducers/me.js","reducers/producers.js","reducers/peers.js","reducers/lobbyPeers.js","reducers/consumers.js","reducers/peerVolumes.js","reducers/notifications.js","reducers/helper.js","reducers/chat.js","reducers/toolarea.js","reducers/files.js","reducers/settings.js","reducers/transports.js","reducers/rootReducer.js","store.js","Logger.js"],"names":["setRoomName","name","type","payload","setRoomState","state","setRoomActiveSpeaker","peerId","setRoomLocked","setRoomUnLocked","setInLobby","inLobby","setSignInRequired","signInRequired","setOverRoomLimit","overRoomLimit","setAccessCode","accessCode","setJoinByAccessCode","joinByAccessCode","setSettingsOpen","settingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setSettingsTab","tab","setLockDialogOpen","lockDialogOpen","toggleConsumerWindow","consumerId","setToolbarsVisible","toolbarsVisible","setDisplayMode","mode","setSelectedPeer","selectedPeerId","setSpotlights","spotlights","clearSpotlights","toggleJoined","toggleConsumerFullscreen","setLobbyPeersPromotionInProgress","flag","setMuteAllInProgress","setStopAllVideoInProgress","setStopAllScreenSharingInProgress","setCloseMeetingInProgress","setClearChatInProgress","setClearFileSharingInProgress","setRoomPermissions","roomPermissions","setAllowWhenRoleMissing","allowWhenRoleMissing","setMe","loginEnabled","setBrowser","browser","loggedIn","addRole","role","removeRole","setPicture","picture","setMediaCapabilities","canSendMic","canSendWebcam","canShareScreen","canShareFiles","setAudioDevices","devices","setAudioOutputDevices","setWebcamDevices","setRaisedHand","setAudioInProgress","setAudioOutputInProgress","setWebcamInProgress","setScreenShareInProgress","setRaisedHandInProgress","setDisplayNameInProgress","setIsSpeaking","setAutoMuted","idle","callback","delay","handle","clearTimeout","setTimeout","SocketTimeoutError","message","Error","hasOwnProperty","captureStackTrace","stack","LoadingView","className","getSignalingUrl","roomId","port","window","config","productionPort","location","hostname","createTorrent","WebTorrent","saveAs","mediasoupClient","io","ScreenShare","Spotlights","requestTimeout","transportOptions","lastN","mobileLastN","notify","text","timeout","notification","id","randomString","length","toLowerCase","dispatch","notificationActions","addPeer","peer","removePeer","setPeerDisplayName","displayName","setPeerVideoInProgress","setPeerAudioInProgress","setPeerScreenInProgress","setPeerRaisedHand","raisedHand","raisedHandTimestamp","setPeerRaisedHandInProgress","setPeerPicture","addPeerRole","removePeerRole","setPeerKickInProgress","setMutePeerInProgress","setStopPeerVideoInProgress","setStopPeerScreenSharingInProgress","setPeerVolume","volume","addChatHistory","chatHistory","addFile","magnetUri","addFileHistory","fileHistory","setFileDone","sharedFiles","addLobbyPeer","removeLobbyPeer","setLobbyPeerDisplayName","setLobbyPeerPicture","setLobbyPeerPromotionInProgress","addConsumer","consumer","removeConsumer","setConsumerPaused","originator","setConsumerResumed","setConsumerCurrentLayers","spatialLayer","temporalLayer","setConsumerPreferredLayers","setConsumerPriority","priority","setConsumerScore","score","addProducer","producer","removeProducer","producerId","setProducerScore","addTransportStats","transport","store","intl","logger","Logger","ROOM_OPTIONS","VIDEO_CONSTRAINS","width","ideal","aspectRatio","PC_PROPRIETARY_CONSTRAINTS","optional","googDscp","VIDEO_SIMULCAST_ENCODINGS","scaleResolutionDownBy","VIDEO_KSVC_ENCODINGS","scalabilityMode","VIDEO_SVC_ENCODINGS","dtx","RoomClient","device","produce","forceTcp","muted","basePath","debug","this","_signalingUrl","_closed","_produce","_forceTcp","_basePath","settingsActions","_tracker","_torrentSupport","_useSimulcast","simulcast","_useSharingSimulcast","simulcastSharing","_muted","_device","_peerId","_accessCode","_soundAlert","Audio","_signalingSocket","_roomId","_mediasoupDevice","meActions","_webTorrent","platform","_maxSpotlights","_spotlights","_sendTransport","_recvTransport","_micProducer","_hark","_harkStream","_webcamProducer","_extraVideoProducers","Map","_webcams","_audioDevices","_audioOutputDevices","_consumers","_screenSharing","_screenSharingProducer","_startKeyListener","_startDevicesListener","data","close","roomActions","document","addEventListener","event","repeat","key","String","fromCharCode","which","source","target","indexOf","tagName","newPeerId","getPrevAsSelected","getState","room","getNextAsSelected","requestActions","formatMessage","defaultMessage","paused","unmuteMic","muteMic","updateMic","start","disableWebcam","updateWebcam","preventDefault","navigator","mediaDevices","a","_updateAudioDevices","_updateWebcams","_updateAudioOutputDevices","url","open","settings","notificationSounds","alertPromise","play","undefined","then","catch","error","called","interval","method","Promise","resolve","reject","emit","timeoutCallback","err","response","sendRequest","transportId","recv","transportActions","send","requestRetries","tries","_sendRequest","warn","chatMessage","file","getBlob","blob","fileActions","existingTorrent","get","_handleTorrent","add","torrent","progress","lastMove","on","Date","now","magnetURI","files","_sendFile","seed","announceList","newTorrent","pause","producerActions","resume","maxSpotlights","values","kind","includes","appData","_resumeConsumer","_pauseConsumer","getAudioTracks","track","stop","MediaStream","newTrack","clone","addTrack","enabled","hark","threshold","noiseThreshold","history","lastVolume","Math","round","pow","peerVolumeActions","voiceActivatedUnmute","me","isAutoMuted","deviceId","restart","newDeviceId","canProduce","_getAudioDeviceId","sampleRate","channelCount","autoGainControl","echoCancellation","noiseSuppression","sampleSize","disconnectLocalHark","disableMic","getUserMedia","audio","stream","getSettings","trackDeviceId","codecOptions","opusStereo","opusDtx","opusFec","opusPtime","opusMaxPlaybackRate","rtpParameters","codec","codecs","mimeType","split","connectLocalHark","applyConstraints","harkTrack","newResolution","newFrameRate","_getWebcamDeviceId","resolution","frameRate","video","getVideoTracks","firstVideoCodec","rtpCapabilities","find","c","encodings","simulcastEncodings","videoGoogleStartBitrate","setPeerSpotlight","lobbyPeerActions","peerActions","mute","closed","consumerActions","setMaxSpatialLayer","default","joinVideo","_loadDynamicImports","create","reason","attemptNumber","request","cb","producerPaused","consume","set","delete","parseScalabilityMode","spatialLayers","temporalLayers","locallyPaused","remotelyPaused","preferredSpatialLayer","preferredTemporalLayer","turnServers","_turnServers","_joinRoom","_soundNotification","lobbyPeers","forEach","handleActiveSpeaker","oldDisplayName","peers","toolarea","toolAreaOpen","currentToolTab","roles","consumers","disableScreenSharing","WEBRTC_SUPPORT","tracker","rtcConfig","iceServers","Device","routerRtpCapabilities","headerExtensions","filter","ext","uri","load","producing","consuming","transportInfo","iceParameters","iceCandidates","dtlsParameters","createSendTransport","iceTransportPolicy","proprietaryConstraints","errback","createRecvTransport","isScreenShareAvailable","authenticated","lastNHistory","locked","myRoles","addPeers","updateSpotlights","chatActions","addSpeakerList","autoMuteThreshold","selectedAudioOutputDevice","Object","keys","code","value","videoDeviceId","deviceLabel","label","disableExtraVideo","screenSharingResolution","screenSharingFrameRate","map","encoding","setThreshold","enumerateDevices","selectedAudioDevice","audioDevices","selectedWebcam","webcams","RoomContext","React","createContext","withRoomContext","Component","props","Consumer","roomClient","ReactLazyPreload","importStatement","lazy","preload","BB","bowser","ua","userAgent","getParser","satisfies","chrome","chromium","firefox","safari","opera","os","getOSName","getPlatformType","getBrowserName","version","getBrowserVersion","dense","supportedBrowsers","vendor","withStyles","theme","dialogPaper","breakpoints","down","list","backgroundColor","palette","background","paper","errorAvatar","spacing","height","webrtcUnavailable","classes","scroll","dividers","container","justify","alignItems","item","xs","md","index","supportedBrowser","supportedVersion","primary","secondary","align","mdDown","color","styles","root","display","backgroundImage","backgroundAttachment","backgroundPosition","backgroundSize","backgroundRepeat","dialogTitle","padding","logo","paddingBottom","loginButton","position","right","top","largeIcon","fontSize","largeAvatar","green","DialogTitle","children","other","disableTypography","alt","src","variant","DialogContent","MuiDialogContent","DialogActions","margin","MuiDialogActions","useState","setRoomId","useIntl","title","gutterBottom","onChange","onBlur","fullWidth","component","Link","to","isElectron","buttonText","Boolean","match","unregister","serviceWorker","ready","registration","App","cache","createIntlCache","messages","messagesNorwegian","messagesGerman","messagesHungarian","messagesPolish","messagesDanish","messagesFrench","messagesGreek","messagesRomanian","messagesPortuguese","messagesChineseSimplified","messagesChineseTraditional","messagesSpanish","messagesCroatian","messagesCzech","messagesItalian","messagesUkrainian","messagesTurkish","messagesLatvian","messagesRussian","messagesKazakh","browserLanguage","language","locale","createIntl","documentElement","lang","process","REACT_APP_DEBUG","enable","init","Router","createMuiTheme","HashRouter","BrowserRouter","domready","parameters","URL","searchParams","pathname","substring","lastIndexOf","deviceInfo","unsupportedBrowser","detectDevice","RTCPeerConnection","render","getElementById","global","CLIENT","loading","persistor","Provider","basename","fallback","Fragment","exact","path","ChooseRoom","run","setSelectedAudioDevice","setSelectedAudioOutputDevice","setSelectedWebcamDevice","setVideoResolution","setVideoFrameRate","setScreenSharingResolution","setScreenSharingFrameRate","setDisplayName","toggleAdvancedMode","togglePermanentTopBar","toggleButtonControlBar","toggleDrawerOverlayed","toggleShowNotifications","setEchoCancellation","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setNoiseThreshold","toggleHiddenControls","toggleNotificationSounds","setLastN","addNotification","removeNotification","notificationId","removeAllNotifications","initialState","activeSpeakerId","torrentSupport","showSettings","fullScreenConsumer","windowConsumer","defaultLayout","currentSettingsTab","joined","muteAllInProgress","lobbyPeersPromotionInProgress","stopAllVideoInProgress","closeMeetingInProgress","clearChatInProgress","clearFileSharingInProgress","action","roomState","supported","currentConsumer","stopAllScreenSharingInProgress","webcamDevices","webcamInProgress","audioInProgress","screenShareInProgress","displayNameInProgress","raisedHandInProgress","isSpeaking","audioOutputDevices","producers","newState","newProducer","peerVideoInProgress","peerAudioInProgress","peerScreenInProgress","peerKickInProgress","stopPeerAudioInProgress","stopPeerVideoInProgress","stopPeerScreenSharingInProgress","oldPeer","lobbyPeer","promotionInProgress","oldLobbyPeer","newConsumer","currentSpatialLayer","currentTemporalLayer","peerVolumes","dBs","notifications","createNewMessage","sender","time","chat","unreadMessages","unreadFiles","toolTab","newFile","active","newFileHistory","advancedMode","defaultResolution","defaultFrameRate","defaultScreenResolution","defaultScreenSharingFrameRate","permanentTopBar","hiddenControls","showNotifications","buttonControlBar","drawerOverlayed","defaultAudio","transports","combineReducers","persistConfig","storage","stateReconciler","autoMergeLevel2","whitelist","reduxMiddlewares","thunk","reduxLogger","createLogger","predicate","duration","timestamp","level","logErrors","push","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","pReducer","persistReducer","rootReducer","createStore","persistStore","APP_NAME","prefix","_debug","_warn","_error","log","console","info","bind"],"mappings":"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","file":"static/js/main.bf0d8381.chunk.js","sourcesContent":["export const setRoomName = (name) =>\n\t({\n\t\ttype    : 'SET_ROOM_NAME',\n\t\tpayload : { name }\n\n\t});\n\nexport const setRoomState = (state) =>\n\t({\n\t\ttype    : 'SET_ROOM_STATE',\n\t\tpayload : { state }\n\n\t});\n\nexport const setRoomActiveSpeaker = (peerId) =>\n\t({\n\t\ttype    : 'SET_ROOM_ACTIVE_SPEAKER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setRoomLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_LOCKED'\n\t});\n\nexport const setRoomUnLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_UNLOCKED'\n\t});\n\nexport const setInLobby = (inLobby) =>\n\t({\n\t\ttype    : 'SET_IN_LOBBY',\n\t\tpayload : { inLobby }\n\t});\n\nexport const setSignInRequired = (signInRequired) =>\n\t({\n\t\ttype    : 'SET_SIGN_IN_REQUIRED',\n\t\tpayload : { signInRequired }\n\t});\n\nexport const setOverRoomLimit = (overRoomLimit) =>\n\t({\n\t\ttype    : 'SET_OVER_ROOM_LIMIT',\n\t\tpayload : { overRoomLimit }\n\t});\n\nexport const setAccessCode = (accessCode) =>\n\t({\n\t\ttype    : 'SET_ACCESS_CODE',\n\t\tpayload : { accessCode }\n\t});\n\nexport const setJoinByAccessCode = (joinByAccessCode) =>\n\t({\n\t\ttype    : 'SET_JOIN_BY_ACCESS_CODE',\n\t\tpayload : { joinByAccessCode }\n\t});\n\nexport const setSettingsOpen = (settingsOpen) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_OPEN',\n\t\tpayload : { settingsOpen }\n\t});\n\nexport const setExtraVideoOpen = (extraVideoOpen) =>\n\t({\n\t\ttype    : 'SET_EXTRA_VIDEO_OPEN',\n\t\tpayload : { extraVideoOpen }\n\t});\n\nexport const setHelpOpen = (helpOpen) =>\n\t({\n\t\ttype    : 'SET_HELP_OPEN',\n\t\tpayload : { helpOpen }\n\t});\n\nexport const setAboutOpen = (aboutOpen) =>\n\t({\n\t\ttype    : 'SET_ABOUT_OPEN',\n\t\tpayload : { aboutOpen }\n\t});\n\nexport const setSettingsTab = (tab) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_TAB',\n\t\tpayload : { tab }\n\t});\n\nexport const setLockDialogOpen = (lockDialogOpen) =>\n\t({\n\t\ttype    : 'SET_LOCK_DIALOG_OPEN',\n\t\tpayload : { lockDialogOpen }\n\t});\n\nexport const setFileSharingSupported = (supported) =>\n\t({\n\t\ttype    : 'FILE_SHARING_SUPPORTED',\n\t\tpayload : { supported }\n\t});\n\nexport const toggleConsumerWindow = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_WINDOW_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setToolbarsVisible = (toolbarsVisible) =>\n\t({\n\t\ttype    : 'SET_TOOLBARS_VISIBLE',\n\t\tpayload : { toolbarsVisible }\n\t});\n\nexport const setDisplayMode = (mode) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_MODE',\n\t\tpayload : { mode }\n\t});\n\nexport const setSelectedPeer = (selectedPeerId) =>\n\t({\n\t\ttype    : 'SET_SELECTED_PEER',\n\t\tpayload : { selectedPeerId }\n\t});\n\nexport const setSpotlights = (spotlights) =>\n\t({\n\t\ttype    : 'SET_SPOTLIGHTS',\n\t\tpayload : { spotlights }\n\t});\n\nexport const clearSpotlights = () =>\n\t({\n\t\ttype : 'CLEAR_SPOTLIGHTS'\n\t});\n\nexport const toggleJoined = () =>\n\t({\n\t\ttype : 'TOGGLE_JOINED'\n\t});\n\nexport const toggleConsumerFullscreen = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_FULLSCREEN_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setLobbyPeersPromotionInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setMuteAllInProgress = (flag) =>\n\t({\n\t\ttype    : 'MUTE_ALL_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllVideoInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_VIDEO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllScreenSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setCloseMeetingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLOSE_MEETING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearChatInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_CHAT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearFileSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_FILE_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRoomPermissions = (roomPermissions) =>\n\t({\n\t\ttype    : 'SET_ROOM_PERMISSIONS',\n\t\tpayload : { roomPermissions }\n\t});\n\nexport const setAllowWhenRoleMissing = (allowWhenRoleMissing) =>\n\t({\n\t\ttype    : 'SET_ALLOW_WHEN_ROLE_MISSING',\n\t\tpayload : { allowWhenRoleMissing }\n\t});\n","export const setMe = ({ peerId, loginEnabled }) =>\n\t({\n\t\ttype    : 'SET_ME',\n\t\tpayload : { peerId, loginEnabled }\n\t});\n\nexport const setBrowser = (browser) =>\n\t({\n\t\ttype    : 'SET_BROWSER',\n\t\tpayload : { browser }\n\t});\n\nexport const loggedIn = (flag) =>\n\t({\n\t\ttype    : 'LOGGED_IN',\n\t\tpayload : { flag }\n\t});\n\nexport const addRole = (role) =>\n\t({\n\t\ttype    : 'ADD_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const removeRole = (role) =>\n\t({\n\t\ttype    : 'REMOVE_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const setPicture = (picture) =>\n\t({\n\t\ttype    : 'SET_PICTURE',\n\t\tpayload : { picture }\n\t});\n\nexport const setMediaCapabilities = ({\n\tcanSendMic,\n\tcanSendWebcam,\n\tcanShareScreen,\n\tcanShareFiles\n}) =>\n\t({\n\t\ttype    : 'SET_MEDIA_CAPABILITIES',\n\t\tpayload : { canSendMic, canSendWebcam, canShareScreen, canShareFiles }\n\t});\n\nexport const setAudioDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setAudioOutputDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setWebcamDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setRaisedHand = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioOutputInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setWebcamInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setScreenShareInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARE_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRaisedHandInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setDisplayNameInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setIsSpeaking = (flag) =>\n\t({\n\t\ttype    : 'SET_IS_SPEAKING',\n\t\tpayload : { flag }\n\t});\n\nexport const setAutoMuted = (flag) =>\n\t({\n\t\ttype    : 'SET_AUTO_MUTED',\n\t\tpayload : { flag }\n\t});\n","/**\n * Create a function which will call the callback function\n * after the given amount of milliseconds has passed since\n * the last time the callback function was called.\n */\nexport const idle = (callback, delay) =>\n{\n\tlet handle;\n\n\treturn () =>\n\t{\n\t\tif (handle)\n\t\t{\n\t\t\tclearTimeout(handle);\n\t\t}\n\n\t\thandle = setTimeout(callback, delay);\n\t};\n};\n\n/**\n * Error produced when a socket request has a timeout.\n */\nexport class SocketTimeoutError extends Error\n{\n\tconstructor(message)\n\t{\n\t\tsuper(message);\n\n\t\tthis.name = 'SocketTimeoutError';\n\n\t\tif (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n\t\t\tError.captureStackTrace(this, SocketTimeoutError);\n\t\telse\n\t\t\tthis.stack = (new Error(message)).stack;\n\t}\n}","import React from 'react';\n\nimport './LoadingView.css';\n\nconst LoadingView = () =>\n{\n\treturn (\n\t\t<div className='LoadingView' />\n\t);\n};\n\nexport default LoadingView;\n","export function getSignalingUrl(peerId, roomId)\n{\n\tconst port =\n\t\tprocess.env.NODE_ENV !== 'production' ?\n\t\t\twindow.config.developmentPort\n\t\t\t:\n\t\t\twindow.config.productionPort;\n\n\tconst url = `wss://${window.location.hostname}:${port}/?peerId=${peerId}&roomId=${roomId}`;\n\n\treturn url;\n}\n","import Logger from './Logger';\nimport hark from 'hark';\nimport { getSignalingUrl } from './urlFactory';\nimport { SocketTimeoutError } from './utils';\nimport * as requestActions from './actions/requestActions';\nimport * as meActions from './actions/meActions';\nimport * as roomActions from './actions/roomActions';\nimport * as peerActions from './actions/peerActions';\nimport * as peerVolumeActions from './actions/peerVolumeActions';\nimport * as settingsActions from './actions/settingsActions';\nimport * as chatActions from './actions/chatActions';\nimport * as fileActions from './actions/fileActions';\nimport * as lobbyPeerActions from './actions/lobbyPeerActions';\nimport * as consumerActions from './actions/consumerActions';\nimport * as producerActions from './actions/producerActions';\nimport * as notificationActions from './actions/notificationActions';\nimport * as transportActions from './actions/transportActions';\n\nlet createTorrent;\n\nlet WebTorrent;\n\nlet saveAs;\n\nlet mediasoupClient;\n\nlet io;\n\nlet ScreenShare;\n\nlet Spotlights;\n\nlet requestTimeout,\n\ttransportOptions,\n\tlastN,\n\tmobileLastN;\n\nif (process.env.NODE_ENV !== 'test')\n{\n\t({\n\t\trequestTimeout,\n\t\ttransportOptions,\n\t\tlastN,\n\t\tmobileLastN\n\t} = window.config);\n}\n\nconst logger = new Logger('RoomClient');\n\nconst ROOM_OPTIONS =\n{\n\trequestTimeout   : requestTimeout,\n\ttransportOptions : transportOptions\n};\n\nconst VIDEO_CONSTRAINS =\n{\n\t'low' :\n\t{\n\t\twidth       : { ideal: 320 },\n\t\taspectRatio : 1.334\n\t},\n\t'medium' :\n\t{\n\t\twidth       : { ideal: 640 },\n\t\taspectRatio : 1.334\n\t},\n\t'high' :\n\t{\n\t\twidth       : { ideal: 1280 },\n\t\taspectRatio : 1.334\n\t},\n\t'veryhigh' :\n\t{\n\t\twidth       : { ideal: 1920 },\n\t\taspectRatio : 1.334\n\t},\n\t'ultra' :\n\t{\n\t\twidth       : { ideal: 3840 },\n\t\taspectRatio : 1.334\n\t}\n};\n\nconst PC_PROPRIETARY_CONSTRAINTS =\n{\n\toptional : [ { googDscp: true } ]\n};\n\nconst VIDEO_SIMULCAST_ENCODINGS =\n[\n\t{ scaleResolutionDownBy: 4 },\n\t{ scaleResolutionDownBy: 2 },\n\t{ scaleResolutionDownBy: 1 }\n];\n\n// Used for VP9 webcam video.\nconst VIDEO_KSVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3_KEY' }\n];\n\n// Used for VP9 desktop sharing.\nconst VIDEO_SVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3', dtx: true }\n];\n\nlet store;\n\nlet intl;\n\nexport default class RoomClient\n{\n\t/**\n\t * @param  {Object} data\n\t * @param  {Object} data.store - The Redux store.\n\t * @param  {Object} data.intl - react-intl object\n\t */\n\tstatic init(data)\n\t{\n\t\tstore = data.store;\n\t\tintl = data.intl;\n\t}\n\n\tconstructor(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t} = {})\n\t{\n\t\tif (!peerId)\n\t\t\tthrow new Error('Missing peerId');\n\t\telse if (!device)\n\t\t\tthrow new Error('Missing device');\n\n\t\tlogger.debug(\n\t\t\t'constructor() [peerId: \"%s\", device: \"%s\", produce: \"%s\", forceTcp: \"%s\", displayName \"\"]',\n\t\t\tpeerId, device.flag, produce, forceTcp, displayName);\n\n\t\tthis._signalingUrl = null;\n\n\t\t// Closed flag.\n\t\tthis._closed = false;\n\n\t\t// Whether we should produce.\n\t\tthis._produce = produce;\n\n\t\t// Whether we force TCP\n\t\tthis._forceTcp = forceTcp;\n\n\t\t// URL basepath\n\t\tthis._basePath = basePath;\n\n\t\t// Use displayName\n\t\tif (displayName)\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\tthis._tracker = 'wss://tracker.lab.vvc.niif.hu:443';\n\n\t\t// Torrent support\n\t\tthis._torrentSupport = null;\n\n\t\t// Whether simulcast should be used.\n\t\tthis._useSimulcast = false;\n\n\t\tif ('simulcast' in window.config)\n\t\t\tthis._useSimulcast = window.config.simulcast;\n\n\t\t// Whether simulcast should be used for sharing\n\t\tthis._useSharingSimulcast = false;\n\n\t\tif ('simulcastSharing' in window.config)\n\t\t\tthis._useSharingSimulcast = window.config.simulcastSharing;\n\n\t\tthis._muted = muted;\n\n\t\t// This device\n\t\tthis._device = device;\n\n\t\t// My peer name.\n\t\tthis._peerId = peerId;\n\n\t\t// Access code\n\t\tthis._accessCode = accessCode;\n\n\t\t// Alert sound\n\t\tthis._soundAlert = new Audio('/sounds/notify.mp3');\n\n\t\t// Socket.io peer connection\n\t\tthis._signalingSocket = null;\n\n\t\t// The room ID\n\t\tthis._roomId = null;\n\n\t\t// mediasoup-client Device instance.\n\t\t// @type {mediasoupClient.Device}\n\t\tthis._mediasoupDevice = null;\n\n\t\t// Put the browser info into state\n\t\tstore.dispatch(meActions.setBrowser(device));\n\n\t\t// Our WebTorrent client\n\t\tthis._webTorrent = null;\n\n\t\t// Max spotlights\n\t\tif (device.platform === 'desktop')\n\t\t\tthis._maxSpotlights = lastN;\n\t\telse\n\t\t\tthis._maxSpotlights = mobileLastN;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(this._maxSpotlights));\n\n\t\t// Manager of spotlight\n\t\tthis._spotlights = null;\n\n\t\t// Transport for sending.\n\t\tthis._sendTransport = null;\n\n\t\t// Transport for receiving.\n\t\tthis._recvTransport = null;\n\n\t\t// Local mic mediasoup Producer.\n\t\tthis._micProducer = null;\n\n\t\t// Local mic hark\n\t\tthis._hark = null;\n\n\t\t// Local MediaStream for hark\n\t\tthis._harkStream = null;\n\n\t\t// Local webcam mediasoup Producer.\n\t\tthis._webcamProducer = null;\n\n\t\t// Extra videos being produced\n\t\tthis._extraVideoProducers = new Map();\n\n\t\t// Map of webcam MediaDeviceInfos indexed by deviceId.\n\t\t// @type {Map<String, MediaDeviceInfos>}\n\t\tthis._webcams = {};\n\n\t\tthis._audioDevices = {};\n\n\t\tthis._audioOutputDevices = {};\n\n\t\t// mediasoup Consumers.\n\t\t// @type {Map<String, mediasoupClient.Consumer>}\n\t\tthis._consumers = new Map();\n\n\t\tthis._screenSharing = null;\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._startKeyListener();\n\n\t\tthis._startDevicesListener();\n\t}\n\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tthis._closed = true;\n\n\t\tlogger.debug('close()');\n\n\t\tthis._signalingSocket.close();\n\n\t\t// Close mediasoup Transports.\n\t\tif (this._sendTransport)\n\t\t\tthis._sendTransport.close();\n\n\t\tif (this._recvTransport)\n\t\t\tthis._recvTransport.close();\n\n\t\tstore.dispatch(roomActions.setRoomState('closed'));\n\n\t\twindow.location = '/';\n\t}\n\n\t_startKeyListener()\n\t{\n\t\t// Add keydown event listener on document\n\t\tdocument.addEventListener('keydown', (event) =>\n\t\t{\n\t\t\tif (event.repeat) return;\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyDown() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase String.fromCharCode(37):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getPrevAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase String.fromCharCode(39):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getNextAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'A': // Activate advanced mode\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(settingsActions.toggleAdvancedMode());\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.toggleAdvancedMode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Toggled advanced mode'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '1': // Set democratic view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setDemocraticView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to democratic view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '2': // Set filmstrip view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setFilmStripView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to filmstrip view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase ' ': // Push To Talk start\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'M': // Toggle microphone\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Muted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneUnMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unmuted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateMic({ start: true });\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneEnable',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enabled your microphone'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'V': // Toggle video\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.updateWebcam({ start: true });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'H': // Open help dialog\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setHelpOpen(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keyup', (event) =>\n\t\t{\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyUp() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase ' ': // Push To Talk stop\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}, true);\n\n\t}\n\n\t_startDevicesListener()\n\t{\n\t\tnavigator.mediaDevices.addEventListener('devicechange', async () =>\n\t\t{\n\t\t\tlogger.debug('_startDevicesListener() | navigator.mediaDevices.ondevicechange');\n\n\t\t\tawait this._updateAudioDevices();\n\t\t\tawait this._updateWebcams();\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.devicesChanged',\n\t\t\t\t\t\tdefaultMessage : 'Your devices changed, configure your devices in the settings dialog'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t});\n\t}\n\n\tlogin(roomId = this._roomId)\n\t{\n\t\tconst url = `/auth/login?peerId=${this._peerId}&roomId=${roomId}`;\n\n\t\twindow.open(url, 'loginWindow');\n\t}\n\n\tlogout(roomId = this._roomId)\n\t{\n\t\twindow.open(`/auth/logout?peerId=${this._peerId}&roomId=${roomId}`, 'logoutWindow');\n\t}\n\n\treceiveLoginChildWindow(data)\n\t{\n\t\tlogger.debug('receiveFromChildWindow() | [data:\"%o\"]', data);\n\n\t\tconst { displayName, picture } = data;\n\n\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\t\tstore.dispatch(meActions.setPicture(picture));\n\n\t\tstore.dispatch(meActions.loggedIn(true));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedIn',\n\t\t\t\t\tdefaultMessage : 'You are logged in'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\treceiveLogoutChildWindow()\n\t{\n\t\tlogger.debug('receiveLogoutChildWindow()');\n\n\t\tstore.dispatch(meActions.setPicture(null));\n\n\t\tstore.dispatch(meActions.loggedIn(false));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedOut',\n\t\t\t\t\tdefaultMessage : 'You are logged out'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\t_soundNotification()\n\t{\n\t\tconst { notificationSounds } = store.getState().settings;\n\n\t\tif (notificationSounds)\n\t\t{\n\t\t\tconst alertPromise = this._soundAlert.play();\n\n\t\t\tif (alertPromise !== undefined)\n\t\t\t{\n\t\t\t\talertPromise\n\t\t\t\t\t.then()\n\t\t\t\t\t.catch((error) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error('_soundAlert.play() [error:\"%o\"]', error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttimeoutCallback(callback)\n\t{\n\t\tlet called = false;\n\n\t\tconst interval = setTimeout(\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tif (called)\n\t\t\t\t\treturn;\n\t\t\t\tcalled = true;\n\t\t\t\tcallback(new SocketTimeoutError('Request timed out'));\n\t\t\t},\n\t\t\tROOM_OPTIONS.requestTimeout\n\t\t);\n\n\t\treturn (...args) =>\n\t\t{\n\t\t\tif (called)\n\t\t\t\treturn;\n\t\t\tcalled = true;\n\t\t\tclearTimeout(interval);\n\n\t\t\tcallback(...args);\n\t\t};\n\t}\n\n\t_sendRequest(method, data)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!this._signalingSocket)\n\t\t\t{\n\t\t\t\treject('No socket connection');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._signalingSocket.emit(\n\t\t\t\t\t'request',\n\t\t\t\t\t{ method, data },\n\t\t\t\t\tthis.timeoutCallback((err, response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (err)\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getTransportStats()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - recv [transportId: \"%s\"]', this._recvTransport.id);\n\n\t\t\t\tconst recv = await this.sendRequest('getTransportStats', { transportId: this._recvTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(recv, 'recv'));\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - send [transportId: \"%s\"]', this._sendTransport.id);\n\n\t\t\t\tconst send = await this.sendRequest('getTransportStats', { transportId: this._sendTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(send, 'send'));\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('getTransportStats() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendRequest(method, data)\n\t{\n\t\tlogger.debug('sendRequest() [method:\"%s\", data:\"%o\"]', method, data);\n\n\t\tconst {\n\t\t\trequestRetries = 3\n\t\t} = window.config;\n\n\t\tfor (let tries = 0; tries < requestRetries; tries++)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn await this._sendRequest(method, data);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\terror instanceof SocketTimeoutError &&\n\t\t\t\t\ttries < requestRetries\n\t\t\t\t)\n\t\t\t\t\tlogger.warn('sendRequest() | timeout, retrying [attempt:\"%s\"]', tries);\n\t\t\t\telse\n\t\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync changeDisplayName(displayName)\n\t{\n\t\tlogger.debug('changeDisplayName() [displayName:\"%s\"]', displayName);\n\n\t\tif (!displayName)\n\t\t\tdisplayName = 'Guest';\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changedDisplayName',\n\t\t\t\t\t\tdefaultMessage : 'Your display name changed to {displayName}'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdisplayName\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeDisplayName() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changeDisplayNameError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while changing your display name'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(false));\n\t}\n\n\tasync changePicture(picture)\n\t{\n\t\tlogger.debug('changePicture() [picture: \"%s\"]', picture);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changePicture() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendChatMessage(chatMessage)\n\t{\n\t\tlogger.debug('sendChatMessage() [chatMessage:\"%s\"]', chatMessage);\n\n\t\ttry\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tchatActions.addUserMessage(chatMessage.text));\n\n\t\t\tawait this.sendRequest('chatMessage', { chatMessage });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendChatMessage() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.chatError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to send chat message'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tsaveFile(file)\n\t{\n\t\tfile.getBlob((err, blob) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.saveFileError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to save file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsaveAs(blob, file.name);\n\t\t});\n\t}\n\n\thandleDownload(magnetUri)\n\t{\n\t\tstore.dispatch(\n\t\t\tfileActions.setFileActive(magnetUri));\n\n\t\tconst existingTorrent = this._webTorrent.get(magnetUri);\n\n\t\tif (existingTorrent)\n\t\t{\n\t\t\t// Never add duplicate torrents, use the existing one instead.\n\t\t\tthis._handleTorrent(existingTorrent);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webTorrent.add(magnetUri, this._handleTorrent);\n\t}\n\n\t_handleTorrent(torrent)\n\t{\n\t\t// Torrent already done, this can happen if the\n\t\t// same file was sent multiple times.\n\t\tif (torrent.progress === 1)\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastMove = 0;\n\n\t\ttorrent.on('download', () =>\n\t\t{\n\t\t\tif (Date.now() - lastMove > 1000)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tfileActions.setFileProgress(\n\t\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\t\ttorrent.progress\n\t\t\t\t\t));\n\n\t\t\t\tlastMove = Date.now();\n\t\t\t}\n\t\t});\n\n\t\ttorrent.on('done', () =>\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\t\t});\n\t}\n\n\tasync shareFiles(files)\n\t{\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'filesharing.startingFileShare',\n\t\t\t\t\tdefaultMessage : 'Attempting to share file'\n\t\t\t\t})\n\t\t\t}));\n\n\t\tcreateTorrent(files, (err, torrent) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst existingTorrent = this._webTorrent.get(torrent);\n\n\t\t\tif (existingTorrent)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\tthis._peerId,\n\t\t\t\t\texistingTorrent.magnetURI\n\t\t\t\t));\n\n\t\t\t\tthis._sendFile(existingTorrent.magnetURI);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._webTorrent.seed(\n\t\t\t\tfiles,\n\t\t\t\t{ announceList: [ [ this._tracker ] ] },\n\t\t\t\t(newTorrent) =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\t\tthis._peerId,\n\t\t\t\t\t\tnewTorrent.magnetURI\n\t\t\t\t\t));\n\n\t\t\t\t\tthis._sendFile(newTorrent.magnetURI);\n\t\t\t\t});\n\t\t});\n\t}\n\n\t// { file, name, picture }\n\tasync _sendFile(magnetUri)\n\t{\n\t\tlogger.debug('sendFile() [magnetUri:\"%o\"]', magnetUri);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('sendFile', { magnetUri });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendFile() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync muteMic()\n\t{\n\t\tlogger.debug('muteMic()');\n\n\t\tthis._micProducer.pause();\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'pauseProducer', { producerId: this._micProducer.id });\n\n\t\t\tstore.dispatch(\n\t\t\t\tproducerActions.setProducerPaused(this._micProducer.id));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneMuteError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to mute your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync unmuteMic()\n\t{\n\t\tlogger.debug('unmuteMic()');\n\n\t\tif (!this._micProducer)\n\t\t{\n\t\t\tthis.updateMic({ start: true });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._micProducer.resume();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest(\n\t\t\t\t\t'resumeProducer', { producerId: this._micProducer.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.setProducerResumed(this._micProducer.id));\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('unmuteMic() [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.microphoneUnMuteError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to unmute your microphone'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tchangeMaxSpotlights(maxSpotlights)\n\t{\n\t\tthis._spotlights.maxSpotlights = maxSpotlights;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(maxSpotlights));\n\t}\n\n\t// Updated consumers based on spotlights\n\tasync updateSpotlights(spotlights)\n\t{\n\t\tlogger.debug('updateSpotlights()');\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.kind === 'video')\n\t\t\t\t{\n\t\t\t\t\tif (spotlights.includes(consumer.appData.peerId))\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateSpotlights() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tdisconnectLocalHark()\n\t{\n\t\tlogger.debug('disconnectLocalHark()');\n\n\t\tif (this._harkStream != null)\n\t\t{\n\t\t\tlet [ track ] = this._harkStream.getAudioTracks();\n\n\t\t\ttrack.stop();\n\t\t\ttrack = null;\n\n\t\t\tthis._harkStream = null;\n\t\t}\n\n\t\tif (this._hark != null)\n\t\t\tthis._hark.stop();\n\t}\n\n\tconnectLocalHark(track)\n\t{\n\t\tlogger.debug('connectLocalHark() [track:\"%o\"]', track);\n\n\t\tthis._harkStream = new MediaStream();\n\n\t\tconst newTrack = track.clone();\n\n\t\tthis._harkStream.addTrack(newTrack);\n\n\t\tnewTrack.enabled = true;\n\n\t\tthis._hark = hark(this._harkStream,\n\t\t\t{\n\t\t\t\tplay      : false,\n\t\t\t\tinterval  : 10,\n\t\t\t\tthreshold : store.getState().settings.noiseThreshold,\n\t\t\t\thistory   : 100\n\t\t\t});\n\n\t\tthis._hark.lastVolume = -100;\n\n\t\tthis._hark.on('volume_change', (volume) =>\n\t\t{\n\t\t\tvolume = Math.round(volume);\n\n\t\t\tif (this._micProducer && (volume !== Math.round(this._hark.lastVolume)))\n\t\t\t{\n\t\t\t\tif (volume < this._hark.lastVolume)\n\t\t\t\t{\n\t\t\t\t\tvolume =\n\t\t\t\t\t\tthis._hark.lastVolume -\n\t\t\t\t\t\tMath.pow(\n\t\t\t\t\t\t\t(volume - this._hark.lastVolume) /\n\t\t\t\t\t\t\t(100 + this._hark.lastVolume)\n\t\t\t\t\t\t\t, 4\n\t\t\t\t\t\t) * 2;\n\t\t\t\t}\n\n\t\t\t\tthis._hark.lastVolume = volume;\n\n\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(this._peerId, volume));\n\t\t\t}\n\t\t});\n\n\t\tthis._hark.on('speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(true));\n\n\t\t\tif (\n\t\t\t\t(store.getState().settings.voiceActivatedUnmute ||\n\t\t\t\tstore.getState().me.isAutoMuted) &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\tthis._micProducer.paused\n\t\t\t)\n\t\t\t\tthis._micProducer.resume();\n\n\t\t\tstore.dispatch(meActions.setAutoMuted(false)); // sanity action\n\t\t});\n\n\t\tthis._hark.on('stopped_speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(false));\n\n\t\t\tif (\n\t\t\t\tstore.getState().settings.voiceActivatedUnmute &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\t!this._micProducer.paused\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis._micProducer.pause();\n\n\t\t\t\tstore.dispatch(meActions.setAutoMuted(true));\n\t\t\t}\n\t\t});\n\t}\n\n\tasync changeAudioOutputDevice(deviceId)\n\t{\n\t\tlogger.debug('changeAudioOutputDevice() [deviceId:\"%s\"]', deviceId);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._audioOutputDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('Selected audio output device no longer available');\n\n\t\t\tstore.dispatch(settingsActions.setSelectedAudioOutputDevice(deviceId));\n\n\t\t\tawait this._updateAudioOutputDevices();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeAudioOutputDevice() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(false));\n\t}\n\n\tasync updateMic({ start = false, restart = false, newDeviceId = null } = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateMic() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('audio'))\n\t\t\t\tthrow new Error('cannot produce audio');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(newDeviceId));\n\n\t\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\t\tconst deviceId = await this._getAudioDeviceId();\n\t\t\tconst device = this._audioDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no audio devices');\n\n\t\t\tconst {\n\t\t\t\tsampleRate,\n\t\t\t\tchannelCount,\n\t\t\t\tvolume,\n\t\t\t\tautoGainControl,\n\t\t\t\techoCancellation,\n\t\t\t\tnoiseSuppression,\n\t\t\t\tsampleSize\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._micProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.disconnectLocalHark();\n\n\t\t\t\tif (this._micProducer)\n\t\t\t\t\tawait this.disableMic();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\taudio : {\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t([ track ] = stream.getAudioTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(trackDeviceId));\n\n\t\t\t\tthis._micProducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\topusStereo          : false,\n\t\t\t\t\t\t\topusDtx             : true,\n\t\t\t\t\t\t\topusFec             : true,\n\t\t\t\t\t\t\topusPtime           : '3',\n\t\t\t\t\t\t\topusMaxPlaybackRate\t: 48000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{ source: 'mic' }\n\t\t\t\t\t});\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._micProducer.id,\n\t\t\t\t\t\tsource        : 'mic',\n\t\t\t\t\t\tpaused        : this._micProducer.paused,\n\t\t\t\t\t\ttrack         : this._micProducer.track,\n\t\t\t\t\t\trtpParameters : this._micProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._micProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._micProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._micProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.microphoneDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Microphone disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableMic();\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.volume = 0;\n\n\t\t\t\tthis.connectLocalHark(track);\n\t\t\t}\n\t\t\telse if (this._micProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._micProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\tvolume,\n\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\tsampleSize\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif (this._harkStream != null)\n\t\t\t\t{\n\t\t\t\t\tconst [ harkTrack ] = this._harkStream.getAudioTracks();\n\n\t\t\t\t\tharkTrack && await harkTrack.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateWebcam({\n\t\tstart = false,\n\t\trestart = false,\n\t\tnewDeviceId = null,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateWebcam() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\", newResolution:\"%s\", newFrameRate:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId,\n\t\t\tnewResolution,\n\t\t\tnewFrameRate\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(newDeviceId));\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setVideoResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setVideoFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\t\tconst deviceId = await this._getWebcamDeviceId();\n\t\t\tconst device = this._webcams[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst {\n\t\t\t\tresolution,\n\t\t\t\tframeRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._webcamProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\tawait this.disableWebcam();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(trackDeviceId));\n\n\t\t\t\tif (this._useSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\t\telse\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._webcamProducer.id,\n\t\t\t\t\t\tsource        : 'webcam',\n\t\t\t\t\t\tpaused        : this._webcamProducer.paused,\n\t\t\t\t\t\ttrack         : this._webcamProducer.track,\n\t\t\t\t\t\trtpParameters : this._webcamProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._webcamProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._webcamProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._webcamProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._webcamProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._webcamProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\tframeRate\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Also change resolution of extra video producers\n\t\t\t\tfor (const producer of this._extraVideoProducers.values())\n\t\t\t\t{\n\t\t\t\t\t({ track } = producer);\n\n\t\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateWebcam() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tsetSelectedPeer(peerId)\n\t{\n\t\tlogger.debug('setSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\tthis._spotlights.setPeerSpotlight(peerId);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setSelectedPeer(peerId));\n\t}\n\n\tasync promoteAllLobbyPeers()\n\t{\n\t\tlogger.debug('promoteAllLobbyPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promoteAllPeers');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteAllLobbyPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(false));\n\t}\n\n\tasync promoteLobbyPeer(peerId)\n\t{\n\t\tlogger.debug('promoteLobbyPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promotePeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteLobbyPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, false));\n\t}\n\n\tasync clearChat()\n\t{\n\t\tlogger.debug('clearChat()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearChat');\n\n\t\t\tstore.dispatch(chatActions.clearChat());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearChat() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(false));\n\t}\n\n\tasync clearFileSharing()\n\t{\n\t\tlogger.debug('clearFileSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearFileSharing');\n\n\t\t\tstore.dispatch(fileActions.clearFiles());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearFileSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(false));\n\t}\n\n\tasync kickPeer(peerId)\n\t{\n\t\tlogger.debug('kickPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:kickPeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('kickPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, false));\n\t}\n\n\tasync mutePeer(peerId)\n\t{\n\t\tlogger.debug('mutePeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:mute', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('mutePeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, false));\n\t}\n\n\tasync stopPeerVideo(peerId)\n\t{\n\t\tlogger.debug('stopPeerVideo() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopVideo', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, false));\n\t}\n\n\tasync stopPeerScreenSharing(peerId)\n\t{\n\t\tlogger.debug('stopPeerScreenSharing() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopScreenSharing', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, false));\n\t}\n\n\tasync muteAllPeers()\n\t{\n\t\tlogger.debug('muteAllPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:muteAll');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteAllPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(false));\n\t}\n\n\tasync stopAllPeerVideo()\n\t{\n\t\tlogger.debug('stopAllPeerVideo()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllVideo');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(false));\n\t}\n\n\tasync stopAllPeerScreenSharing()\n\t{\n\t\tlogger.debug('stopAllPeerScreenSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllScreenSharing');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(false));\n\t}\n\n\tasync closeMeeting()\n\t{\n\t\tlogger.debug('closeMeeting()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:closeMeeting');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('closeMeeting() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(false));\n\t}\n\n\t// type: mic/webcam/screen\n\t// mute: true/false\n\tasync modifyPeerConsumer(peerId, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'modifyPeerConsumer() [peerId:\"%s\", type:\"%s\"]',\n\t\t\tpeerId,\n\t\t\ttype\n\t\t);\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, true));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, true));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.appData.peerId === peerId && consumer.appData.source === type)\n\t\t\t\t{\n\t\t\t\t\tif (mute)\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('modifyPeerConsumer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, false));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, false));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, false));\n\t}\n\n\tasync _pauseConsumer(consumer)\n\t{\n\t\tlogger.debug('_pauseConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('pauseConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.pause();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerPaused(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_pauseConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _resumeConsumer(consumer)\n\t{\n\t\tlogger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (!consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('resumeConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.resume();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerResumed(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_resumeConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync lowerPeerHand(peerId)\n\t{\n\t\tlogger.debug('lowerPeerHand() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:lowerHand', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('lowerPeerHand() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, false));\n\t}\n\n\tasync setRaisedHand(raisedHand)\n\t{\n\t\tlogger.debug('setRaisedHand: ', raisedHand);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('raisedHand', { raisedHand });\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setRaisedHand(raisedHand));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setRaisedHand() [error:\"%o\"]', error);\n\n\t\t\t// We need to refresh the component for it to render changed state\n\t\t\tstore.dispatch(meActions.setRaisedHand(!raisedHand));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(false));\n\t}\n\n\tasync setMaxSendingSpatialLayer(spatialLayer)\n\t{\n\t\tlogger.debug('setMaxSendingSpatialLayer() [spatialLayer:\"%s\"]', spatialLayer);\n\n\t\ttry\n\t\t{\n\t\t\tif (this._webcamProducer)\n\t\t\t\tawait this._webcamProducer.setMaxSpatialLayer(spatialLayer);\n\t\t\tif (this._screenSharingProducer)\n\t\t\t\tawait this._screenSharingProducer.setMaxSpatialLayer(spatialLayer);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setMaxSendingSpatialLayer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPreferredLayers(consumerId, spatialLayer, temporalLayer)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPreferredLayers() [consumerId:\"%s\", spatialLayer:\"%s\", temporalLayer:\"%s\"]',\n\t\t\tconsumerId, spatialLayer, temporalLayer);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'setConsumerPreferedLayers', { consumerId, spatialLayer, temporalLayer });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPreferredLayers(\n\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPreferredLayers() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPriority(consumerId, priority)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPriority() [consumerId:\"%s\", priority:%d]',\n\t\t\tconsumerId, priority);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setConsumerPriority', { consumerId, priority });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPriority(consumerId, priority));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPriority() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync requestConsumerKeyFrame(consumerId)\n\t{\n\t\tlogger.debug('requestConsumerKeyFrame() [consumerId:\"%s\"]', consumerId);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('requestConsumerKeyFrame', { consumerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('requestConsumerKeyFrame() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _loadDynamicImports()\n\t{\n\t\t({ default: createTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"createtorrent\" */\n\t\t\t'create-torrent'\n\t\t));\n\n\t\t({ default: WebTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"webtorrent\" */\n\t\t\t'webtorrent'\n\t\t));\n\n\t\t({ default: saveAs } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"file-saver\" */\n\t\t\t'file-saver'\n\t\t));\n\n\t\t({ default: ScreenShare } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"screensharing\" */\n\t\t\t'./ScreenShare'\n\t\t));\n\n\t\t({ default: Spotlights } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"spotlights\" */\n\t\t\t'./Spotlights'\n\t\t));\n\n\t\tmediasoupClient = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"mediasoup\" */\n\t\t\t'mediasoup-client'\n\t\t);\n\n\t\t({ default: io } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"socket.io\" */\n\t\t\t'socket.io-client'\n\t\t));\n\t}\n\n\tasync join({ roomId, joinVideo })\n\t{\n\t\tawait this._loadDynamicImports();\n\n\t\tthis._roomId = roomId;\n\n\t\tstore.dispatch(roomActions.setRoomName(roomId));\n\n\t\tthis._signalingUrl = getSignalingUrl(this._peerId, roomId);\n\n\t\tthis._screenSharing = ScreenShare.create(this._device);\n\n\t\tthis._signalingSocket = io(this._signalingUrl);\n\n\t\tthis._spotlights = new Spotlights(this._maxSpotlights, this._signalingSocket);\n\n\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\n\t\tthis._signalingSocket.on('connect', () =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"connect\" event');\n\t\t});\n\n\t\tthis._signalingSocket.on('disconnect', (reason) =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"disconnect\" event [reason:\"%s\"]', reason);\n\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tif (reason === 'io server disconnect')\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.close();\n\t\t\t}\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnecting',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected, attempting to reconnect'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\tthis._screenSharingProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t}\n\n\t\t\tif (this._webcamProducer)\n\t\t\t{\n\t\t\t\tthis._webcamProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\t\t\tthis._webcamProducer = null;\n\t\t\t}\n\n\t\t\tif (this._micProducer)\n\t\t\t{\n\t\t\t\tthis._micProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\t\t\tthis._micProducer = null;\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tthis._sendTransport.close();\n\n\t\t\t\tthis._sendTransport = null;\n\t\t\t}\n\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tthis._recvTransport.close();\n\n\t\t\t\tthis._recvTransport = null;\n\t\t\t}\n\n\t\t\tthis._spotlights.clearSpotlights();\n\n\t\t\tstore.dispatch(peerActions.clearPeers());\n\t\t\tstore.dispatch(consumerActions.clearConsumers());\n\t\t\tstore.dispatch(roomActions.clearSpotlights());\n\t\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect_failed', () =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"reconnect_failed\" event');\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect', (attemptNumber) =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"reconnect\" event [attempts:\"%s\"]', attemptNumber);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are reconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\t\t});\n\n\t\tthis._signalingSocket.on('request', async (request, cb) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"request\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\trequest.method, request.data);\n\n\t\t\tswitch (request.method)\n\t\t\t{\n\t\t\t\tcase 'newConsumer':\n\t\t\t\t{\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tkind,\n\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tappData,\n\t\t\t\t\t\tproducerPaused\n\t\t\t\t\t} = request.data;\n\n\t\t\t\t\tconst consumer = await this._recvTransport.consume(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\tappData : { ...appData, peerId } // Trick.\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Store in the map.\n\t\t\t\t\tthis._consumers.set(consumer.id, consumer);\n\n\t\t\t\t\tconsumer.on('transportclose', () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._consumers.delete(consumer.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst { spatialLayers, temporalLayers } =\n\t\t\t\t\t\tmediasoupClient.parseScalabilityMode(\n\t\t\t\t\t\t\tconsumer.rtpParameters.encodings[0].scalabilityMode);\n\n\t\t\t\t\tstore.dispatch(consumerActions.addConsumer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid                     : consumer.id,\n\t\t\t\t\t\t\tpeerId                 : peerId,\n\t\t\t\t\t\t\tkind                   : kind,\n\t\t\t\t\t\t\ttype                   : type,\n\t\t\t\t\t\t\tlocallyPaused          : false,\n\t\t\t\t\t\t\tremotelyPaused         : producerPaused,\n\t\t\t\t\t\t\trtpParameters          : consumer.rtpParameters,\n\t\t\t\t\t\t\tsource                 : consumer.appData.source,\n\t\t\t\t\t\t\tspatialLayers          : spatialLayers,\n\t\t\t\t\t\t\ttemporalLayers         : temporalLayers,\n\t\t\t\t\t\t\tpreferredSpatialLayer  : spatialLayers - 1,\n\t\t\t\t\t\t\tpreferredTemporalLayer : temporalLayers - 1,\n\t\t\t\t\t\t\tpriority               : 1,\n\t\t\t\t\t\t\tcodec                  : consumer.rtpParameters.codecs[0].mimeType.split('/')[1],\n\t\t\t\t\t\t\ttrack                  : consumer.track\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpeerId));\n\n\t\t\t\t\t// We are ready. Answer the request so the server will\n\t\t\t\t\t// resume this Consumer (which was paused for now).\n\t\t\t\t\tcb(null);\n\n\t\t\t\t\tif (kind === 'audio')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsumer.volume = 0;\n\n\t\t\t\t\t\tconst stream = new MediaStream();\n\n\t\t\t\t\t\tstream.addTrack(consumer.track);\n\n\t\t\t\t\t\tif (!stream.getAudioTracks()[0])\n\t\t\t\t\t\t\tthrow new Error('request.newConsumer | given stream has no audio track');\n\n\t\t\t\t\t\tconsumer.hark = hark(stream, { play: false });\n\n\t\t\t\t\t\tconsumer.hark.on('volume_change', (volume) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvolume = Math.round(volume);\n\n\t\t\t\t\t\t\tif (consumer && volume !== consumer.volume)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsumer.volume = volume;\n\n\t\t\t\t\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(peerId, volume));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tlogger.error('unknown request.method \"%s\"', request.method);\n\n\t\t\t\t\tcb(500, `unknown request.method \"${request.method}\"`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._signalingSocket.on('notification', async (notification) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"notification\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\tnotification.method, notification.data);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tswitch (notification.method)\n\t\t\t\t{\n\n\t\t\t\t\tcase 'enteredLobby':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(true));\n\n\t\t\t\t\t\tconst { displayName } = store.getState().settings;\n\t\t\t\t\t\tconst { picture } = store.getState().me;\n\n\t\t\t\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\t\t\t\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'signInRequired':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setSignInRequired(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'overRoomLimit':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setOverRoomLimit(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomReady':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { turnServers } = notification.data;\n\n\t\t\t\t\t\tthis._turnServers = turnServers;\n\n\t\t\t\t\t\tstore.dispatch(roomActions.toggleJoined());\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(false));\n\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomBack':\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now locked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'unlockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.unlocked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now unlocked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peerId));\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeers':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { lobbyPeers } = notification.data;\n\n\t\t\t\t\t\tif (lobbyPeers.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlobbyPeers.forEach((peer) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(\n\t\t\t\t\t\t\t\t\t\tpeer.displayName,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(\n\t\t\t\t\t\t\t\t\t\tpeer.picture,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerLeft',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby left'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:promotedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed name to {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(picture, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedPicture',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed picture'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { accessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setAccessCode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room updated'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setJoinByAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { joinByAccessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setJoinByAccessCode(joinByAccessCode));\n\n\t\t\t\t\t\tif (joinByAccessCode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOn',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now activated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOff',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now deactivated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'activeSpeaker':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomActiveSpeaker(peerId));\n\n\t\t\t\t\t\tif (peerId && peerId !== this._peerId)\n\t\t\t\t\t\t\tthis._spotlights.handleActiveSpeaker(peerId);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName, oldDisplayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.peerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{oldDisplayName} is now {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\toldDisplayName,\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(peerActions.setPeerPicture(peerId, picture));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'raisedHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t} = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerRaisedHand(\n\t\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst { displayName } = store.getState().peers[peerId];\n\n\t\t\t\t\t\tlet text;\n\n\t\t\t\t\t\tif (raisedHand)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.raisedHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} raised their hand'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.loweredHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} put their hand down'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (displayName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'chatMessage':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, chatMessage } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tchatActions.addResponseMessage({ ...chatMessage, peerId }));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'chat')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearChat':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(chatActions.clearChat());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearChat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the chat'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'sendFile':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, magnetUri } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(fileActions.addFile(peerId, magnetUri));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newFile',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New file available'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'files')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearFileSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(fileActions.clearFiles());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearFiles',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the files'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'producerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { producerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tproducerActions.setProducerScore(producerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'newPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { id, displayName, picture, roles } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.addPeer({ id, displayName, picture, roles, consumers: [] }));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} joined the room'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.removePeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tconsumer.close();\n\n\t\t\t\t\t\tif (consumer.hark != null)\n\t\t\t\t\t\t\tconsumer.hark.stop();\n\n\t\t\t\t\t\tthis._consumers.delete(consumerId);\n\n\t\t\t\t\t\tconst { peerId } = consumer.appData;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.removeConsumer(consumerId, peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerPaused':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerPaused(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerResumed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerResumed(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerLayersChanged':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, spatialLayer, temporalLayer } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(consumerActions.setConsumerCurrentLayers(\n\t\t\t\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerScore(consumerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:mute':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopVideo':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableWebcam();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.muteVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your video'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopScreenSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableScreenSharing();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.stopScreenSharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your screen sharing'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:kick':\n\t\t\t\t\t{\n\t\t\t\t\t\t// Need some feedback\n\t\t\t\t\t\tthis.close();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:lowerHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setRaisedHand(false);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'gotRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.addPeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lostRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.removeRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.lostRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You lost the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.removePeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error(\n\t\t\t\t\t\t\t'unknown notification.method \"%s\"', notification.method);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('error on socket \"notification\" event [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'Error on server request'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tasync _joinRoom({ joinVideo })\n\t{\n\t\tlogger.debug('_joinRoom()');\n\n\t\tconst { displayName } = store.getState().settings;\n\t\tconst { picture } = store.getState().me;\n\n\t\ttry\n\t\t{\n\t\t\tthis._torrentSupport = WebTorrent.WEBRTC_SUPPORT;\n\n\t\t\tthis._webTorrent = this._torrentSupport && new WebTorrent({\n\t\t\t\ttracker : {\n\t\t\t\t\trtcConfig : {\n\t\t\t\t\t\ticeServers : this._turnServers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._webTorrent.on('error', (error) =>\n\t\t\t{\n\t\t\t\tlogger.error('Filesharing [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.error',\n\t\t\t\t\t\t\tdefaultMessage : 'There was a filesharing error'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t});\n\n\t\t\tthis._mediasoupDevice = new mediasoupClient.Device();\n\n\t\t\tconst routerRtpCapabilities =\n\t\t\t\tawait this.sendRequest('getRouterRtpCapabilities');\n\n\t\t\trouterRtpCapabilities.headerExtensions = routerRtpCapabilities.headerExtensions\n\t\t\t\t.filter((ext) => ext.uri !== 'urn:3gpp:video-orientation');\n\n\t\t\tawait this._mediasoupDevice.load({ routerRtpCapabilities });\n\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t\t'createWebRtcTransport',\n\t\t\t\t\t{\n\t\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\t\tproducing : true,\n\t\t\t\t\t\tconsuming : false\n\t\t\t\t\t});\n\n\t\t\t\tconst {\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters\n\t\t\t\t} = transportInfo;\n\n\t\t\t\tthis._sendTransport = this._mediasoupDevice.createSendTransport(\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ticeParameters,\n\t\t\t\t\t\ticeCandidates,\n\t\t\t\t\t\tdtlsParameters,\n\t\t\t\t\t\ticeServers             : this._turnServers,\n\t\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\t\ticeTransportPolicy     : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined,\n\t\t\t\t\t\tproprietaryConstraints : PC_PROPRIETARY_CONSTRAINTS\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t\t.catch(errback);\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'produce', async ({ kind, rtpParameters, appData }, callback, errback) =>\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\t\t\tconst { id } = await this.sendRequest(\n\t\t\t\t\t\t\t\t'produce',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\t\t\tappData\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcallback({ id });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrback(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t'createWebRtcTransport',\n\t\t\t\t{\n\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\tproducing : false,\n\t\t\t\t\tconsuming : true\n\t\t\t\t});\n\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\ticeParameters,\n\t\t\t\ticeCandidates,\n\t\t\t\tdtlsParameters\n\t\t\t} = transportInfo;\n\n\t\t\tthis._recvTransport = this._mediasoupDevice.createRecvTransport(\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters,\n\t\t\t\t\ticeServers         : this._turnServers,\n\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\ticeTransportPolicy : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined\n\t\t\t\t});\n\n\t\t\tthis._recvTransport.on(\n\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t{\n\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransportId : this._recvTransport.id,\n\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t.catch(errback);\n\t\t\t\t});\n\n\t\t\t// Set our media capabilities.\n\t\t\tstore.dispatch(meActions.setMediaCapabilities(\n\t\t\t\t{\n\t\t\t\t\tcanSendMic     : this._mediasoupDevice.canProduce('audio'),\n\t\t\t\t\tcanSendWebcam  : this._mediasoupDevice.canProduce('video'),\n\t\t\t\t\tcanShareScreen : this._mediasoupDevice.canProduce('video') &&\n\t\t\t\t\t\tthis._screenSharing.isScreenShareAvailable(),\n\t\t\t\t\tcanShareFiles : this._torrentSupport\n\t\t\t\t}));\n\n\t\t\tconst {\n\t\t\t\tauthenticated,\n\t\t\t\troles,\n\t\t\t\tpeers,\n\t\t\t\ttracker,\n\t\t\t\troomPermissions,\n\t\t\t\tallowWhenRoleMissing,\n\t\t\t\tchatHistory,\n\t\t\t\tfileHistory,\n\t\t\t\tlastNHistory,\n\t\t\t\tlocked,\n\t\t\t\tlobbyPeers,\n\t\t\t\taccessCode\n\t\t\t} = await this.sendRequest(\n\t\t\t\t'join',\n\t\t\t\t{\n\t\t\t\t\tdisplayName     : displayName,\n\t\t\t\t\tpicture         : picture,\n\t\t\t\t\trtpCapabilities : this._mediasoupDevice.rtpCapabilities\n\t\t\t\t});\n\n\t\t\tlogger.debug(\n\t\t\t\t'_joinRoom() joined [authenticated:\"%s\", peers:\"%o\", roles:\"%o\"]',\n\t\t\t\tauthenticated,\n\t\t\t\tpeers,\n\t\t\t\troles\n\t\t\t);\n\n\t\t\ttracker && (this._tracker = tracker);\n\n\t\t\tstore.dispatch(meActions.loggedIn(authenticated));\n\n\t\t\tstore.dispatch(roomActions.setRoomPermissions(roomPermissions));\n\n\t\t\tif (allowWhenRoleMissing)\n\t\t\t\tstore.dispatch(roomActions.setAllowWhenRoleMissing(allowWhenRoleMissing));\n\n\t\t\tconst myRoles = store.getState().me.roles;\n\n\t\t\tfor (const role of roles)\n\t\t\t{\n\t\t\t\tif (!myRoles.includes(role))\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const peer of peers)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tpeerActions.addPeer({ ...peer, consumers: [] }));\n\t\t\t}\n\n\t\t\tthis._spotlights.addPeers(peers);\n\n\t\t\tthis._spotlights.on('spotlights-updated', (spotlights) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(roomActions.setSpotlights(spotlights));\n\t\t\t\tthis.updateSpotlights(spotlights);\n\t\t\t});\n\n\t\t\t(chatHistory.length > 0) && store.dispatch(\n\t\t\t\tchatActions.addChatHistory(chatHistory));\n\n\t\t\t(fileHistory.length > 0) && store.dispatch(\n\t\t\t\tfileActions.addFileHistory(fileHistory));\n\n\t\t\tif (lastNHistory.length > 0)\n\t\t\t{\n\t\t\t\tlogger.debug('_joinRoom() | got lastN history');\n\n\t\t\t\tthis._spotlights.addSpeakerList(\n\t\t\t\t\tlastNHistory.filter((peerId) => peerId !== this._peerId)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlocked ?\n\t\t\t\tstore.dispatch(roomActions.setRoomLocked()) :\n\t\t\t\tstore.dispatch(roomActions.setRoomUnLocked());\n\n\t\t\t(lobbyPeers.length > 0) && lobbyPeers.forEach((peer) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(peer.displayName, peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(peer.picture, peer.id));\n\t\t\t});\n\n\t\t\t(accessCode != null) && store.dispatch(\n\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t// Don't produce if explicitly requested to not to do it.\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tif (this._mediasoupDevice.canProduce('audio'))\n\t\t\t\t\tif (!this._muted)\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this.updateMic({ start: true });\n\t\t\t\t\t\tlet autoMuteThreshold = 4;\n\n\t\t\t\t\t\tif ('autoMuteThreshold' in window.config)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautoMuteThreshold = window.config.autoMuteThreshold;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (autoMuteThreshold && peers.length >= autoMuteThreshold)\n\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t}\n\n\t\t\t\tif (joinVideo)\n\t\t\t\t\tthis.updateWebcam({ start: true });\n\t\t\t}\n\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tconst { selectedAudioOutputDevice } = store.getState().settings;\n\n\t\t\tif (!selectedAudioOutputDevice && this._audioOutputDevices !== {})\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tsettingsActions.setSelectedAudioOutputDevice(\n\t\t\t\t\t\tObject.keys(this._audioOutputDevices)[0]\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\n\t\t\t// Clean all the existing notifications.\n\t\t\tstore.dispatch(notificationActions.removeAllNotifications());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.joined',\n\t\t\t\t\t\tdefaultMessage : 'You have joined the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis._spotlights.start();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_joinRoom() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantJoin',\n\t\t\t\t\t\tdefaultMessage : 'Unable to join the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tasync lockRoom()\n\t{\n\t\tlogger.debug('lockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('lockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youLocked',\n\t\t\t\t\t\tdefaultMessage : 'You locked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to lock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('lockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync unlockRoom()\n\t{\n\t\tlogger.debug('unlockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('unlockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youUnLocked',\n\t\t\t\t\t\tdefaultMessage : 'You unlocked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantUnLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to unlock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('unlockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setAccessCode(code)\n\t{\n\t\tlogger.debug('setAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setAccessCode', { accessCode: code });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setAccessCode(code));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : 'Access code saved.'\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync setJoinByAccessCode(value)\n\t{\n\t\tlogger.debug('setJoinByAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setJoinByAccessCode', { joinByAccessCode: value });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setJoinByAccessCode(value));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `You switched Join by access-code to ${value}`\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set join by access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync addExtraVideo(videoDeviceId)\n\t{\n\t\tlogger.debug(\n\t\t\t'addExtraVideo() [videoDeviceId:\"%s\"]',\n\t\t\tvideoDeviceId\n\t\t);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setExtraVideoOpen(false));\n\n\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t{\n\t\t\tlogger.error('addExtraVideo() | cannot produce video');\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet track;\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._webcams[videoDeviceId];\n\t\t\tconst resolution = store.getState().settings.resolution;\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t{\n\t\t\t\t\tvideo :\n\t\t\t\t\t{\n\t\t\t\t\t\tdeviceId : { ideal: videoDeviceId },\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\tlet producer;\n\n\t\t\tif (this._useSimulcast)\n\t\t\t{\n\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t.codecs\n\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\tlet encodings;\n\n\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\telse\n\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\tproducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tencodings,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tproducer = await this._sendTransport.produce({\n\t\t\t\t\ttrack,\n\t\t\t\t\tappData :\n\t\t\t\t\t{\n\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._extraVideoProducers.set(producer.id, producer);\n\n\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t{\n\t\t\t\t\tid            : producer.id,\n\t\t\t\t\tdeviceLabel   : device.label,\n\t\t\t\t\tsource        : 'extravideo',\n\t\t\t\t\tpaused        : producer.paused,\n\t\t\t\t\ttrack         : producer.track,\n\t\t\t\t\trtpParameters : producer.rtpParameters,\n\t\t\t\t\tcodec         : producer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t}));\n\n\t\t\t// store.dispatch(settingsActions.setSelectedWebcamDevice(deviceId));\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tproducer.on('transportclose', () =>\n\t\t\t{\n\t\t\t\tthis._extraVideoProducers.delete(producer.id);\n\n\t\t\t\tproducer = null;\n\t\t\t});\n\n\t\t\tproducer.on('trackended', () =>\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.disableExtraVideo(producer.id)\n\t\t\t\t\t.catch(() => {});\n\t\t\t});\n\n\t\t\tlogger.debug('addExtraVideo() succeeded');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('addExtraVideo() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableMic()\n\t{\n\t\tlogger.debug('disableMic()');\n\n\t\tif (!this._micProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\tthis._micProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._micProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableMic() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._micProducer = null;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateScreenSharing({\n\t\tstart = false,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug('updateScreenSharing() [start:\"%s\"]', start);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tconst available = this._screenSharing.isScreenShareAvailable();\n\n\t\t\tif (!available)\n\t\t\t\tthrow new Error('screen sharing not available');\n\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\t\tconst {\n\t\t\t\tscreenSharingResolution,\n\t\t\t\tscreenSharingFrameRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (start)\n\t\t\t{\n\t\t\t\tconst stream = await this._screenSharing.start({\n\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tif (this._useSharingSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SVC_ENCODINGS;\n\t\t\t\t\t}\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._screenSharingProducer.id,\n\t\t\t\t\t\tdeviceLabel   : 'screen',\n\t\t\t\t\t\tsource        : 'screen',\n\t\t\t\t\t\tpaused        : this._screenSharingProducer.paused,\n\t\t\t\t\t\ttrack         : this._screenSharingProducer.track,\n\t\t\t\t\t\trtpParameters : this._screenSharingProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._screenSharingProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._screenSharingProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._screenSharingProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.screenSharingDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Screen sharing disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableScreenSharing();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._screenSharingProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateScreenSharing() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.screenSharingError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your screen'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableScreenSharing()\n\t{\n\t\tlogger.debug('disableScreenSharing()');\n\n\t\tif (!this._screenSharingProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\tthis._screenSharingProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._screenSharingProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._screenSharing.stop();\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableExtraVideo(id)\n\t{\n\t\tlogger.debug('disableExtraVideo()');\n\n\t\tconst producer = this._extraVideoProducers.get(id);\n\n\t\tif (!producer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tproducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._extraVideoProducers.delete(id);\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableWebcam()\n\t{\n\t\tlogger.debug('disableWebcam()');\n\n\t\tif (!this._webcamProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tthis._webcamProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._webcamProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._webcamProducer = null;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync _setNoiseThreshold(threshold)\n\t{\n\t\tlogger.debug('_setNoiseThreshold() [threshold:\"%s\"]', threshold);\n\n\t\tthis._hark.setThreshold(threshold);\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setNoiseThreshold(threshold));\n\t}\n\n\tasync _updateAudioDevices()\n\t{\n\t\tlogger.debug('_updateAudioDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audioinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioDevices(this._audioDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateWebcams()\n\t{\n\t\tlogger.debug('_updateWebcams()');\n\n\t\t// Reset the list.\n\t\tthis._webcams = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateWebcams() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'videoinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._webcams[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setWebcamDevices(this._webcams));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateWebcams() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getAudioDeviceId()\n\t{\n\t\tlogger.debug('_getAudioDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getAudioDeviceId() | calling _updateAudioDeviceId()');\n\n\t\t\tawait this._updateAudioDevices();\n\n\t\t\tconst { selectedAudioDevice } = store.getState().settings;\n\n\t\t\tif (selectedAudioDevice && this._audioDevices[selectedAudioDevice])\n\t\t\t\treturn selectedAudioDevice;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst audioDevices = Object.values(this._audioDevices);\n\n\t\t\t\treturn audioDevices[0] ? audioDevices[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getAudioDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getWebcamDeviceId()\n\t{\n\t\tlogger.debug('_getWebcamDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getWebcamDeviceId() | calling _updateWebcams()');\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tconst { selectedWebcam } = store.getState().settings;\n\n\t\t\tif (selectedWebcam && this._webcams[selectedWebcam])\n\t\t\t\treturn selectedWebcam;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst webcams = Object.values(this._webcams);\n\n\t\t\t\treturn webcams[0] ? webcams[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getWebcamDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateAudioOutputDevices()\n\t{\n\t\tlogger.debug('_updateAudioOutputDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioOutputDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioOutputDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audiooutput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioOutputDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioOutputDevices(this._audioOutputDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioOutputDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n}\n","import randomString from 'random-string';\nimport * as notificationActions from './notificationActions';\n\n// This returns a redux-thunk action (a function).\nexport const notify = ({ type = 'info', text, timeout }) =>\n{\n\tif (!timeout)\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'info':\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\ttimeout = 5000;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst notification =\n\t{\n\t\tid      : randomString({ length: 6 }).toLowerCase(),\n\t\ttype    : type,\n\t\ttext    : text,\n\t\ttimeout : timeout\n\t};\n\n\treturn (dispatch) =>\n\t{\n\t\tdispatch(notificationActions.addNotification(notification));\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tdispatch(notificationActions.removeNotification(notification.id));\n\t\t}, timeout);\n\t};\n};\n","export const addPeer = (peer) =>\n\t({\n\t\ttype    : 'ADD_PEER',\n\t\tpayload : { peer }\n\t});\n\nexport const removePeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const clearPeers = () =>\n\t({\n\t\ttype : 'CLEAR_PEERS'\n\t});\n\nexport const setPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerAudioInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerScreenInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_SCREEN_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerRaisedHand = (peerId, raisedHand, raisedHandTimestamp) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND',\n\t\tpayload : { peerId, raisedHand, raisedHandTimestamp }\n\t});\n\nexport const setPeerRaisedHandInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerPicture = (peerId, picture) =>\n\t({\n\t\ttype    : 'SET_PEER_PICTURE',\n\t\tpayload : { peerId, picture }\n\t});\n\nexport const addPeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'ADD_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const removePeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'REMOVE_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const setPeerKickInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_KICK_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setMutePeerInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerScreenSharingInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n","export const setPeerVolume = (peerId, volume) =>\n\t({\n\t\ttype    : 'SET_PEER_VOLUME',\n\t\tpayload : { peerId, volume }\n\t});\n","export const addUserMessage = (text) =>\n\t({\n\t\ttype    : 'ADD_NEW_USER_MESSAGE',\n\t\tpayload : { text }\n\t});\n\nexport const addResponseMessage = (message) =>\n\t({\n\t\ttype    : 'ADD_NEW_RESPONSE_MESSAGE',\n\t\tpayload : { message }\n\t});\n\nexport const addChatHistory = (chatHistory) =>\n\t({\n\t\ttype    : 'ADD_CHAT_HISTORY',\n\t\tpayload : { chatHistory }\n\t});\n\nexport const clearChat = () =>\n\t({\n\t\ttype : 'CLEAR_CHAT'\n\t});","export const addFile = (peerId, magnetUri) =>\n\t({\n\t\ttype    : 'ADD_FILE',\n\t\tpayload : { peerId, magnetUri }\n\t});\n\nexport const addFileHistory = (fileHistory) =>\n\t({\n\t\ttype    : 'ADD_FILE_HISTORY',\n\t\tpayload : { fileHistory }\n\t});\n\nexport const setFileActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_ACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileInActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_INACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileProgress = (magnetUri, progress) =>\n\t({\n\t\ttype    : 'SET_FILE_PROGRESS',\n\t\tpayload : { magnetUri, progress }\n\t});\n\nexport const setFileDone = (magnetUri, sharedFiles) =>\n\t({\n\t\ttype    : 'SET_FILE_DONE',\n\t\tpayload : { magnetUri, sharedFiles }\n\t});\n\nexport const clearFiles = () =>\n\t({\n\t\ttype : 'CLEAR_FILES'\n\t});","export const addLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'ADD_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const removeLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setLobbyPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setLobbyPeerPicture = (picture, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PICTURE',\n\t\tpayload : { picture, peerId }\n\t});\n\nexport const setLobbyPeerPromotionInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});","export const addConsumer = (consumer, peerId) =>\n\t({\n\t\ttype    : 'ADD_CONSUMER',\n\t\tpayload : { consumer, peerId }\n\t});\n\nexport const removeConsumer = (consumerId, peerId) =>\n\t({\n\t\ttype    : 'REMOVE_CONSUMER',\n\t\tpayload : { consumerId, peerId }\n\t});\n\nexport const clearConsumers = () =>\n\t({\n\t\ttype : 'CLEAR_CONSUMERS'\n\t});\n\nexport const setConsumerPaused = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PAUSED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerResumed = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_RESUMED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerCurrentLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_CURRENT_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPreferredLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PREFERRED_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPriority = (consumerId, priority) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PRIORITY',\n\t\tpayload : { consumerId, priority }\n\t});\n\nexport const setConsumerTrack = (consumerId, track) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_TRACK',\n\t\tpayload : { consumerId, track }\n\t});\n\nexport const setConsumerScore = (consumerId, score) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_SCORE',\n\t\tpayload : { consumerId, score }\n\t});","export const addProducer = (producer) =>\n\t({\n\t\ttype    : 'ADD_PRODUCER',\n\t\tpayload : { producer }\n\t});\n\nexport const removeProducer = (producerId) =>\n\t({\n\t\ttype    : 'REMOVE_PRODUCER',\n\t\tpayload : { producerId }\n\t});\n\nexport const setProducerPaused = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_PAUSED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerResumed = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_RESUMED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerTrack = (producerId, track) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_TRACK',\n\t\tpayload : { producerId, track }\n\t});\n\nexport const setProducerScore = (producerId, score) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_SCORE',\n\t\tpayload : { producerId, score }\n\t});","export const addTransportStats = (transport, type) =>\n\t({\n\t\ttype    : 'ADD_TRANSPORT_STATS',\n\t\tpayload : { transport, type }\n\t});","import React from 'react';\n\nconst RoomContext = React.createContext();\n\nexport default RoomContext;\n\nexport function withRoomContext(Component)\n{\n\treturn (props) => ( // eslint-disable-line react/display-name\n\t\t<RoomContext.Consumer>\n\t\t\t{(roomClient) => <Component {...props} roomClient={roomClient} />}\n\t\t</RoomContext.Consumer>\n\t);\n}","import React from 'react';\n\nexport const ReactLazyPreload = (importStatement) =>\n{\n\tconst Component = React.lazy(importStatement);\n\n\tComponent.preload = importStatement;\n\n\treturn Component;\n};","import bowser from 'bowser';\n\nwindow.BB = bowser;\n\nexport default function()\n{\n\tconst ua = navigator.userAgent;\n\tconst browser = bowser.getParser(ua);\n\n\tlet flag;\n\n\tif (browser.satisfies({ chrome: '>=0', chromium: '>=0' }))\n\t\tflag = 'chrome';\n\telse if (browser.satisfies({ firefox: '>=0' }))\n\t\tflag = 'firefox';\n\telse if (browser.satisfies({ safari: '>=0' }))\n\t\tflag = 'safari';\n\telse if (browser.satisfies({ opera: '>=0' }))\n\t\tflag = 'opera';\n\telse if (browser.satisfies({ 'microsoft edge': '>=0' }))\n\t\tflag = 'edge';\n\telse\n\t\tflag = 'unknown';\n\n\treturn {\n\t\tflag,\n\t\tos       : browser.getOSName(true), // ios, android, linux...\n\t\tplatform : browser.getPlatformType(true), // mobile, desktop, tablet\n\t\tname     : browser.getBrowserName(true),\n\t\tversion  : browser.getBrowserVersion(),\n\t\tbowser   : browser\n\t};\n}\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebAssetIcon from '@material-ui/icons/WebAsset';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Hidden from '@material-ui/core/Hidden';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '40vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t\t// display       : 'flex',\n\t\t\t// flexDirection : 'column'\n\t\t},\n\t\tlist : {\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\terrorAvatar : {\n\t\t\twidth  : theme.spacing(20),\n\t\t\theight : theme.spacing(20)\n\t\t}\n\t});\n\nlet dense = false;\n\nconst supportedBrowsers=[\n\t{ name: 'Chrome/Chromium', version: '74', vendor: 'Google' },\n\t{ name: 'Edge', version: '18', vendor: 'Microsoft' },\n\t{ name: 'Firefox', version: '60', vendor: 'Mozilla' },\n\t{ name: 'Safari', version: '12', vendor: 'Apple' },\n\t{ name: 'Opera', version: '62', vendor: '' },\n\t//\t{ name: 'Brave', version: '1.5', vendor: '' },\n\t//  { name: 'Vivaldi', version: '3', vendor: '' },\n\t{ name: 'Samsung Internet', version: '11.1.1.52', vendor: '' }\n];\n\nconst UnsupportedBrowser = ({\n\tplatform,\n\twebrtcUnavailable,\n\tclasses\n}) =>\n{\n\tif (platform !== 'desktop')\n\t\tdense = true;\n\n\treturn (\n\t\t<Dialog\n\t\t\topen\n\t\t\tscroll={'body'}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t{!webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titleUnsupportedBrowser'\n\t\t\t\t\tdefaultMessage='Browser not supported'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titlewebrtcUnavailable'\n\t\t\t\t\tdefaultMessage='Required functionality not availble in your browser'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.bodyText'\n\t\t\t\t\tdefaultMessage='This meeting service requires\n\t\t\t\t\t\tfunctionality not supported by your browser.\n\t\t\t\t\t\tPlease upgrade, switch to a different browser, or\n\t\t\t\t\t\tcheck your settings. Supported browsers:'\n\t\t\t\t/>\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\n\t\t\t\t\t<Grid item xs={12} md={7}>\n\n\t\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t\t<List dense={dense}>\n\t\t\t\t\t\t\t\t{supportedBrowsers.map((browser, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst supportedBrowser = `${browser.vendor} ${browser.name}`;\n\t\t\t\t\t\t\t\t\tconst supportedVersion = `${browser.version}+`;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WebAssetIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={supportedBrowser}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={supportedVersion}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} md={5} align='center'>\n\t\t\t\t\t\t<Hidden mdDown>\n\t\t\t\t\t\t\t<ErrorIcon className={classes.errorAvatar} color='error'/>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nUnsupportedBrowser.propTypes =\n{\n\twebrtcUnavailable : PropTypes.bool.isRequired,\n\tplatform          : PropTypes.string.isRequired,\n\tclasses           : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(UnsupportedBrowser);\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport randomString from 'random-string';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport CookieConsent from 'react-cookie-consent';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdialogTitle :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tpadding                        : theme.spacing(2),\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay       : 'block',\n\t\t\tpaddingBottom : '1vh'\n\t\t},\n\t\tloginButton :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\tright    : theme.spacing(2),\n\t\t\ttop      : theme.spacing(2),\n\t\t\tpadding  : 0\n\t\t},\n\t\tlargeIcon :\n\t\t{\n\t\t\tfontSize : '2em'\n\t\t},\n\t\tlargeAvatar :\n\t\t{\n\t\t\twidth  : 50,\n\t\t\theight : 50\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst DialogTitle = withStyles(styles)((props) =>\n{\n\tconst { children, classes, ...other } = props;\n\n\treturn (\n\t\t<MuiDialogTitle disableTypography className={classes.dialogTitle} {...other}>\n\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t<Typography variant='h5'>{children}</Typography>\n\t\t</MuiDialogTitle>\n\t);\n});\n\nconst DialogContent = withStyles((theme) => ({\n\troot :\n\t{\n\t\tpadding : theme.spacing(2)\n\t}\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogActions);\n\nconst ChooseRoom = ({\n\tclasses\n}) =>\n{\n\tconst [ roomId, setRoomId ] =\n\t\tuseState(randomString({ length: 8 }).toLowerCase());\n\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog\n\t\t\t\topen\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper : classes.dialogPaper\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DialogTitle>\n\t\t\t\t\t{ window.config.title ? window.config.title : 'New edutech' }\n\t\t\t\t\t<hr />\n\t\t\t\t</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.chooseRoom'\n\t\t\t\t\t\t\tdefaultMessage='Choose the name of the room you would like to join'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid='roomId'\n\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.roomName',\n\t\t\t\t\t\t\tdefaultMessage : 'Room name'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tvalue={roomId}\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst { value } = event.target;\n\n\t\t\t\t\t\t\tsetRoomId(value.toLowerCase());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (roomId === '')\n\t\t\t\t\t\t\t\tsetRoomId(randomString({ length: 8 }).toLowerCase());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t</DialogContent>\n\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\tto={roomId}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.chooseRoomButton'\n\t\t\t\t\t\t\tdefaultMessage='Continue'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent buttonText={intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.consentUnderstand',\n\t\t\t\t\t\tdefaultMessage : 'I understand'\n\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nChooseRoom.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(ChooseRoom);\n","const isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\twindow.location.hostname === '[::1]' ||\n\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config)\n{\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator)\n\t{\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\n\t\tif (publicUrl.origin !== window.location.origin)\n\t\t\treturn;\n\n\t\twindow.addEventListener('load', () =>\n\t\t{\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost)\n\t\t\t{\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\tnavigator.serviceWorker.ready.then(() =>\n\t\t\t\t{});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config)\n{\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) =>\n\t\t{\n\t\t\tregistration.onupdatefound = () =>\n\t\t\t{\n\t\t\t\tconst installingWorker = registration.installing;\n\n\t\t\t\tif (installingWorker == null)\n\t\t\t\t\treturn;\n\n\t\t\t\tinstallingWorker.onstatechange = () =>\n\t\t\t\t{\n\t\t\t\t\tif (installingWorker.state === 'installed')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (navigator.serviceWorker.controller)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config && config.onUpdate)\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (config && config.onSuccess)\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nfunction checkValidServiceWorker(swUrl, config)\n{\n\tfetch(swUrl)\n\t\t.then((response) =>\n\t\t{\n\t\t\tconst contentType = response.headers.get('content-type');\n\n\t\t\tif (response.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1))\n\t\t\t{\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t\t\t{\n\t\t\t\t\tregistration.unregister().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nexport function unregister()\n{\n\tif ('serviceWorker' in navigator)\n\t{\n\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t{\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import domready from 'domready';\nimport React, { Suspense } from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport isElectron from 'is-electron';\nimport { createIntl, createIntlCache, RawIntlProvider } from 'react-intl';\nimport { Route, HashRouter, BrowserRouter } from 'react-router-dom';\nimport randomString from 'random-string';\nimport Logger from './Logger';\nimport debug from 'debug';\nimport RoomClient from './RoomClient';\nimport RoomContext from './RoomContext';\nimport deviceInfo from './deviceInfo';\nimport * as meActions from './actions/meActions';\nimport UnsupportedBrowser from './components/UnsupportedBrowser';\nimport ChooseRoom from './components/ChooseRoom';\nimport LoadingView from './components/LoadingView';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { PersistGate } from 'redux-persist/lib/integration/react';\nimport { persistor, store } from './store';\nimport { SnackbarProvider } from 'notistack';\nimport * as serviceWorker from './serviceWorker';\nimport { ReactLazyPreload } from './components/ReactLazyPreload';\nimport { detectDevice } from 'mediasoup-client';\n// import messagesEnglish from './translations/en';\nimport messagesNorwegian from './translations/nb';\nimport messagesGerman from './translations/de';\nimport messagesHungarian from './translations/hu';\nimport messagesPolish from './translations/pl';\nimport messagesDanish from './translations/dk';\nimport messagesFrench from './translations/fr';\nimport messagesGreek from './translations/el';\nimport messagesRomanian from './translations/ro';\nimport messagesPortuguese from './translations/pt';\nimport messagesChineseSimplified from './translations/cn';\nimport messagesChineseTraditional from './translations/tw';\nimport messagesSpanish from './translations/es';\nimport messagesCroatian from './translations/hr';\nimport messagesCzech from './translations/cs';\nimport messagesItalian from './translations/it';\nimport messagesUkrainian from './translations/uk';\nimport messagesTurkish from './translations/tr';\nimport messagesLatvian from './translations/lv';\nimport messagesRussian from './translations/ru';\nimport messagesKazakh from './translations/kk';\n\nimport './index.css';\n\nconst App = ReactLazyPreload(() => import(/* webpackChunkName: \"app\" */ './components/App'));\n\nconst cache = createIntlCache();\n\nconst messages =\n{\n\t// 'en' : messagesEnglish,\n\t'nb'      : messagesNorwegian,\n\t'de'      : messagesGerman,\n\t'hu'      : messagesHungarian,\n\t'pl'      : messagesPolish,\n\t'dk'      : messagesDanish,\n\t'fr'      : messagesFrench,\n\t'el'      : messagesGreek,\n\t'ro'      : messagesRomanian,\n\t'pt'      : messagesPortuguese,\n\t'zh-hans' : messagesChineseSimplified,\n\t'zh-hant' : messagesChineseTraditional,\n\t'es'      : messagesSpanish,\n\t'hr'      : messagesCroatian,\n\t'cs'      : messagesCzech,\n\t'it'      : messagesItalian,\n\t'uk'      : messagesUkrainian,\n\t'tr'      : messagesTurkish,\n\t'lv'      : messagesLatvian,\n\t'ru'      : messagesRussian,\n\t'kk'      : messagesKazakh\n};\n\nconst supportedBrowsers={\n\t'windows' : {\n\t\t'internet explorer' : '>12',\n\t\t'microsoft edge'    : '>18'\n\t},\n\t'safari'                       : '>12',\n\t'firefox'                      : '>=60',\n\t'chrome'                       : '>=74',\n\t'chromium'                     : '>=74',\n\t'opera'                        : '>=62',\n\t'samsung internet for android' : '>=11.1.1.52'\n};\n\nconst browserLanguage = (navigator.language || navigator.browserLanguage).toLowerCase();\n\nlet locale = browserLanguage.split(/[-_]/)[0]; // language without region code\n\nif (locale === 'zh')\n{\n\tif (browserLanguage === 'zh-cn')\n\t\tlocale = 'zh-hans';\n\telse\n\t\tlocale = 'zh-hant';\n}\n\nconst intl = createIntl({\n\tlocale,\n\tmessages : messages[locale]\n}, cache);\n\ndocument.documentElement.lang = locale;\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tdebug.enable('* -engine* -socket* -RIE* *WARN* *ERROR*');\n}\n\nconst logger = new Logger();\n\nlet roomClient;\n\nRoomClient.init({ store, intl });\n\nconst theme = createMuiTheme(window.config.theme);\n\nlet Router;\n\nif (isElectron())\n\tRouter = HashRouter;\nelse\n\tRouter = BrowserRouter;\n\ndomready(() =>\n{\n\tlogger.debug('DOM ready');\n\n\trun();\n});\n\nfunction run()\n{\n\tlogger.debug('run() [environment:%s]', process.env.NODE_ENV);\n\n\tconst peerId = randomString({ length: 8 }).toLowerCase();\n\tconst urlParser = new URL(window.location);\n\tconst parameters = urlParser.searchParams;\n\n\tconst accessCode = parameters.get('code');\n\tconst produce = parameters.get('produce') !== 'false';\n\tconst forceTcp = parameters.get('forceTcp') === 'true';\n\tconst displayName = parameters.get('displayName');\n\tconst muted = parameters.get('muted') === 'true';\n\n\tconst { pathname } = window.location;\n\n\tlet basePath = pathname.substring(0, pathname.lastIndexOf('/'));\n\n\tif (!basePath)\n\t\tbasePath = '/';\n\n\t// Get current device.\n\tconst device = deviceInfo();\n\n\tlet unsupportedBrowser = false;\n\n\tlet webrtcUnavailable = false;\n\n\tif (detectDevice() === undefined)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n\t\tunsupportedBrowser = true;\n\t}\n\telse if (\n\t\tnavigator.mediaDevices === undefined ||\n\t\tnavigator.mediaDevices.getUserMedia === undefined ||\n\t\twindow.RTCPeerConnection === undefined\n\t)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n\t\twebrtcUnavailable = true;\n\t}\n\telse if (\n\t\t!device.bowser.satisfies(\n\t\t\twindow.config.supportedBrowsers || supportedBrowsers\n\t\t)\n\t)\n\t{\n\t\tlogger.error(\n\t\t\t'Your browser is not supported [deviceInfo:\"%o\"]',\n\t\t\tdevice\n\t\t);\n\n\t\tunsupportedBrowser = true;\n\t}\n\telse\n\t{\n\t\tlogger.debug('Your browser is supported [deviceInfo:\"%o\"]', device);\n\t}\n\n\tif (unsupportedBrowser || webrtcUnavailable)\n\t{\n\t\trender(\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<RawIntlProvider value={intl}>\n\t\t\t\t\t<UnsupportedBrowser\n\t\t\t\t\t\twebrtcUnavailable={webrtcUnavailable}\n\t\t\t\t\t\tplatform={device.platform}\n\t\t\t\t\t/>\n\t\t\t\t</RawIntlProvider>\n\t\t\t</MuiThemeProvider>,\n\t\t\tdocument.getElementById('new-edutech')\n\t\t);\n\n\t\treturn;\n\t}\n\n\tstore.dispatch(\n\t\tmeActions.setMe({\n\t\t\tpeerId,\n\t\t\tloginEnabled : window.config.loginEnabled\n\t\t})\n\t);\n\n\troomClient = new RoomClient(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t});\n\n\tglobal.CLIENT = roomClient;\n\n\trender(\n\t\t<Provider store={store}>\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<RawIntlProvider value={intl}>\n\t\t\t\t\t<PersistGate loading={<LoadingView />} persistor={persistor}>\n\t\t\t\t\t\t<RoomContext.Provider value={roomClient}>\n\t\t\t\t\t\t\t<SnackbarProvider>\n\t\t\t\t\t\t\t\t<Router basename={basePath}>\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<LoadingView />}>\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<Route exact path='/' component={ChooseRoom} />\n\t\t\t\t\t\t\t\t\t\t\t<Route path='/:id' component={App} />\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t</Router>\n\t\t\t\t\t\t\t</SnackbarProvider>\n\t\t\t\t\t\t</RoomContext.Provider>\n\t\t\t\t\t</PersistGate>\n\t\t\t\t</RawIntlProvider>\n\t\t\t</MuiThemeProvider>\n\t\t</Provider>,\n\t\tdocument.getElementById('new-edutech')\n\t);\n}\n\nserviceWorker.unregister();\n","export const setSelectedAudioDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedAudioOutputDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_OUTPUT_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedWebcamDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_WEBCAM',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setVideoResolution = (resolution) =>\n\t({\n\t\ttype    : 'SET_VIDEO_RESOLUTION',\n\t\tpayload : { resolution }\n\t});\n\nexport const setVideoFrameRate = (frameRate) =>\n\t({\n\t\ttype    : 'SET_VIDEO_FRAME_RATE',\n\t\tpayload : { frameRate }\n\t});\n\nexport const setScreenSharingResolution = (screenSharingResolution) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_RESOLUTION',\n\t\tpayload : { screenSharingResolution }\n\t});\n\nexport const setScreenSharingFrameRate = (screenSharingFrameRate) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_FRAME_RATE',\n\t\tpayload : { screenSharingFrameRate }\n\t});\n\nexport const setDisplayName = (displayName) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME',\n\t\tpayload : { displayName }\n\t});\n\nexport const toggleAdvancedMode = () =>\n\t({\n\t\ttype : 'TOGGLE_ADVANCED_MODE'\n\t});\n\nexport const togglePermanentTopBar = () =>\n\t({\n\t\ttype : 'TOGGLE_PERMANENT_TOPBAR'\n\t});\n\nexport const toggleButtonControlBar = () =>\n\t({\n\t\ttype : 'TOGGLE_BUTTON_CONTROL_BAR'\n\t});\n\nexport const toggleDrawerOverlayed = () =>\n\t({\n\t\ttype : 'TOGGLE_DRAWER_OVERLAYED'\n\t});\n\nexport const toggleShowNotifications = () =>\n\t({\n\t\ttype : 'TOGGLE_SHOW_NOTIFICATIONS'\n\t});\n\nexport const setEchoCancellation = (echoCancellation) =>\n\t({\n\t\ttype    : 'SET_ECHO_CANCELLATION',\n\t\tpayload : { echoCancellation }\n\t});\n\nexport const setAutoGainControl = (autoGainControl) =>\n\t({\n\t\ttype    : 'SET_AUTO_GAIN_CONTROL',\n\t\tpayload : { autoGainControl }\n\t});\n\nexport const setNoiseSuppression = (noiseSuppression) =>\n\t({\n\t\ttype    : 'SET_NOISE_SUPPRESSION',\n\t\tpayload : { noiseSuppression }\n\t});\n\nexport const setVoiceActivatedUnmute = (voiceActivatedUnmute) =>\n\t({\n\t\ttype    : 'SET_VOICE_ACTIVATED_UNMUTE',\n\t\tpayload : { voiceActivatedUnmute }\n\t});\n\nexport const setNoiseThreshold = (noiseThreshold) =>\n\t({\n\t\ttype    : 'SET_NOISE_THRESHOLD',\n\t\tpayload : { noiseThreshold }\n\t});\n\nexport const setDefaultAudio = (audio) =>\n\t({\n\t\ttype    : 'SET_DEFAULT_AUDIO',\n\t\tpayload : { audio }\n\t});\n\nexport const toggleHiddenControls = () =>\n\t({\n\t\ttype : 'TOGGLE_HIDDEN_CONTROLS'\n\t});\n\nexport const toggleNotificationSounds = () =>\n\t({\n\t\ttype : 'TOGGLE_NOTIFICATION_SOUNDS'\n\t});\n\nexport const setLastN = (lastN) =>\n\t({\n\t\ttype    : 'SET_LAST_N',\n\t\tpayload : { lastN }\n\t});","export const addNotification = (notification) =>\n\t({\n\t\ttype    : 'ADD_NOTIFICATION',\n\t\tpayload : { notification }\n\t});\n\nexport const removeNotification = (notificationId) =>\n\t({\n\t\ttype    : 'REMOVE_NOTIFICATION',\n\t\tpayload : { notificationId }\n\t});\n\nexport const removeAllNotifications = () =>\n\t({\n\t\ttype : 'REMOVE_ALL_NOTIFICATIONS'\n\t});","const initialState =\n{\n\tname                          : '',\n\t// new/connecting/connected/disconnected/closed,\n\tstate                         : 'new',\n\tlocked                        : false,\n\tinLobby                       : false,\n\tsignInRequired                : false,\n\toverRoomLimit                 : false,\n\t// access code to the room if locked and joinByAccessCode == true\n\taccessCode                    : '',\n\t// if true: accessCode is a possibility to open the room\n\tjoinByAccessCode              : true,\n\tactiveSpeakerId               : null,\n\ttorrentSupport                : false,\n\tshowSettings                  : false,\n\tfullScreenConsumer            : null, // ConsumerID\n\twindowConsumer                : null, // ConsumerID\n\ttoolbarsVisible               : true,\n\tmode                          : window.config.defaultLayout || 'democratic',\n\tselectedPeerId                : null,\n\tspotlights                    : [],\n\tsettingsOpen                  : false,\n\textraVideoOpen                : false,\n\thelpOpen                      : false,\n\taboutOpen                     : false,\n\tcurrentSettingsTab            : 'media', // media, appearence, advanced\n\tlockDialogOpen                : false,\n\tjoined                        : false,\n\tmuteAllInProgress             : false,\n\tlobbyPeersPromotionInProgress : false,\n\tstopAllVideoInProgress        : false,\n\tcloseMeetingInProgress        : false,\n\tclearChatInProgress           : false,\n\tclearFileSharingInProgress    : false,\n\troomPermissions               : null,\n\tallowWhenRoleMissing          : null\n};\n\nconst room = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ROOM_NAME':\n\t\t{\n\t\t\tconst { name } = action.payload;\n\n\t\t\treturn { ...state, name };\n\t\t}\n\n\t\tcase 'SET_ROOM_STATE':\n\t\t{\n\t\t\tconst roomState = action.payload.state;\n\n\t\t\tif (roomState === 'connected')\n\t\t\t\treturn { ...state, state: roomState };\n\t\t\telse\n\t\t\t\treturn { ...state, state: roomState, activeSpeakerId: null };\n\t\t}\n\n\t\tcase 'SET_ROOM_LOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: true };\n\t\t}\n\n\t\tcase 'SET_ROOM_UNLOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: false };\n\t\t}\n\n\t\tcase 'SET_IN_LOBBY':\n\t\t{\n\t\t\tconst { inLobby } = action.payload;\n\n\t\t\treturn { ...state, inLobby };\n\t\t}\n\n\t\tcase 'SET_SIGN_IN_REQUIRED':\n\t\t{\n\t\t\tconst { signInRequired } = action.payload;\n\n\t\t\treturn { ...state, signInRequired };\n\t\t}\n\t\tcase 'SET_OVER_ROOM_LIMIT':\n\t\t{\n\t\t\tconst { overRoomLimit } = action.payload;\n\n\t\t\treturn { ...state, overRoomLimit };\n\t\t}\n\t\tcase 'SET_ACCESS_CODE':\n\t\t{\n\t\t\tconst { accessCode } = action.payload;\n\n\t\t\treturn { ...state, accessCode };\n\t\t}\n\n\t\tcase 'SET_JOIN_BY_ACCESS_CODE':\n\t\t{\n\t\t\tconst { joinByAccessCode } = action.payload;\n\n\t\t\treturn { ...state, joinByAccessCode };\n\t\t}\n\n\t\tcase 'SET_LOCK_DIALOG_OPEN':\n\t\t{\n\t\t\tconst { lockDialogOpen } = action.payload;\n\n\t\t\treturn { ...state, lockDialogOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_OPEN':\n\t\t{\n\t\t\tconst { settingsOpen } = action.payload;\n\n\t\t\treturn { ...state, settingsOpen };\n\t\t}\n\n\t\tcase 'SET_EXTRA_VIDEO_OPEN':\n\t\t{\n\t\t\tconst { extraVideoOpen } = action.payload;\n\n\t\t\treturn { ...state, extraVideoOpen };\n\t\t}\n\n\t\tcase 'SET_HELP_OPEN':\n\t\t{\n\t\t\tconst { helpOpen } = action.payload;\n\n\t\t\treturn { ...state, helpOpen };\n\t\t}\n\n\t\tcase 'SET_ABOUT_OPEN':\n\t\t{\n\t\t\tconst { aboutOpen } = action.payload;\n\n\t\t\treturn { ...state, aboutOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_TAB':\n\t\t{\n\t\t\tconst { tab } = action.payload;\n\n\t\t\treturn { ...state, currentSettingsTab: tab };\n\t\t}\n\n\t\tcase 'SET_ROOM_ACTIVE_SPEAKER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\treturn { ...state, activeSpeakerId: peerId };\n\t\t}\n\n\t\tcase 'FILE_SHARING_SUPPORTED':\n\t\t{\n\t\t\tconst { supported } = action.payload;\n\n\t\t\treturn { ...state, torrentSupport: supported };\n\t\t}\n\n\t\tcase 'TOGGLE_JOINED':\n\t\t{\n\t\t\tconst joined = true;\n\n\t\t\treturn { ...state, joined };\n\t\t}\n\n\t\tcase 'TOGGLE_FULLSCREEN_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.fullScreenConsumer;\n\n\t\t\treturn { ...state, fullScreenConsumer: currentConsumer ? null : consumerId };\n\t\t}\n\n\t\tcase 'TOGGLE_WINDOW_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.windowConsumer;\n\n\t\t\tif (currentConsumer === consumerId)\n\t\t\t\treturn { ...state, windowConsumer: null };\n\t\t\telse\n\t\t\t\treturn { ...state, windowConsumer: consumerId };\n\t\t}\n\n\t\tcase 'SET_TOOLBARS_VISIBLE':\n\t\t{\n\t\t\tconst { toolbarsVisible } = action.payload;\n\n\t\t\treturn { ...state, toolbarsVisible };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_MODE':\n\t\t\treturn { ...state, mode: action.payload.mode };\n\n\t\tcase 'SET_SELECTED_PEER':\n\t\t{\n\t\t\tconst { selectedPeerId } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\n\t\t\t\tselectedPeerId : state.selectedPeerId === selectedPeerId ?\n\t\t\t\t\tnull : selectedPeerId\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_SPOTLIGHTS':\n\t\t{\n\t\t\tconst { spotlights } = action.payload;\n\n\t\t\treturn { ...state, spotlights };\n\t\t}\n\n\t\tcase 'CLEAR_SPOTLIGHTS':\n\t\t{\n\t\t\treturn { ...state, spotlights: [] };\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, lobbyPeersPromotionInProgress: action.payload.flag };\n\n\t\tcase 'MUTE_ALL_IN_PROGRESS':\n\t\t\treturn { ...state, muteAllInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllVideoInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllScreenSharingInProgress: action.payload.flag };\n\n\t\tcase 'CLOSE_MEETING_IN_PROGRESS':\n\t\t\treturn { ...state, closeMeetingInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_CHAT_IN_PROGRESS':\n\t\t\treturn { ...state, clearChatInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_FILE_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, clearFileSharingInProgress: action.payload.flag };\n\n\t\tcase 'SET_ROOM_PERMISSIONS':\n\t\t{\n\t\t\tconst { roomPermissions } = action.payload;\n\n\t\t\treturn { ...state, roomPermissions };\n\t\t}\n\n\t\tcase 'SET_ALLOW_WHEN_ROLE_MISSING':\n\t\t{\n\t\t\tconst { allowWhenRoleMissing } = action.payload;\n\n\t\t\treturn { ...state, allowWhenRoleMissing };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default room;\n","const initialState =\n{\n\tid                    : null,\n\tpicture               : null,\n\tbrowser               : null,\n\troles                 : [ 'normal' ], // Default role\n\tcanSendMic            : false,\n\tcanSendWebcam         : false,\n\tcanShareScreen        : false,\n\tcanShareFiles         : false,\n\taudioDevices          : null,\n\twebcamDevices         : null,\n\twebcamInProgress      : false,\n\taudioInProgress       : false,\n\tscreenShareInProgress : false,\n\tdisplayNameInProgress : false,\n\tloginEnabled          : false,\n\traisedHand            : false,\n\traisedHandInProgress  : false,\n\tloggedIn              : false,\n\tisSpeaking            : false,\n\tisAutoMuted           : true\n};\n\nconst me = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId,\n\t\t\t\tloginEnabled\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tid : peerId,\n\t\t\t\tloginEnabled\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_BROWSER':\n\t\t{\n\t\t\tconst { browser } = action.payload;\n\n\t\t\treturn { ...state, browser };\n\t\t}\n\n\t\tcase 'LOGGED_IN':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, loggedIn: flag };\n\t\t}\n\n\t\tcase 'ADD_ROLE':\n\t\t{\n\t\t\tif (state.roles.includes(action.payload.role))\n\t\t\t\treturn state;\n\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'SET_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\n\t\tcase 'SET_MEDIA_CAPABILITIES':\n\t\t{\n\t\t\tconst {\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_AUDIO_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_OUTPUT_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioOutputDevices: devices };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, webcamDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, audioInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, webcamInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARE_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, screenShareInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHand: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHandInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, displayNameInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_IS_SPEAKING':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isSpeaking: flag };\n\t\t}\n\n\t\tcase 'SET_AUTO_MUTED':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isAutoMuted: flag };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default me;\n","const initialState = {};\n\nconst producers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PRODUCER':\n\t\t{\n\t\t\tconst { producer } = action.payload;\n\n\t\t\treturn { ...state, [producer.id]: producer };\n\t\t}\n\n\t\tcase 'REMOVE_PRODUCER':\n\t\t{\n\t\t\tconst { producerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[producerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PRODUCER_PAUSED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_RESUMED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_TRACK':\n\t\t{\n\t\t\tconst { producerId, track } = action.payload;\n\t\t\tconst producer = state[producerId];\n\t\t\tconst newProducer = { ...producer, track };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_SCORE':\n\t\t{\n\t\t\tconst { producerId, score } = action.payload;\n\n\t\t\tconst producer = state[producerId];\n\n\t\t\tconst newProducer = { ...producer, score };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default producers;\n","const initialState = {};\n\nconst peer = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t\treturn action.payload.peer;\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, peerVideoInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn { ...state, peerAudioInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\t\treturn { ...state, peerScreenInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\t\treturn { ...state, peerKickInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHand          : action.payload.raisedHand,\n\t\t\t\traisedHandTimestamp : action.payload.raisedHandTimestamp\n\t\t\t};\n\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHandInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst consumers = [ ...state.consumers, action.payload.consumer.id ];\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst consumers = state.consumers.filter((consumer) =>\n\t\t\t\tconsumer !== action.payload.consumerId);\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'SET_PEER_PICTURE':\n\t\t{\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\t}\n\n\t\tcase 'ADD_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerAudioInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerVideoInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerScreenSharingInProgress : action.payload.flag\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst peers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peer.id]: peer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\tcase 'SET_PEER_PICTURE':\n\t\tcase 'ADD_CONSUMER':\n\t\tcase 'ADD_PEER_ROLE':\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldPeer)\n\t\t\t{\n\t\t\t\tthrow new Error('no Peer found');\n\t\t\t}\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\t// NOTE: This means that the Peer was closed before, so it's ok.\n\t\t\tif (!oldPeer)\n\t\t\t\treturn state;\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'CLEAR_PEERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peers;\n","const lobbyPeer = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t\treturn { id: action.payload.peerId };\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, promotionInProgress: action.payload.flag };\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst lobbyPeers = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peerId]: lobbyPeer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_LOBBY_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldLobbyPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldLobbyPeer)\n\t\t\t{\n\t\t\t\t// Tried to update non-existent lobbyPeer. Has probably been promoted, or left.\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, [oldLobbyPeer.id]: lobbyPeer(oldLobbyPeer, action) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default lobbyPeers;\n","const initialState = {};\n\nconst consumers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst { consumer } = action.payload;\n\n\t\t\treturn { ...state, [consumer.id]: consumer };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[consumerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PAUSED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_RESUMED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_CURRENT_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tcurrentSpatialLayer  : spatialLayer,\n\t\t\t\tcurrentTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PREFERRED_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tpreferredSpatialLayer  : spatialLayer,\n\t\t\t\tpreferredTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PRIORITY':\n\t\t{\n\t\t\tconst { consumerId, priority } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, priority };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_TRACK':\n\t\t{\n\t\t\tconst { consumerId, track } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, track };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_SCORE':\n\t\t{\n\t\t\tconst { consumerId, score } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tif (!consumer)\n\t\t\t\treturn state;\n\n\t\t\tconst newConsumer = { ...consumer, score };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'CLEAR_CONSUMERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default consumers;\n","const initialState = {};\n\nconst peerVolumes = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, [peerId]: -100 };\n\t\t}\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\tconst { peer } = action.payload;\n\n\t\t\treturn { ...state, [peer.id]: -100 };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_VOLUME':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst dBs = action.payload.volume < -100 ? -100 : action.payload.volume;\n\n\t\t\treturn { ...state, [peerId]: Math.round(dBs) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peerVolumes;\n","const notifications = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NOTIFICATION':\n\t\t{\n\t\t\tconst { notification } = action.payload;\n\n\t\t\treturn [ ...state, notification ];\n\t\t}\n\n\t\tcase 'REMOVE_NOTIFICATION':\n\t\t{\n\t\t\tconst { notificationId } = action.payload;\n\n\t\t\treturn state.filter((notification) => notification.id !== notificationId);\n\t\t}\n\n\t\tcase 'REMOVE_ALL_NOTIFICATIONS':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default notifications;\n","export function createNewMessage(text, sender, name, picture)\n{\n\treturn {\n\t\ttype : 'message',\n\t\ttext,\n\t\ttime : Date.now(),\n\t\tname,\n\t\tsender,\n\t\tpicture\n\t};\n}","import\n{\n\tcreateNewMessage\n} from './helper';\n\nconst chat = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NEW_USER_MESSAGE':\n\t\t{\n\t\t\tconst { text } = action.payload;\n\n\t\t\tconst message = createNewMessage(text, 'client', 'Me', undefined);\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tconst { message } = action.payload;\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_CHAT_HISTORY':\n\t\t{\n\t\t\tconst { chatHistory } = action.payload;\n\n\t\t\treturn [ ...state, ...chatHistory ];\n\t\t}\n\n\t\tcase 'CLEAR_CHAT':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default chat;\n","const initialState =\n{\n\ttoolAreaOpen   : false,\n\tcurrentToolTab : 'chat', // chat, settings, users\n\tunreadMessages : 0,\n\tunreadFiles    : 0\n};\n\nconst toolarea = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'TOGGLE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = !state.toolAreaOpen;\n\t\t\tconst unreadMessages = toolAreaOpen && state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolAreaOpen && state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'OPEN_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = true;\n\t\t\tconst unreadMessages = state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'CLOSE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = false;\n\n\t\t\treturn { ...state, toolAreaOpen };\n\t\t}\n\n\t\tcase 'SET_TOOL_TAB':\n\t\t{\n\t\t\tconst { toolTab } = action.payload;\n\t\t\tconst unreadMessages = toolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, currentToolTab: toolTab, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'chat')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadMessages: state.unreadMessages + 1 };\n\t\t}\n\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'files')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadFiles: state.unreadFiles + 1 };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default toolarea;\n","const files = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tconst { peerId, magnetUri } = action.payload;\n\n\t\t\tconst newFile = {\n\t\t\t\tactive    : false,\n\t\t\t\tprogress  : 0,\n\t\t\t\tfiles     : null,\n\t\t\t\tpeerId    : peerId,\n\t\t\t\tmagnetUri : magnetUri\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'ADD_FILE_HISTORY':\n\t\t{\n\t\t\tconst { fileHistory } = action.payload;\n\t\t\tconst newFileHistory = {};\n\n\t\t\t// eslint-disable-next-line\n\t\t\tfileHistory.map((file) =>\n\t\t\t{\n\t\t\t\tconst newFile =\n\t\t\t\t{\n\t\t\t\t\tactive   : false,\n\t\t\t\t\tprogress : 0,\n\t\t\t\t\tfiles    : null,\n\t\t\t\t\t...file\n\t\t\t\t};\n\n\t\t\t\tnewFileHistory[file.magnetUri] = newFile;\n\t\t\t});\n\n\t\t\treturn { ...state, ...newFileHistory };\n\t\t}\n\n\t\tcase 'SET_FILE_ACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: true };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_INACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: false };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_PROGRESS':\n\t\t{\n\t\t\tconst { magnetUri, progress } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, progress: progress };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_DONE':\n\t\t{\n\t\t\tconst { magnetUri, sharedFiles } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = {\n\t\t\t\t...file,\n\t\t\t\tfiles    : sharedFiles,\n\t\t\t\tprogress : 1,\n\t\t\t\tactive   : false,\n\t\t\t\ttimeout  : false\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'CLEAR_FILES':\n\t\t\treturn {};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default files;\n","const initialState =\n{\n\tdisplayName             : 'Guest',\n\tselectedWebcam          : null,\n\tselectedAudioDevice     : null,\n\tadvancedMode            : false,\n\tsampleRate              : 48000,\n\tchannelCount            : 1,\n\tvolume                  : 1.0,\n\tautoGainControl         : false,\n\techoCancellation        : true,\n\tnoiseSuppression        : true,\n\tvoiceActivatedUnmute    : false,\n\tnoiseThreshold          : -50,\n\tsampleSize              : 16,\n\t// low, medium, high, veryhigh, ultra\n\tresolution              : window.config.defaultResolution || 'medium',\n\tframeRate               : window.config.defaultFrameRate || 15,\n\tscreenSharingResolution : window.config.defaultScreenResolution || 'veryhigh',\n\tscreenSharingFrameRate  : window.config.defaultScreenSharingFrameRate || 5,\n\tlastN                   : 4,\n\tpermanentTopBar         : true,\n\thiddenControls          : false,\n\tshowNotifications       : true,\n\tnotificationSounds      : true,\n\tbuttonControlBar        : window.config.buttonControlBar || false,\n\tdrawerOverlayed         : window.config.drawerOverlayed || true,\n\t...window.config.defaultAudio\n};\n\nconst settings = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'CHANGE_WEBCAM':\n\t\t{\n\t\t\treturn { ...state, selectedWebcam: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_OUTPUT_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioOutputDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME':\n\t\t{\n\t\t\tconst { displayName } = action.payload;\n\n\t\t\treturn { ...state, displayName };\n\t\t}\n\n\t\tcase 'TOGGLE_ADVANCED_MODE':\n\t\t{\n\t\t\tconst advancedMode = !state.advancedMode;\n\n\t\t\treturn { ...state, advancedMode };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_RATE':\n\t\t{\n\t\t\tconst { sampleRate } = action.payload;\n\n\t\t\treturn { ...state, sampleRate };\n\t\t}\n\n\t\tcase 'SET_CHANNEL_COUNT':\n\t\t{\n\t\t\tconst { channelCount } = action.payload;\n\n\t\t\treturn { ...state, channelCount };\n\t\t}\n\n\t\tcase 'SET_VOLUME':\n\t\t{\n\t\t\tconst { volume } = action.payload;\n\n\t\t\treturn { ...state, volume };\n\t\t}\n\n\t\tcase 'SET_AUTO_GAIN_CONTROL':\n\t\t{\n\t\t\tconst { autoGainControl } = action.payload;\n\n\t\t\treturn { ...state, autoGainControl };\n\t\t}\n\n\t\tcase 'SET_ECHO_CANCELLATION':\n\t\t{\n\t\t\tconst { echoCancellation } = action.payload;\n\n\t\t\treturn { ...state, echoCancellation };\n\t\t}\n\n\t\tcase 'SET_NOISE_SUPPRESSION':\n\t\t{\n\t\t\tconst { noiseSuppression } = action.payload;\n\n\t\t\treturn { ...state, noiseSuppression };\n\t\t}\n\n\t\tcase 'SET_VOICE_ACTIVATED_UNMUTE':\n\t\t{\n\t\t\tconst { voiceActivatedUnmute } = action.payload;\n\n\t\t\treturn { ...state, voiceActivatedUnmute };\n\t\t}\n\n\t\tcase 'SET_NOISE_THRESHOLD':\n\t\t{\n\t\t\tconst { noiseThreshold } = action.payload;\n\n\t\t\treturn { ...state, noiseThreshold };\n\t\t}\n\n\t\tcase 'SET_DEFAULT_AUDIO':\n\t\t{\n\t\t\tconst { audio } = action.payload;\n\n\t\t\treturn { ...state, audio };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_SIZE':\n\t\t{\n\t\t\tconst { sampleSize } = action.payload;\n\n\t\t\treturn { ...state, sampleSize };\n\t\t}\n\n\t\tcase 'SET_LAST_N':\n\t\t{\n\t\t\tconst { lastN } = action.payload;\n\n\t\t\treturn { ...state, lastN };\n\t\t}\n\n\t\tcase 'TOGGLE_PERMANENT_TOPBAR':\n\t\t{\n\t\t\tconst permanentTopBar = !state.permanentTopBar;\n\n\t\t\treturn { ...state, permanentTopBar };\n\t\t}\n\n\t\tcase 'TOGGLE_BUTTON_CONTROL_BAR':\n\t\t{\n\t\t\tconst buttonControlBar = !state.buttonControlBar;\n\n\t\t\treturn { ...state, buttonControlBar };\n\t\t}\n\n\t\tcase 'TOGGLE_DRAWER_OVERLAYED':\n\t\t{\n\t\t\tconst drawerOverlayed = !state.drawerOverlayed;\n\n\t\t\treturn { ...state, drawerOverlayed };\n\t\t}\n\n\t\tcase 'TOGGLE_HIDDEN_CONTROLS':\n\t\t{\n\t\t\tconst hiddenControls = !state.hiddenControls;\n\n\t\t\treturn { ...state, hiddenControls };\n\t\t}\n\n\t\tcase 'TOGGLE_NOTIFICATION_SOUNDS':\n\t\t{\n\t\t\tconst notificationSounds = !state.notificationSounds;\n\n\t\t\treturn { ...state, notificationSounds };\n\t\t}\n\n\t\tcase 'TOGGLE_SHOW_NOTIFICATIONS':\n\t\t{\n\t\t\tconst showNotifications = !state.showNotifications;\n\n\t\t\treturn { ...state, showNotifications };\n\t\t}\n\n\t\tcase 'SET_VIDEO_RESOLUTION':\n\t\t{\n\t\t\tconst { resolution } = action.payload;\n\n\t\t\treturn { ...state, resolution };\n\t\t}\n\n\t\tcase 'SET_VIDEO_FRAME_RATE':\n\t\t{\n\t\t\tconst { frameRate } = action.payload;\n\n\t\t\treturn { ...state, frameRate };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_RESOLUTION':\n\t\t{\n\t\t\tconst { screenSharingResolution } = action.payload;\n\n\t\t\treturn { ...state, screenSharingResolution };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_FRAME_RATE':\n\t\t{\n\t\t\tconst { screenSharingFrameRate } = action.payload;\n\n\t\t\treturn { ...state, screenSharingFrameRate };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default settings;\n","const initialState = {};\n\nconst transports = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_TRANSPORT_STATS':\n\t\t{\n\t\t\tconst { transport, type } = action.payload;\n\n\t\t\treturn { ...state, [type]: transport[0] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default transports;\n","import { combineReducers } from 'redux';\nimport room from './room';\nimport me from './me';\nimport producers from './producers';\nimport peers from './peers';\nimport lobbyPeers from './lobbyPeers';\nimport consumers from './consumers';\nimport peerVolumes from './peerVolumes';\nimport notifications from './notifications';\nimport chat from './chat';\nimport toolarea from './toolarea';\nimport files from './files';\nimport settings from './settings';\nimport transports from './transports';\n\nexport default combineReducers({\n\troom,\n\tme,\n\tproducers,\n\tconsumers,\n\ttransports,\n\tpeers,\n\tlobbyPeers,\n\tpeerVolumes,\n\tnotifications,\n\tchat,\n\ttoolarea,\n\tfiles,\n\tsettings\n});\n","import {\n\tcreateStore,\n\tapplyMiddleware,\n\tcompose\n} from 'redux';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from './reducers/rootReducer';\n\nconst persistConfig =\n{\n\tkey             : 'root',\n\tstorage         : storage,\n\tstateReconciler : autoMergeLevel2,\n\twhitelist       : [ 'settings' ]\n};\n\nconst reduxMiddlewares =\n[\n\tthunk\n];\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tconst reduxLogger = createLogger(\n\t\t{\n\t\t\t// filter VOLUME level actions from log\n\t\t\tpredicate : (getState, action) => !(action.type === 'SET_PEER_VOLUME'),\n\t\t\tduration  : true,\n\t\t\ttimestamp : false,\n\t\t\tlevel     : 'log',\n\t\t\tlogErrors : true\n\t\t});\n\n\treduxMiddlewares.push(reduxLogger);\n}\n\nconst composeEnhancers =\n\ttypeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n\t\tcompose;\n\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(...reduxMiddlewares)\n);\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(\n\tpReducer,\n\tenhancer\n);\n\nexport const persistor = persistStore(store);","import debug from 'debug';\n\nconst APP_NAME = 'new-edutech';\n\nexport default class Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}\n"],"sourceRoot":""}