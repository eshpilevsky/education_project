{"version":3,"sources":["images/avatar-empty.jpeg","components/appPropTypes.js","actions/toolareaActions.js","components/FullScreen.js","components/Notifications/Notifications.js","components/Selectors.js","permissions.js","components/MeetingDrawer/Chat/ChatModerator.js","components/MeetingDrawer/Chat/Message.js","components/MeetingDrawer/Chat/MessageList.js","components/MeetingDrawer/Chat/ChatInput.js","components/MeetingDrawer/Chat/Chat.js","components/MeetingDrawer/FileSharing/File.js","components/MeetingDrawer/FileSharing/FileList.js","components/MeetingDrawer/FileSharing/FileSharingModerator.js","components/MeetingDrawer/FileSharing/FileSharing.js","components/MeetingDrawer/ParticipantList/ListPeer.js","components/MeetingDrawer/ParticipantList/ListMe.js","components/MeetingDrawer/ParticipantList/ListModerator.js","components/Containers/Volume.js","components/MeetingDrawer/ParticipantList/ParticipantList.js","components/MeetingDrawer/MeetingDrawer.js","components/Controls/EditableInput.js","components/VideoContainers/VideoView.js","components/Containers/Peer.js","components/Containers/Me.js","components/MeetingViews/Democratic.js","components/Containers/SpeakerPeer.js","components/MeetingViews/Filmstrip.js","components/PeerAudio/PeerAudio.js","components/PeerAudio/AudioPeers.js","components/VideoContainers/FullScreenView.js","components/VideoWindow/NewWindow.js","components/VideoContainers/FullView.js","components/VideoWindow/VideoWindow.js","components/AccessControl/LockDialog/ListLobbyPeer.js","components/AccessControl/LockDialog/LockDialog.js","components/Settings/MediaSettings.js","components/Settings/AppearenceSettings.js","components/Settings/AdvancedSettings.js","components/Settings/Settings.js","components/Controls/TopBar.js","components/Controls/ExtraVideo.js","components/Controls/ButtonControlBar.js","components/Controls/Help.js","components/Controls/About.js","components/Room.js"],"names":["module","exports","PropTypes","shape","state","oneOf","isRequired","activeSpeakerId","string","id","canSendMic","bool","canSendWebcam","webcamInProgress","source","deviceLabel","type","paused","track","any","codec","displayName","consumers","arrayOf","peerId","locallyPaused","remotelyPaused","profile","timeout","number","component","text","sender","data","picture","file","magnet","me","notify","func","setToolTab","toolTab","payload","key","fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","FullScreen","document","this","vendor","Object","keys","element","handler","addEventListener","removeEventListener","bind","Boolean","val","toLowerCase","notificationPosition","window","config","Notifications","displayed","storeDisplayed","notifications","newNotifications","currentNotifications","props","notExists","i","filter","length","forEach","notification","includes","enqueueSnackbar","variant","autoHideDuration","anchorOrigin","vertical","horizontal","removeNotification","Component","withSnackbar","connect","dispatch","notificationId","notificationActions","areStatesEqual","next","prev","meRolesSelect","roles","roomPermissionsSelect","room","roomPermissions","roomAllowWhenRoleMissing","allowWhenRoleMissing","producersSelect","producers","consumersSelect","spotlightsSelector","spotlights","peersSelector","peers","getPeerConsumers","getAllConsumers","peersKeySelector","createSelector","peersValueSelector","values","lobbyPeersKeySelector","lobbyPeers","screenProducersSelector","producer","extraVideoProducersSelector","micProducerSelector","find","webcamProducerSelector","screenProducerSelector","spotlightScreenConsumerSelector","consumer","spotlightExtraVideoConsumerSelector","passiveMicConsumerSelector","spotlightsLengthSelector","spotlightPeersSelector","spotlightSortedPeersSelector","peer","raisedHand","sort","a","b","String","localeCompare","raisedHandSortedPeers","raisedHandTimestamp","peersSortedSelector","participantListSelector","raisedHands","peersLengthSelector","raisedHandsSelector","reduce","videoBoxesSelector","spotlightsLength","screenProducers","screenConsumers","extraVideoProducers","extraVideoConsumers","meProducersSelector","micProducer","webcamProducer","screenProducer","makePeerConsumerSelector","allConsumers","consumersArray","map","consumerId","micConsumer","webcamConsumer","screenConsumer","makePermissionSelector","permission","some","role","permissions","withRoomContext","hasPermission","isChatModerator","withStyles","theme","root","display","padding","spacing","boxShadow","backgroundColor","listheader","fontWeight","actionButton","marginLeft","intl","useIntl","roomClient","classes","className","defaultMessage","Button","aria-label","formatMessage","color","disabled","clearChatInProgress","onClick","clearChat","linkRenderer","marked","Renderer","link","href","title","marginBottom","flexShrink","selfMessage","remoteMessage","marginRight","margin","content","avatar","borderRadius","height","alignSelf","self","time","name","Paper","classnames","alt","src","Typography","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","parse","renderer","ALLOWED_TAGS","ALLOWED_ATTR","MessageList","node","scrollTop","scrollHeight","offsetHeight","nextProps","chat","prevProps","prevState","shouldScroll","value","Date","myPicture","ref","message","index","EmptyAvatar","getTimeString","React","flexDirection","alignItems","overflowY","settings","canChat","input","flex","iconButton","useState","setMessage","createNewMessage","now","InputBase","placeholder","onChange","e","target","onKeyPress","ev","preventDefault","sendMessage","sendChatMessage","autoFocus","IconButton","width","File","canShareFiles","magnetUri","fileContent","files","sharedFile","fileInfo","button","saveFile","active","decode","dn","handleDownload","progress","PureComponent","FileList","entries","filePicture","injectIntl","isFileSharingModerator","clearFileSharingInProgress","clearFileSharing","browser","tabOpen","toolarea","currentToolTab","canShare","shareButtonsWrapper","handleFileChange","event","shareFiles","buttonDescription","buttonGalleryDescription","accept","htmlFor","platform","initialState","overflow","cursor","marginTop","peerInfo","fontSize","paddingLeft","flexGrow","indicators","buttons","green","isModerator","spotlight","children","webcamEnabled","micEnabled","screenVisible","style","raisedHandInProgress","stopPropagation","lowerPeerHand","Tooltip","placement","peerScreenInProgress","modifyPeerConsumer","peerVideoInProgress","peerAudioInProgress","peerKickInProgress","kickPeer","stopPeerAudioInProgress","mutePeer","stopPeerVideoInProgress","stopPeerVideo","stopPeerScreenSharingInProgress","stopPeerScreenSharing","setRaisedHand","divider","muteAllInProgress","muteAllPeers","stopAllVideoInProgress","stopAllPeerVideo","stopAllScreenSharingInProgress","stopAllPeerScreenSharing","closeMeetingInProgress","closeMeeting","peerVolumes","noiseThreshold","volume","Math","round","volumeLarge","position","top","bottom","right","justifyContent","largeBar","background","transitionProperty","transitionDuration","volumeSmall","float","backgroundSize","smallBar","backgroundRepeat","transform","small","ParticipantList","advancedMode","participants","selectedPeerId","list","flipKey","flipId","listItem","selected","setSelectedPeer","ParticipantListContainer","listStyleType","borderBottom","tabs","mapDispatchToProps","toolareaActions","unreadMessages","unreadFiles","palette","paper","appBar","tabsHeader","withTheme","closeDrawer","AppBar","Tabs","indexOf","indicatorColor","textColor","Tab","label","Badge","badgeContent","direction","EditableInput","propName","classLoading","classInvalid","editProps","shouldBlockWhileLoading","change","logger","Logger","VideoView","videoWidth","videoHeight","_audioTrack","_videoTrack","_videoResolutionTimer","isMe","isScreen","isExtraVideo","showQuality","showPeerInfo","videoContain","videoVisible","videoMultiLayer","audioScore","videoScore","consumerCurrentSpatialLayer","consumerCurrentTemporalLayer","consumerPreferredSpatialLayer","consumerPreferredTemporalLayer","audioCodec","videoCodec","onChangeDisplayName","netInfo","quality","red","score","producerScore","orange","yellow","info","media","box","hidden","Fragment","recv","send","iceSelectedTuple","sendBitrate","toFixed","bytesSent","recvBitrate","bytesReceived","remoteIp","localIp","displayNameEdit","maxLength","autoCorrect","spellCheck","newDisplayName","displayNameStatic","video","contain","autoPlay","playsInline","muted","controls","videoTrack","audioTrack","_setTracks","clearInterval","videoElement","refs","oncanplay","onplay","onpause","_hideVideoResolution","audioElement","stream","MediaStream","addTrack","srcObject","setState","videoCanPlay","play","catch","error","warn","_showVideoResolution","setInterval","objectFit","userSelect","opacity","zIndex","gap","gridTemplateAreas","gridArea","justifySelf","border","windowConsumer","activeSpeaker","toggleConsumerFullscreen","roomActions","toggleConsumerWindow","touchAction","backgroundImage","backgroundPosition","borderColor","order","fab","smallContainer","pointerEvents","transition","viewContainer","videoInfo","hover","setHover","touchTimeout","smallScreen","useMediaQuery","breakpoints","down","rootStyle","onMouseOver","onMouseOut","onTouchStart","clearTimeout","onTouchEnd","setTimeout","size","Fab","consumerSpatialLayers","spatialLayers","consumerTemporalLayers","temporalLayers","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","abs","canShareScreen","transports","noiseVolume","meTag","left","ptt","textAlign","micState","micTip","webcamState","webcamTip","screenState","screenTip","screenShareTooltipOpen","screenShareTooltipSetOpen","screenShareTooltipHandleClose","screenShareInProgress","spacingStyle","curr","useEffect","poll","getTransportStats","isSpeaking","buttonControlBar","hiddenControls","audioInProgress","voiceActivatedUnmute","isAutoMuted","updateMic","start","muteMic","unmuteMic","disableWebcam","updateWebcam","open","onClose","onOpen","updateScreenSharing","disableScreenSharing","changeDisplayName","disableExtraVideo","Democratic","updateDimensions","peersRef","current","n","boxes","x","y","clientWidth","clientHeight","toolbarsVisible","permanentTopBar","rows","ceil","peerWidth","peerHeight","resizeTimeout","createRef","spotlightsPeers","showingToolBar","hiddenToolBar","toolAreaOpen","flexWrap","alignContent","paddingTop","Filmstrip","lastSpeaker","getActivePeerId","peerIds","isSharingCamera","newState","rootContainer","availableWidth","availableSpeakerHeight","availableFilmstripHeight","activePeerContainer","speakerWidth","speakerHeight","filmStripContainer","filmStripHeight","filmStripWidth","myId","activePeerId","speakerStyle","peerStyle","speaker","filmStrip","Grid","container","justify","item","filmItem","spotlightsElement","gridTemplateColumns","gridTemplateRows","PeerAudio","_audioOutputDevice","audioOutputDevice","_setTrack","_setOutputDevice","audio","setSinkId","AudioPeersContainer","micConsumers","selectedAudioOutputDevice","data-component","fullScreenConsumer","icon","incompatibleVideo","consumerVisible","visible","NewWindow","handleToggleFullscreen","fullscreen","documentElement","handleFullscreenChange","createElement","windowCheckerInterval","released","mounted","ReactDOM","createPortal","data-tip","data-place","data-type","openChild","obj","url","features","onBlock","center","outerWidth","screenX","outerHeight","screenY","screenLeft","undefined","screen","screenTop","innerWidth","innerHeight","push","join","closed","release","body","appendChild","copyStyles","Array","from","styleSheets","styleSheet","rules","cssRules","err","newStyleEl","cssRule","cssText","returnText","split","line","slice","location","origin","createTextNode","head","newLinkEl","rel","close","onUnload","defaultProps","FullView","videoProfile","loading","VideoWindowContainer","promotionInProgress","lobbyPeersPromotionInProgress","canPromote","ListItem","ListItemAvatar","Avatar","ListItemText","primary","promoteLobbyPeer","handleCloseLockDialog","handleAccessCode","dialogPaper","lock","Dialog","lockDialogOpen","DialogTitle","List","dense","subheader","ListSubheader","DialogContent","DialogContentText","gutterBottom","DialogActions","promoteAllLobbyPeers","NoiseSlider","rail","mark","markActive","Slider","setEchoCancellation","settingsActions","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setting","switchLabel","nested","paddingBottom","paddingRight","formControl","webcams","audioDevices","audioOutputDevices","audioSettingsOpen","setAudioSettingsOpen","videoSettingsOpen","setVideoSettingsOpen","resolutions","webcamDevices","autoComplete","FormControl","Select","selectedWebcam","restart","newDeviceId","displayEmpty","autoWidth","selectEmpty","webcam","MenuItem","deviceId","FormHelperText","Collapse","in","resolution","newResolution","screenSharingFrameRate","newFrameRate","selectedAudioDevice","audioOutputSupportedBrowsers","changeAudioOutputDevice","audioOutputInProgress","audioOutput","FormControlLabel","control","Switch","checked","echoCancellation","labelPlacement","autoGainControl","noiseSuppression","slider","min","max","valueLabelDisplay","_setNoiseThreshold","marks","onTogglePermanentTopBar","onToggleHiddenControls","onToggleShowNotifications","onToggleButtonControlBar","onToggleDrawerOverlayed","handleChangeMode","isMobile","modes","mode","drawerOverlayed","showNotifications","onToggleAdvancedMode","onToggleNotificationSounds","notificationSounds","lockLastN","lastN","changeMaxSpotlights","maxLastN","_","handleCloseSettings","setSettingsTab","currentSettingsTab","settingsOpen","PulsingBadge","badge","secondary","main","animation","hasExtraVideoPermission","hasLockPermission","hasPromotionPermission","peersLength","loggedIn","loginEnabled","unread","canProduceExtraVideo","canLock","setToolbarsVisible","setSettingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setLockDialogOpen","toggleToolArea","openUsersTab","persistentDrawerOpen","menuButton","logo","up","show","hide","grow","sectionDesktop","sectionMobile","disabledButton","moreAction","mobileMoreAnchorEl","setMobileMoreAnchorEl","anchorEl","setAnchorEl","currentMenu","setCurrentMenu","handleMenuOpen","menu","currentTarget","handleMenuClose","onFullscreen","isMenuOpen","isMobileMenuOpen","lockTooltip","locked","fullscreenTooltip","loginTooltip","Toolbar","noWrap","aria-owns","aria-haspopup","unlockRoom","lockRoom","Popover","transformOrigin","onExited","getContentAnchorEl","Menu","logout","login","handleCloseExtraVideo","videoDevices","videoDevice","setVideoDevice","addExtraVideo","move","shortcuts","fromCharCode","handleCloseHelp","whiteSpace","minWidth","handleCloseAbout","dividers","paragraph","align","Link","process","Divider","light","supportUrl","privacyUrl","TIMEOUT","hideTimeout","Room","waitForHide","idle","handleMovement","View","filmstrip","democratic","isElectron","buttonText","CssBaseline","Hidden","implementation","SwipeableDrawer","anchor","drawerPaper","ModalProps","keepMounted","drawer","Drawer","os","backgroundAttachment"],"mappings":"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","file":"static/js/room.b99aa221.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar-empty.23a3776b.jpeg\";","import PropTypes from 'prop-types';\n\nexport const Room = PropTypes.shape(\n\t{\n\t\tstate : PropTypes.oneOf(\n\t\t\t[ 'new', 'connecting', 'connected', 'closed' ]).isRequired,\n\t\tactiveSpeakerId : PropTypes.string\n\t});\n\nexport const Me = PropTypes.shape(\n\t{\n\t\tid               : PropTypes.string.isRequired,\n\t\tcanSendMic       : PropTypes.bool.isRequired,\n\t\tcanSendWebcam    : PropTypes.bool.isRequired,\n\t\twebcamInProgress : PropTypes.bool.isRequired\n\t});\n\nexport const Producer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tsource      : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tdeviceLabel : PropTypes.string,\n\t\ttype        : PropTypes.oneOf([ 'front', 'back', 'screen', 'extravideo' ]),\n\t\tpaused      : PropTypes.bool.isRequired,\n\t\ttrack       : PropTypes.any,\n\t\tcodec       : PropTypes.string.isRequired\n\t});\n\nexport const Peer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tdisplayName : PropTypes.string,\n\t\tconsumers   : PropTypes.arrayOf(PropTypes.string).isRequired\n\t});\n\nexport const Consumer = PropTypes.shape(\n\t{\n\t\tid             : PropTypes.string.isRequired,\n\t\tpeerId         : PropTypes.string.isRequired,\n\t\tsource         : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tlocallyPaused  : PropTypes.bool.isRequired,\n\t\tremotelyPaused : PropTypes.bool.isRequired,\n\t\tprofile        : PropTypes.oneOf([ 'none', 'default', 'low', 'medium', 'high' ]),\n\t\ttrack          : PropTypes.any,\n\t\tcodec          : PropTypes.string\n\t});\n\nexport const Notification = PropTypes.shape(\n\t{\n\t\tid      : PropTypes.string.isRequired,\n\t\ttype    : PropTypes.oneOf([ 'info', 'error' ]).isRequired,\n\t\ttimeout : PropTypes.number\n\t});\n\nexport const Message = PropTypes.shape(\n\t{\n\t\ttype      : PropTypes.string,\n\t\tcomponent : PropTypes.string,\n\t\ttext      : PropTypes.string,\n\t\tsender    : PropTypes.string\n\t});\n\nexport const FileEntryProps = PropTypes.shape(\n\t{\n\t\tdata : PropTypes.shape({\n\t\t\tid      : PropTypes.string.isRequired,\n\t\t\tpicture : PropTypes.string,\n\t\t\tfile    : PropTypes.shape({\n\t\t\t\tmagnet : PropTypes.string.isRequired\n\t\t\t}).isRequired,\n\t\t\tme : PropTypes.bool\n\t\t}).isRequired,\n\t\tnotify : PropTypes.func.isRequired\n\t});","export const toggleToolArea = () =>\n\t({\n\t\ttype : 'TOGGLE_TOOL_AREA'\n\t});\n\nexport const openToolArea = () =>\n\t({\n\t\ttype : 'OPEN_TOOL_AREA'\n\t});\n\nexport const closeToolArea = () =>\n\t({\n\t\ttype : 'CLOSE_TOOL_AREA'\n\t});\n\nexport const setToolTab = (toolTab) =>\n\t({\n\t\ttype    : 'SET_TOOL_TAB',\n\t\tpayload : { toolTab }\n\t});","const key = {\n\tfullscreenEnabled : 0,\n\tfullscreenElement : 1,\n\trequestFullscreen : 2,\n\texitFullscreen    : 3,\n\tfullscreenchange  : 4,\n\tfullscreenerror   : 5\n};\n\nconst webkit = [\n\t'webkitFullscreenEnabled',\n\t'webkitFullscreenElement',\n\t'webkitRequestFullscreen',\n\t'webkitExitFullscreen',\n\t'webkitfullscreenchange',\n\t'webkitfullscreenerror'\n];\n\nconst moz = [\n\t'mozFullScreenEnabled',\n\t'mozFullScreenElement',\n\t'mozRequestFullScreen',\n\t'mozCancelFullScreen',\n\t'mozfullscreenchange',\n\t'mozfullscreenerror'\n];\n\nconst ms = [\n\t'msFullscreenEnabled',\n\t'msFullscreenElement',\n\t'msRequestFullscreen',\n\t'msExitFullscreen',\n\t'MSFullscreenChange',\n\t'MSFullscreenError'\n];\n\nexport default class FullScreen\n{\n\tconstructor(document)\n\t{\n\t\tthis.document = document;\n\t\tthis.vendor = (\n\t\t\t('fullscreenEnabled' in this.document && Object.keys(key)) ||\n\t\t\t(webkit[0] in this.document && webkit) ||\n\t\t\t(moz[0] in this.document && moz) ||\n\t\t\t(ms[0] in this.document && ms) ||\n\t\t\t[]\n\t\t);\n\t}\n\n\trequestFullscreen(element)\n\t{\n\t\telement[this.vendor[key.requestFullscreen]]();\n\t}\n\n\trequestFullscreenFunction(element)\n\t{\n\t\t// eslint-disable-next-line\n\t\telement[this.vendor[key.requestFullscreen]];\n\t}\n\n\taddEventListener(type, handler)\n\t{\n\t\tthis.document.addEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tremoveEventListener(type, handler)\n\t{\n\t\tthis.document.removeEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tget exitFullscreen()\n\t{\n\t\treturn this.document[this.vendor[key.exitFullscreen]].bind(this.document);\n\t}\n\n\tget fullscreenEnabled()\n\t{\n\t\treturn Boolean(this.document[this.vendor[key.fullscreenEnabled]]);\n\t}\n\tset fullscreenEnabled(val) {}\n\n\tget fullscreenElement()\n\t{\n\t\treturn this.document[this.vendor[key.fullscreenElement]];\n\t}\n\tset fullscreenElement(val) {}\n\n\tget onfullscreenchange()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenchange(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()] = handler;\n\t}\n\n\tget onfullscreenerror()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenerror(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()] = handler;\n\t}\n}\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSnackbar } from 'notistack';\nimport * as notificationActions from '../../actions/notificationActions';\n\nconst notificationPosition = window.config.notificationPosition || 'right';\n\nclass Notifications extends Component\n{\n\tdisplayed = [];\n\n\tstoreDisplayed = (id) =>\n\t{\n\t\tthis.displayed = [ ...this.displayed, id ];\n\t};\n\n\tshouldComponentUpdate({ notifications: newNotifications = [] })\n\t{\n\t\tconst { notifications: currentNotifications } = this.props;\n\n\t\tlet notExists = false;\n\n\t\tfor (let i = 0; i < newNotifications.length; i += 1)\n\t\t{\n\t\t\tif (notExists) continue;\n\n\t\t\tnotExists = notExists ||\n\t\t\t\t!currentNotifications.filter(({ id }) => newNotifications[i].id === id).length;\n\t\t}\n\n\t\treturn notExists;\n\t}\n\n\tcomponentDidUpdate()\n\t{\n\t\tconst { notifications = [] } = this.props;\n\n\t\tnotifications.forEach((notification) =>\n\t\t{\n\t\t\t// Do nothing if snackbar is already displayed\n\t\t\tif (this.displayed.includes(notification.id)) return;\n\t\t\t// Display snackbar using notistack\n\t\t\tthis.props.enqueueSnackbar(notification.text,\n\t\t\t\t{\n\t\t\t\t\tvariant          : notification.type,\n\t\t\t\t\tautoHideDuration : notification.timeout,\n\t\t\t\t\tanchorOrigin     : {\n\t\t\t\t\t\tvertical   : 'bottom',\n\t\t\t\t\t\thorizontal : notificationPosition\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t// Keep track of snackbars that we've displayed\n\t\t\tthis.storeDisplayed(notification.id);\n\t\t\t// Dispatch action to remove snackbar from redux store\n\t\t\tthis.props.removeNotification(notification.id);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\treturn null;\n\t}\n}\n\nNotifications.propTypes =\n{\n\tnotifications      : PropTypes.array.isRequired,\n\tenqueueSnackbar    : PropTypes.func.isRequired,\n\tremoveNotification : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tnotifications : state.notifications\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tremoveNotification : (notificationId) =>\n\t\t\tdispatch(notificationActions.removeNotification({ notificationId }))\n\t});\n\nexport default withSnackbar(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.notifications === next.notifications\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(Notifications)\n);\n","import { createSelector } from 'reselect';\n\nconst meRolesSelect = (state) => state.me.roles;\nconst roomPermissionsSelect = (state) => state.room.roomPermissions;\nconst roomAllowWhenRoleMissing = (state) => state.room.allowWhenRoleMissing;\nconst producersSelect = (state) => state.producers;\nconst consumersSelect = (state) => state.consumers;\nconst spotlightsSelector = (state) => state.room.spotlights;\nconst peersSelector = (state) => state.peers;\nconst lobbyPeersSelector = (state) => state.lobbyPeers;\nconst getPeerConsumers = (state, id) =>\n\t(state.peers[id] ? state.peers[id].consumers : null);\nconst getAllConsumers = (state) => state.consumers;\nconst peersKeySelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.keys(peers)\n);\n\nexport const peersValueSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers)\n);\n\nexport const lobbyPeersKeySelector = createSelector(\n\tlobbyPeersSelector,\n\t(lobbyPeers) => Object.keys(lobbyPeers)\n);\n\nexport const micProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'screen')\n);\n\nexport const extraVideoProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'extravideo')\n);\n\nexport const micProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'screen')\n);\n\nexport const micConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'mic')\n);\n\nexport const webcamConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'webcam')\n);\n\nexport const screenConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'screen')\n);\n\nexport const spotlightScreenConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'screen' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightExtraVideoConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'extravideo' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const passiveMicConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'mic' && !spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightsLengthSelector = createSelector(\n\tspotlightsSelector,\n\t(spotlights) => spotlights.length\n);\n\nexport const spotlightPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersKeySelector,\n\t(spotlights, peers) => peers.filter((peerId) => spotlights.includes(peerId))\n);\n\nexport const spotlightSortedPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nconst raisedHandSortedPeers = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.filter((peer) => peer.raisedHand)\n\t\t.sort((a, b) => a.raisedHandTimestamp - b.raisedHandTimestamp)\n);\n\nconst peersSortedSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => !spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const participantListSelector = createSelector(\n\traisedHandSortedPeers,\n\tspotlightSortedPeersSelector,\n\tpeersSortedSelector,\n\t(raisedHands, spotlights, peers) =>\n\t\t[ ...raisedHands, ...spotlights, ...peers ]\n);\n\nexport const peersLengthSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers).length\n);\n\nexport const passivePeersSelector = createSelector(\n\tpeersValueSelector,\n\tspotlightsSelector,\n\t(peers, spotlights) => peers.filter((peer) => !spotlights.includes(peer.id))\n\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const raisedHandsSelector = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.reduce((a, b) => (a + (b.raisedHand ? 1 : 0)), 0)\n);\n\nexport const videoBoxesSelector = createSelector(\n\tspotlightsLengthSelector,\n\tscreenProducersSelector,\n\tspotlightScreenConsumerSelector,\n\textraVideoProducersSelector,\n\tspotlightExtraVideoConsumerSelector,\n\t(\n\t\tspotlightsLength,\n\t\tscreenProducers,\n\t\tscreenConsumers,\n\t\textraVideoProducers,\n\t\textraVideoConsumers\n\t) =>\n\t\tspotlightsLength + 1 + screenProducers.length +\n\t\tscreenConsumers.length + extraVideoProducers.length +\n\t\textraVideoConsumers.length\n);\n\nexport const meProducersSelector = createSelector(\n\tmicProducerSelector,\n\twebcamProducerSelector,\n\tscreenProducerSelector,\n\textraVideoProducersSelector,\n\t(micProducer, webcamProducer, screenProducer, extraVideoProducers) =>\n\t{\n\t\treturn {\n\t\t\tmicProducer,\n\t\t\twebcamProducer,\n\t\t\tscreenProducer,\n\t\t\textraVideoProducers\n\t\t};\n\t}\n);\n\nexport const makePeerConsumerSelector = () =>\n{\n\treturn createSelector(\n\t\tgetPeerConsumers,\n\t\tgetAllConsumers,\n\t\t(consumers, allConsumers) =>\n\t\t{\n\t\t\tif (!consumers)\n\t\t\t\treturn null;\n\n\t\t\tconst consumersArray = consumers\n\t\t\t\t.map((consumerId) => allConsumers[consumerId]);\n\t\t\tconst micConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'mic');\n\t\t\tconst webcamConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'webcam');\n\t\t\tconst screenConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'screen');\n\t\t\tconst extraVideoConsumers =\n\t\t\t\tconsumersArray.filter((consumer) => consumer.source === 'extravideo');\n\n\t\t\treturn { micConsumer, webcamConsumer, screenConsumer, extraVideoConsumers };\n\t\t}\n\t);\n};\n\n// Very important that the Components that use this\n// selector need to check at least these state changes:\n//\n// areStatesEqual : (next, prev) =>\n// {\n// \t\treturn (\n// \t\t\tprev.room.roomPermissions === next.room.roomPermissions &&\n// \t\t\tprev.room.allowWhenRoleMissing === next.room.allowWhenRoleMissing &&\n// \t\t\tprev.peers === next.peers &&\n// \t\t\tprev.me.roles === next.me.roles\n// \t\t);\n// }\nexport const makePermissionSelector = (permission) =>\n{\n\treturn createSelector(\n\t\tmeRolesSelect,\n\t\troomPermissionsSelect,\n\t\troomAllowWhenRoleMissing,\n\t\tpeersValueSelector,\n\t\t(roles, roomPermissions, allowWhenRoleMissing, peers) =>\n\t\t{\n\t\t\tif (!roomPermissions)\n\t\t\t\treturn false;\n\n\t\t\tconst permitted = roles.some((role) =>\n\t\t\t\troomPermissions[permission].includes(role)\n\t\t\t);\n\n\t\t\tif (permitted)\n\t\t\t\treturn true;\n\n\t\t\tif (!allowWhenRoleMissing)\n\t\t\t\treturn false;\n\n\t\t\t// Allow if config is set, and no one is present\n\t\t\tif (allowWhenRoleMissing.includes(permission) &&\n\t\t\t\tpeers.filter(\n\t\t\t\t\t(peer) =>\n\t\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t\t(role) => roomPermissions[permission].includes(role)\n\t\t\t\t\t\t)\n\t\t\t\t).length === 0\n\t\t\t)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\t);\n};","export const permissions = {\n\t// The role(s) have permission to lock/unlock a room\n\tCHANGE_ROOM_LOCK : 'CHANGE_ROOM_LOCK',\n\t// The role(s) have permission to promote a peer from the lobby\n\tPROMOTE_PEER     : 'PROMOTE_PEER',\n\t// The role(s) have permission to send chat messages\n\tSEND_CHAT        : 'SEND_CHAT',\n\t// The role(s) have permission to moderate chat\n\tMODERATE_CHAT    : 'MODERATE_CHAT',\n\t// The role(s) have permission to share screen\n\tSHARE_SCREEN     : 'SHARE_SCREEN',\n\t// The role(s) have permission to produce extra video\n\tEXTRA_VIDEO      : 'EXTRA_VIDEO',\n\t// The role(s) have permission to share files\n\tSHARE_FILE       : 'SHARE_FILE',\n\t// The role(s) have permission to moderate files\n\tMODERATE_FILES   : 'MODERATE_FILES',\n\t// The role(s) have permission to moderate room (e.g. kick user)\n\tMODERATE_ROOM    : 'MODERATE_ROOM'\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst ChatModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisChatModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isChatModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearChat',\n\t\t\t\t\tdefaultMessage : 'Clear chat'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearChatInProgress}\n\t\t\t\tonClick={() => roomClient.clearChat()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearChat'\n\t\t\t\t\tdefaultMessage='Clear chat'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nChatModerator.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\tisChatModerator : PropTypes.bool,\n\troom            : PropTypes.object,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisChatModerator : hasPermission(state),\n\t\t\troom            : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ChatModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport DOMPurify from 'dompurify';\nimport marked from 'marked';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useIntl } from 'react-intl';\n\nconst linkRenderer = new marked.Renderer();\n\nlinkRenderer.link = (href, title, text) =>\n{\n\ttitle = title ? title : href;\n\ttext = text ? text : href;\n\n\treturn `<a target='_blank' href='${ href }' title='${ title }'>${ text }</a>`;\n};\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tflexShrink   : 0\n\t\t},\n\t\tselfMessage :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t},\n\t\tremoteMessage :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\t'& p' :\n\t\t\t{\n\t\t\t\tmargin : 0\n\t\t\t}\n\t\t},\n\t\tcontent :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(1)\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\talignSelf    : 'center'\n\t\t}\n\t});\n\nconst Message = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tself,\n\t\tpicture,\n\t\ttext,\n\t\ttime,\n\t\tname,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper\n\t\t\tclassName={classnames(\n\t\t\t\tclasses.root,\n\t\t\t\tself ? classes.selfMessage : classes.remoteMessage\n\t\t\t)}\n\t\t>\n\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tvariant='subtitle1'\n\t\t\t\t\t// eslint-disable-next-line react/no-danger\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html : DOMPurify.sanitize(\n\t\t\t\t\t\tmarked.parse(\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t{ renderer: linkRenderer }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tALLOWED_TAGS : [ 'a' ],\n\t\t\t\t\t\t\tALLOWED_ATTR : [ 'href', 'target', 'title' ]\n\t\t\t\t\t\t}\n\t\t\t\t\t) }}\n\t\t\t\t/>\n\t\t\t\t<Typography variant='caption'>\n\t\t\t\t\t{ self ?\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t:\n\t\t\t\t\t\tname\n\t\t\t\t\t} - {time}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t</Paper>\n\t);\n};\n\nMessage.propTypes =\n{\n\tself    : PropTypes.bool,\n\tpicture : PropTypes.string,\n\ttext    : PropTypes.string,\n\ttime    : PropTypes.object,\n\tname    : PropTypes.string,\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Message);","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedTime } from 'react-intl';\nimport Message from './Message';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass MessageList extends React.Component\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.chat.length !== this.props.chat.length)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\tgetTimeString(time)\n\t{\n\t\treturn (<FormattedTime value={new Date(time)} />);\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tchat,\n\t\t\tmyPicture,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{\n\t\t\t\t\tchat.map((message, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst picture = (message.sender === 'response' ?\n\t\t\t\t\t\t\tmessage.picture : myPicture) || EmptyAvatar;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tself={message.sender === 'client'}\n\t\t\t\t\t\t\t\tpicture={picture}\n\t\t\t\t\t\t\t\ttext={message.text}\n\t\t\t\t\t\t\t\ttime={this.getTimeString(message.time)}\n\t\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nMessageList.propTypes =\n{\n\tchat      : PropTypes.array,\n\tmyPicture : PropTypes.string,\n\tclasses   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tchat      : state.chat,\n\t\tmyPicture : state.me.picture\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.chat === next.chat &&\n\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MessageList));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tdisplay      : 'flex',\n\t\t\talignItems   : 'center',\n\t\t\tborderRadius : 0\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tmarginLeft : 8,\n\t\t\tflex       : 1\n\t\t},\n\t\ticonButton :\n\t\t{\n\t\t\tpadding : 10\n\t\t}\n\t});\n\nconst ChatInput = (props) =>\n{\n\tconst [ message, setMessage ] = useState('');\n\n\tconst intl = useIntl();\n\n\tconst createNewMessage = (text, sender, name, picture) =>\n\t\t({\n\t\t\ttype : 'message',\n\t\t\ttext,\n\t\t\ttime : Date.now(),\n\t\t\tname,\n\t\t\tsender,\n\t\t\tpicture\n\t\t});\n\n\tconst handleChange = (e) =>\n\t{\n\t\tsetMessage(e.target.value);\n\t};\n\n\tconst {\n\t\troomClient,\n\t\tdisplayName,\n\t\tpicture,\n\t\tcanChat,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<InputBase\n\t\t\t\tclassName={classes.input}\n\t\t\t\tplaceholder={intl.formatMessage({\n\t\t\t\t\tid             : 'label.chatInput',\n\t\t\t\t\tdefaultMessage : 'Enter chat message...'\n\t\t\t\t})}\n\t\t\t\tvalue={message || ''}\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonKeyPress={(ev) =>\n\t\t\t\t{\n\t\t\t\t\tif (ev.key === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tcolor='primary'\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t\taria-label='Send'\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SendIcon />\n\t\t\t</IconButton>\n\t\t</Paper>\n\t);\n};\n\nChatInput.propTypes =\n{\n\troomClient  : PropTypes.object.isRequired,\n\tdisplayName : PropTypes.string,\n\tpicture     : PropTypes.string,\n\tcanChat     : PropTypes.bool.isRequired,\n\tclasses     : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SEND_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tdisplayName : state.settings.displayName,\n\t\t\tpicture     : state.me.picture,\n\t\t\tcanChat     : hasPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(\n\tconnect(\n\t\tmakeMapStateToProps,\n\t\tnull,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.room === next.room &&\n\t\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\t\tprev.peers === next.peers &&\n\t\t\t\t\tprev.settings.displayName === next.settings.displayName &&\n\t\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(withStyles(styles)(ChatInput))\n);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport ChatModerator from './ChatModerator';\nimport MessageList from './MessageList';\nimport ChatInput from './ChatInput';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%',\n\t\t\toverflowY     : 'auto'\n\t\t}\n\t});\n\nconst Chat = (props) =>\n{\n\tconst {\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<ChatModerator />\n\t\t\t<MessageList />\n\t\t\t<ChatInput />\n\t\t</Paper>\n\t);\n};\n\nChat.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Chat);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport magnet from 'magnet-uri';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\talignItems           : 'center',\n\t\t\twidth                : '100%',\n\t\t\tpadding              : theme.spacing(1),\n\t\t\tboxShadow            : '0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tmarginBottom : theme.spacing(1)\n\t\t\t}\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tfileContent :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center'\n\t\t},\n\t\tfileInfo :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center',\n\t\t\tpadding    : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t}\n\t});\n\nclass File extends React.PureComponent\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tdisplayName,\n\t\t\tpicture,\n\t\t\tcanShareFiles,\n\t\t\tmagnetUri,\n\t\t\tfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\n\t\t\t\t<div className={classes.fileContent}>\n\t\t\t\t\t{ file.files &&\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='filesharing.finished'\n\t\t\t\t\t\t\t\t\tdefaultMessage='File finished downloading'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ file.files.map((sharedFile, i) => (\n\t\t\t\t\t\t\t\t<div className={classes.fileInfo} key={i}>\n\t\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t\t{sharedFile.name}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.saveFile(sharedFile);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='filesharing.save'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Save'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t}\n\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='filesharing.sharedFile'\n\t\t\t\t\t\t\tdefaultMessage='{displayName} shared a file'\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t{ (!file.active && !file.files) &&\n\t\t\t\t\t\t<div className={classes.fileInfo}>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t{ magnet.decode(magnetUri).dn }\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{ canShareFiles ?\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\troomClient.handleDownload(magnetUri);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='filesharing.download'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Download'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='label.fileSharingUnsupported'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='File sharing not supported'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.timeout &&\n\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='filesharing.missingSeeds'\n\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t`If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want.`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.active &&\n\t\t\t\t\t\t<progress value={file.progress} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFile.propTypes = {\n\troomClient    : PropTypes.object.isRequired,\n\tmagnetUri     : PropTypes.string.isRequired,\n\tdisplayName   : PropTypes.string.isRequired,\n\tpicture       : PropTypes.string,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\tfile          : PropTypes.object.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { magnetUri }) =>\n{\n\treturn {\n\t\tfile          : state.files[magnetUri],\n\t\tcanShareFiles : state.me.canShareFiles\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(File)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { injectIntl } from 'react-intl';\nimport File from './File';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass FileList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tfiles,\n\t\t\tme,\n\t\t\tpeers,\n\t\t\tintl,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ Object.entries(files).map(([ magnetUri, file ]) =>\n\t\t\t\t{\n\t\t\t\t\tlet displayName;\n\n\t\t\t\t\tlet filePicture;\n\n\t\t\t\t\tif (me.id === file.peerId)\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilePicture = me.picture;\n\t\t\t\t\t}\n\t\t\t\t\telse if (peers[file.peerId])\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = peers[file.peerId].displayName;\n\t\t\t\t\t\tfilePicture = peers[file.peerId].picture;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.unknown',\n\t\t\t\t\t\t\tdefaultMessage : 'Unknown'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<File\n\t\t\t\t\t\t\tkey={magnetUri}\n\t\t\t\t\t\t\tmagnetUri={magnetUri}\n\t\t\t\t\t\t\tdisplayName={displayName}\n\t\t\t\t\t\t\tpicture={filePicture || EmptyAvatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFileList.propTypes =\n{\n\tfiles   : PropTypes.object.isRequired,\n\tme      : appPropTypes.Me.isRequired,\n\tpeers   : PropTypes.object.isRequired,\n\tintl    : PropTypes.object.isRequired,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tfiles : state.files,\n\t\tme    : state.me,\n\t\tpeers : state.peers\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(injectIntl(FileList)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst FileSharingModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisFileSharingModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isFileSharingModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearFileSharing',\n\t\t\t\t\tdefaultMessage : 'Clear files'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearFileSharingInProgress}\n\t\t\t\tonClick={() => roomClient.clearFileSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearFileSharing'\n\t\t\t\t\tdefaultMessage='Clear files'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nFileSharingModerator.propTypes =\n{\n\troomClient             : PropTypes.any.isRequired,\n\tisFileSharingModerator : PropTypes.bool,\n\troom                   : PropTypes.object,\n\tclasses                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_FILES);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisFileSharingModerator : hasPermission(state),\n\t\t\troom                   : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharingModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport FileList from './FileList';\nimport FileSharingModerator from './FileSharingModerator';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%'\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tdisplay : 'none'\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshareButtonsWrapper :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst FileSharing = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst handleFileChange = async (event) =>\n\t{\n\t\tif (event.target.files.length > 0)\n\t\t{\n\t\t\tawait props.roomClient.shareFiles(event.target.files);\n\t\t}\n\t};\n\n\tconst {\n\t\tcanShareFiles,\n\t\tbrowser,\n\t\tcanShare,\n\t\tclasses\n\t} = props;\n\n\tconst buttonDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareFile',\n\t\t\tdefaultMessage : 'Share file'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\tconst buttonGalleryDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareGalleryFile',\n\t\t\tdefaultMessage : 'Share image'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<FileSharingModerator />\n\t\t\t<div className={classes.shareButtonsWrapper} >\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t// Need to reset to be able to share same file twice\n\t\t\t\t\tonClick={(e) => (e.target.value = null)}\n\t\t\t\t\tid='share-files-button'\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\taccept='image/*'\n\t\t\t\t\tid='share-files-gallery-button'\n\t\t\t\t/>\n\t\t\t\t<label htmlFor='share-files-button'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonDescription}\n\t\t\t\t\t</Button>\n\t\t\t\t</label>\n\t\t\t\t{\n\t\t\t\t\t(browser.platform === 'mobile') && canShareFiles && canShare && <label htmlFor='share-files-gallery-button'>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{buttonGalleryDescription}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</label>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<FileList />\n\t\t</Paper>\n\t);\n};\n\nFileSharing.propTypes = {\n\troomClient    : PropTypes.any.isRequired,\n\tbrowser       : PropTypes.object.isRequired,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\ttabOpen       : PropTypes.bool.isRequired,\n\tcanShare      : PropTypes.bool.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_FILE);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tcanShareFiles : state.me.canShareFiles,\n\t\t\tbrowser       : state.me.browser,\n\t\t\ttabOpen       : state.toolarea.currentToolTab === 'files',\n\t\t\tcanShare      : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharing)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { green } from '@material-ui/core/colors';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\nimport ExitIcon from '@material-ui/icons/ExitToApp';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tindicators :\n\t\t{\n\t\t\tdisplay : 'flex',\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor      : 'rgba(0, 153, 0, 1)',\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t}\n\t});\n\nconst ListPeer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisModerator,\n\t\tspotlight,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tchildren,\n\t\tclasses\n\t} = props;\n\n\tconst webcamEnabled = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='Peer avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{peer.displayName}\n\t\t\t</div>\n\t\t\t{ peer.raisedHand &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled={!isModerator || peer.raisedHandInProgress}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.lowerPeerHand(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled\n\t\t\t\t>\n\t\t\t\t\t<RecordVoiceOverIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ screenConsumer && spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={screenVisible ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerScreenInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\tscreenVisible ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenVisible ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={webcamEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerVideoInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\twebcamEnabled ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcamEnabled ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t\t})}\n\t\t\t\t\tcolor={micEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\tdisabled={peer.peerAudioInProgress}\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t\t{ isModerator &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tdisabled={peer.peerKickInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.kickPeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ExitIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && micConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantAudioModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant audio globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerAudioInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.mutePeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !micConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && webcamConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideoModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerVideo(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !webcamConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && screenConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharingModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant screen share globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerScreenSharingInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerScreenSharing(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !screenConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nListPeer.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tspotlight      : PropTypes.bool,\n\tpeer           : appPropTypes.Peer.isRequired,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tchildren       : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer : state.peers[id],\n\t\t\t...getPeerConsumers(state, id)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { useIntl } from 'react-intl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst ListMe = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tclasses\n\t} = props;\n\n\tconst picture = me.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='My avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{settings.displayName}\n\t\t\t</div>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tclassnames(me.raisedHand ? classes.green : null, classes.buttons)\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={me.raisedHandInProgress}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.setRaisedHand(!me.raisedHand);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n};\n\nListMe.propTypes =\n{\n\troomClient : PropTypes.object.isRequired,\n\tme         : appPropTypes.Me.isRequired,\n\tsettings   : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\tme       : state.me,\n\tsettings : state.settings\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListMe)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding : theme.spacing(1),\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t}\n\t});\n\nconst ListModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.muteAll',\n\t\t\t\t\tdefaultMessage : 'Mute all'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.muteAllInProgress}\n\t\t\t\tonClick={() => roomClient.muteAllPeers()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.muteAll'\n\t\t\t\t\tdefaultMessage='Mute all'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllVideo',\n\t\t\t\t\tdefaultMessage : 'Stop all video'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllVideoInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerVideo()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllVideo'\n\t\t\t\t\tdefaultMessage='Stop all video'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllScreenSharing',\n\t\t\t\t\tdefaultMessage : 'Stop all screen sharing'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllScreenSharingInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerScreenSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllScreenSharing'\n\t\t\t\t\tdefaultMessage='Stop all screen sharing'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.closeMeeting',\n\t\t\t\t\tdefaultMessage : 'Close meeting'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.closeMeetingInProgress}\n\t\t\t\tonClick={() => roomClient.closeMeeting()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.closeMeeting'\n\t\t\t\t\tdefaultMessage='Close meeting'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nListModerator.propTypes =\n{\n\troomClient : PropTypes.any.isRequired,\n\troom       : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\troom : state.room\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListModerator)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\tvolumeLarge :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tright          : 2,\n\t\t\twidth          : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tlargeBar :\n\t\t{\n\t\t\twidth              : 6,\n\t\t\tborderRadius       : 6,\n\t\t\tbackground         : 'rgba(yellow, 0.65)',\n\t\t\ttransitionProperty : 'height background-color',\n\t\t\ttransitionDuration : '0.25s',\n\t\t\t'&.level0'         :\n\t\t\t{\n\t\t\t\theight          : 0,\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level1' :\n\t\t\t{\n\t\t\t\theight          : '10%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level2' :\n\t\t\t{\n\t\t\t\theight          : '20%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level3' :\n\t\t\t{\n\t\t\t\theight          : '30%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level4' :\n\t\t\t{\n\t\t\t\theight          : '40%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level5' :\n\t\t\t{\n\t\t\t\theight          : '50%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level6' :\n\t\t\t{\n\t\t\t\theight          : '60%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level7' :\n\t\t\t{\n\t\t\t\theight          : '70%',\n\t\t\t\tbackgroundColor : 'rgba(255, 100, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level8' :\n\t\t\t{\n\t\t\t\theight          : '80%',\n\t\t\t\tbackgroundColor : 'rgba(255, 60, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level9' :\n\t\t\t{\n\t\t\t\theight          : '90%',\n\t\t\t\tbackgroundColor : 'rgba(255, 30, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level10' :\n\t\t\t{\n\t\t\t\theight          : '100%',\n\t\t\t\tbackgroundColor : 'rgba(255, 0, 0, 0.65)'\n\t\t\t}\n\t\t},\n\t\tvolumeSmall :\n\t\t{\n\t\t\tfloat          : 'right',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\twidth          : '1vmin',\n\t\t\tposition       : 'relative',\n\t\t\tbackgroundSize : '75%'\n\t\t},\n\t\tsmallBar :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tbackgroundSize     : '75%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\twidth              : 3,\n\t\t\tborderRadius       : 2,\n\t\t\ttransitionDuration : '0.25s',\n\t\t\tposition           : 'absolute',\n\t\t\ttop                : '50%',\n\t\t\ttransform          : 'translateY(-50%)',\n\t\t\t'&.level0'         : { height: 0 },\n\t\t\t'&.level1'         : { height: '0.2vh' },\n\t\t\t'&.level2'         : { height: '0.4vh' },\n\t\t\t'&.level3'         : { height: '0.6vh' },\n\t\t\t'&.level4'         : { height: '0.8vh' },\n\t\t\t'&.level5'         : { height: '1.0vh' },\n\t\t\t'&.level6'         : { height: '1.2vh' },\n\t\t\t'&.level7'         : { height: '1.4vh' },\n\t\t\t'&.level8'         : { height: '1.6vh' },\n\t\t\t'&.level9'         : { height: '1.8vh' },\n\t\t\t'&.level10'        : { height: '2.0vh' }\n\t\t}\n\t});\n\nconst Volume = (props) =>\n{\n\tconst {\n\t\tsmall,\n\t\tvolume,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={small ? classes.volumeSmall : classes.volumeLarge}>\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tsmall ? classes.smallBar : classes.largeBar, `level${volume}`\n\t\t\t\t)}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nVolume.propTypes =\n{\n\tsmall   : PropTypes.bool,\n\tvolume  : PropTypes.number,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, props) =>\n{\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tif (state.peerVolumes[props.id]>state.settings.noiseThreshold)\n\t\t{\n\t\t\treturn {\n\t\t\t\tvolume : Math.round((state.peerVolumes[props.id]+100) / 10)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn { volume: 0 };\n\t\t}\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default connect(\n\tmakeMapStateToProps\n)(withStyles(styles)(Volume));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tparticipantListSelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport PropTypes from 'prop-types';\nimport { Flipper, Flipped } from 'react-flip-toolkit';\nimport { FormattedMessage } from 'react-intl';\nimport ListPeer from './ListPeer';\nimport ListMe from './ListMe';\nimport ListModerator from './ListModerator';\nimport Volume from '../../Containers/Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth     : '100%',\n\t\t\toverflowY : 'auto',\n\t\t\tpadding   : theme.spacing(1)\n\t\t},\n\t\tlist :\n\t\t{\n\t\t\tlistStyleType   : 'none',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tlistItem :\n\t\t{\n\t\t\twidth        : '100%',\n\t\t\toverflow     : 'hidden',\n\t\t\tcursor       : 'pointer',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(55, 126, 255, 1)'\n\t\t\t},\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tborderBottom : '1px solid #CBCBCB'\n\t\t\t}\n\t\t}\n\t});\n\nclass ParticipantList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tadvancedMode,\n\t\t\tisModerator,\n\t\t\tparticipants,\n\t\t\tspotlights,\n\t\t\tselectedPeerId,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ isModerator &&\n\t\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<ListModerator />\n\t\t\t\t\t</ul>\n\t\t\t\t}\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='Me'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<ListMe />\n\t\t\t\t</ul>\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.participants'\n\t\t\t\t\t\t\tdefaultMessage='Participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<Flipper\n\t\t\t\t\t\tflipKey={participants}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ participants.map((peer) => (\n\t\t\t\t\t\t\t<Flipped key={peer.id} flipId={peer.id}>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={peer.id}\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.listItem, {\n\t\t\t\t\t\t\t\t\t\tselected : peer.id === selectedPeerId\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peer.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ spotlights.includes(peer.id) ?\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t\tspotlight\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Volume small id={peer.id} />\n\t\t\t\t\t\t\t\t\t\t</ListPeer>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</Flipped>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flipper>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nParticipantList.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tparticipants   : PropTypes.array,\n\tspotlights     : PropTypes.array,\n\tselectedPeerId : PropTypes.string,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_ROOM);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tisModerator    : hasPermission(state),\n\t\t\tparticipants   : participantListSelector(state),\n\t\t\tspotlights     : state.room.spotlights,\n\t\t\tselectedPeerId : state.room.selectedPeerId\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst ParticipantListContainer = withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ParticipantList)));\n\nexport default ParticipantListContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { raisedHandsSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl } from 'react-intl';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\nimport Chat from './Chat/Chat';\nimport FileSharing from './FileSharing/FileSharing';\nimport ParticipantList from './ParticipantList/ParticipantList';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst tabs =\n[\n\t'chat',\n\t'files',\n\t'users'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\tappBar :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row'\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst MeetingDrawer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tcurrentToolTab,\n\t\tunreadMessages,\n\t\tunreadFiles,\n\t\traisedHands,\n\t\tcloseDrawer,\n\t\tsetToolTab,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar\n\t\t\t\tposition='static'\n\t\t\t\tcolor='default'\n\t\t\t\tclassName={classes.appBar}\n\t\t\t>\n\t\t\t\t<Tabs\n\t\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\t\tvalue={tabs.indexOf(currentToolTab)}\n\t\t\t\t\tonChange={(event, value) => setToolTab(tabs[value])}\n\t\t\t\t\tindicatorColor='primary'\n\t\t\t\t\ttextColor='primary'\n\t\t\t\t\tvariant='fullWidth'\n\t\t\t\t>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadMessages}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.chat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Chat'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadFiles}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.filesharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'File sharing'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={raisedHands}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Tabs>\n\t\t\t\t<IconButton onClick={closeDrawer}>\n\t\t\t\t\t{theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n\t\t\t\t</IconButton>\n\t\t\t</AppBar>\n\t\t\t{currentToolTab === 'chat' && <Chat />}\n\t\t\t{currentToolTab === 'files' && <FileSharing />}\n\t\t\t{currentToolTab === 'users' && <ParticipantList />}\n\t\t</div>\n\t);\n};\n\nMeetingDrawer.propTypes =\n{\n\tcurrentToolTab : PropTypes.string.isRequired,\n\tsetToolTab     : PropTypes.func.isRequired,\n\tunreadMessages : PropTypes.number.isRequired,\n\tunreadFiles    : PropTypes.number.isRequired,\n\traisedHands    : PropTypes.number.isRequired,\n\tcloseDrawer    : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired,\n\ttheme          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tcurrentToolTab : state.toolarea.currentToolTab,\n\t\tunreadMessages : state.toolarea.unreadMessages,\n\t\tunreadFiles    : state.toolarea.unreadFiles,\n\t\traisedHands    : raisedHandsSelector(state)\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetToolTab : toolareaActions.setToolTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(MeetingDrawer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RIEInput } from 'riek';\n\nexport default class EditableInput extends React.Component\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\tvalue,\n\t\t\tpropName,\n\t\t\tclassName,\n\t\t\tclassLoading,\n\t\t\tclassInvalid,\n\t\t\teditProps,\n\t\t\tonChange\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<RIEInput\n\t\t\t\tvalue={value}\n\t\t\t\tpropName={propName}\n\t\t\t\tclassName={className}\n\t\t\t\tclassLoading={classLoading}\n\t\t\t\tclassInvalid={classInvalid}\n\t\t\t\tshouldBlockWhileLoading\n\t\t\t\teditProps={editProps}\n\t\t\t\tchange={(data) => onChange(data)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.value === this.props.value)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n}\n\nEditableInput.propTypes =\n{\n\tvalue        : PropTypes.string,\n\tpropName     : PropTypes.string.isRequired,\n\tclassName    : PropTypes.string,\n\tclassLoading : PropTypes.string,\n\tclassInvalid : PropTypes.string,\n\teditProps    : PropTypes.any,\n\tonChange     : PropTypes.func.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport EditableInput from '../Controls/EditableInput';\nimport Logger from '../../Logger';\nimport { yellow, orange, red } from '@material-ui/core/colors';\nimport SignalCellularOffIcon from '@material-ui/icons/SignalCellularOff';\nimport SignalCellular0BarIcon from '@material-ui/icons/SignalCellular0Bar';\nimport SignalCellular1BarIcon from '@material-ui/icons/SignalCellular1Bar';\nimport SignalCellular2BarIcon from '@material-ui/icons/SignalCellular2Bar';\nimport SignalCellular3BarIcon from '@material-ui/icons/SignalCellular3Bar';\n\nconst logger = new Logger('VideoView');\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'cover',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'var(--peer-video-bg-color)',\n\t\t\t'&.isMe'           :\n\t\t\t{\n\t\t\t\ttransform : 'scaleX(-1)'\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t},\n\t\t\t'&.contain' :\n\t\t\t{\n\t\t\t\tobjectFit       : 'contain',\n\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 1)'\n\t\t\t}\n\t\t},\n\t\tinfo :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'space-between'\n\t\t},\n\t\tmedia :\n\t\t{\n\t\t\tdisplay            : 'flex',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s'\n\t\t},\n\t\tbox :\n\t\t{\n\t\t\tpadding      : theme.spacing(0.5),\n\t\t\tborderRadius : 2,\n\t\t\tuserSelect   : 'none',\n\t\t\tmargin       : 0,\n\t\t\tcolor        : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize     : '0.8em',\n\n\t\t\t'&.left' :\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.25)',\n\t\t\t\t\tdisplay         : 'grid',\n\t\t\t\t\tgap             : '1px 5px',\n\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tgridTemplateAreas : '\\\n\t\t\t\t\"AcodL\t\tAcod\tAcod\tAcod\tAcod\" \\\n\t\t\t\t\t\"VcodL\t\tVcod\tVcod\tVcod\tVcod\" \\\n\t\t\t\t\t\"ResL\t\tRes\t\tRes\t\tRes\t\tRes\" \\\n\t\t\t\t\t\"RecvL\t\tRecvBps RecvBps RecvSum RecvSum\" \\\n\t\t\t\t\t\"SendL\t\tSendBps SendBps SendSum SendSum\" \\\n\t\t\t\t\t\"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc\" \\\n\t\t\t\t\t\"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv\" \\\n\t\t\t\t\t\"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr\" \\\n\t\t\t\t\t\"STLprefL\tSTLpref STLpref STLpref STLpref\"',\n\n\t\t\t\t\t'& .AcodL'    : { gridArea: 'AcodL' },\n\t\t\t\t\t'& .Acod'     : { gridArea: 'Acod' },\n\t\t\t\t\t'& .VcodL'    : { gridArea: 'VcodL' },\n\t\t\t\t\t'& .Vcod'     : { gridArea: 'Vcod' },\n\t\t\t\t\t'& .ResL'     : { gridArea: 'ResL' },\n\t\t\t\t\t'& .Res'      : { gridArea: 'Res' },\n\t\t\t\t\t'& .RecvL'    : { gridArea: 'RecvL' },\n\t\t\t\t\t'& .RecvBps'  : { gridArea: 'RecvBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .RecvSum'  : { gridArea: 'RecvSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendL'    : { gridArea: 'SendL' },\n\t\t\t\t\t'& .SendBps'  : { gridArea: 'SendBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendSum'  : { gridArea: 'SendSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .IPlocL'   : { gridArea: 'IPlocL' },\n\t\t\t\t\t'& .IPloc'    : { gridArea: 'IPloc' },\n\t\t\t\t\t'& .IPsrvL'   : { gridArea: 'IPsrvL' },\n\t\t\t\t\t'& .IPsrv'    : { gridArea: 'IPsrv' },\n\t\t\t\t\t'& .STLcurrL' : { gridArea: 'STLcurrL' },\n\t\t\t\t\t'& .STLcurr'  : { gridArea: 'STLcurr' },\n\t\t\t\t\t'& .STLprefL' : { gridArea: 'STLprefL' },\n\t\t\t\t\t'& .STLpref'  : { gridArea: 'STLpref' }\n\n\t\t\t\t},\n\t\t\t'&.right' :\n\t\t\t{\n\t\t\t\tmarginLeft : 'auto',\n\t\t\t\twidth      : 30\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t}\n\t\t},\n\t\tpeer :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdisplayNameEdit :\n\t\t{\n\t\t\tfontSize        : 14,\n\t\t\tfontWeight      : 400,\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.85)',\n\t\t\tborder          : 'none',\n\t\t\tborderBottom    : '1px solid #aeff00',\n\t\t\tbackgroundColor : 'transparent'\n\t\t},\n\t\tdisplayNameStatic :\n\t\t{\n\t\t\tuserSelect : 'none',\n\t\t\tcursor     : 'text',\n\t\t\tfontSize   : 14,\n\t\t\tfontWeight : 400,\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.85)',\n\t\t\t'&:hover'  :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgb(174, 255, 0, 0.25)'\n\t\t\t}\n\t\t}\n\t});\n\nclass VideoView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state =\n\t\t{\n\t\t\tvideoWidth  : null,\n\t\t\tvideoHeight : null\n\t\t};\n\n\t\t// Latest received audio track\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\t// Periodic timer for showing video resolution.\n\t\tthis._videoResolutionTimer = null;\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tisMe,\n\t\t\tisScreen,\n\t\t\tisExtraVideo,\n\t\t\tshowQuality,\n\t\t\tdisplayName,\n\t\t\tshowPeerInfo,\n\t\t\tvideoContain,\n\t\t\tadvancedMode,\n\t\t\tvideoVisible,\n\t\t\tvideoMultiLayer,\n\t\t\taudioScore,\n\t\t\tvideoScore,\n\t\t\tconsumerCurrentSpatialLayer,\n\t\t\tconsumerCurrentTemporalLayer,\n\t\t\tconsumerPreferredSpatialLayer,\n\t\t\tconsumerPreferredTemporalLayer,\n\t\t\taudioCodec,\n\t\t\tvideoCodec,\n\t\t\tonChangeDisplayName,\n\t\t\tchildren,\n\t\t\tclasses,\n\t\t\tnetInfo\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tvideoWidth,\n\t\t\tvideoHeight\n\t\t} = this.state;\n\n\t\tlet quality = null;\n\n\t\tif (showQuality)\n\t\t{\n\t\t\tquality = <SignalCellularOffIcon style={{ color: red[500] }}/>;\n\n\t\t\tif (videoScore || audioScore)\n\t\t\t{\n\t\t\t\tconst score = videoScore ? videoScore : audioScore;\n\n\t\t\t\tswitch (isMe ? score.score : score.producerScore)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular0BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular1BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 6:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular2BarIcon style={{ color: orange[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 9:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular3BarIcon style={{ color: yellow[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = null;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t<div className={classes.media}>\n\t\t\t\t\t\t<div className={classnames(classes.box, 'left', { hidden: !advancedMode })}>\n\t\t\t\t\t\t\t{ audioCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'AcodL'}>Acod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Acod'}>\n\t\t\t\t\t\t\t\t\t\t{audioCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'VcodL'}>Vcod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Vcod'}>\n\t\t\t\t\t\t\t\t\t\t{videoCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ (videoVisible && videoWidth !== null) &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'ResL'}>Res: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Res'}>\n\t\t\t\t\t\t\t\t\t\t{videoWidth}x{videoHeight}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ isMe && !isScreen && !isExtraVideo &&\n\t\t\t\t\t\t\t\t\t(netInfo.recv && netInfo.send && netInfo.send.iceSelectedTuple) &&\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvL'}>Recv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.sendBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.bytesSent/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'SendL'}>Send: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.recvBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.bytesReceived/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPlocL'}>IPloc: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPloc'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.remoteIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrvL'}>IPsrv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrv'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.localIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoMultiLayer &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurrL'}>STLcurr: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurr'}>{consumerCurrentSpatialLayer} {consumerCurrentTemporalLayer}</span>\n\n\t\t\t\t\t\t\t\t\t<span className={'STLprefL'}>STLpref: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLpref'}>{consumerPreferredSpatialLayer} {consumerPreferredTemporalLayer}</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ showQuality &&\n\t\t\t\t\t\t\t<div className={classnames(classes.box, 'right')}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tquality\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{ showPeerInfo &&\n\t\t\t\t\t\t<div className={classes.peer}>\n\t\t\t\t\t\t\t<div className={classes.box}>\n\t\t\t\t\t\t\t\t{ isMe ?\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<EditableInput\n\t\t\t\t\t\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t\t\t\t\t\t\tpropName='newDisplayName'\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.displayNameEdit}\n\t\t\t\t\t\t\t\t\t\t\tclassLoading='loading'\n\t\t\t\t\t\t\t\t\t\t\tclassInvalid='invalid'\n\t\t\t\t\t\t\t\t\t\t\tshouldBlockWhileLoading\n\t\t\t\t\t\t\t\t\t\t\teditProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tmaxLength   : 30,\n\t\t\t\t\t\t\t\t\t\t\t\tautoCorrect : 'off',\n\t\t\t\t\t\t\t\t\t\t\t\tspellCheck  : false\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t({ newDisplayName }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeDisplayName(newDisplayName)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<span className={classes.displayNameStatic}>\n\t\t\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<video\n\t\t\t\t\tref='videoElement'\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\t'isMe'  : isMe && !isScreen,\n\t\t\t\t\t\tcontain : videoContain\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t<audio\n\t\t\t\t\tref='audioElement'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={isMe}\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack, audioTrack);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tclearInterval(this._videoResolutionTimer);\n\n\t\tconst { videoElement } = this.refs;\n\n\t\tif (videoElement)\n\t\t{\n\t\t\tvideoElement.oncanplay = null;\n\t\t\tvideoElement.onplay = null;\n\t\t\tvideoElement.onpause = null;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack, audioTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack, audioTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack && this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\t\tthis._audioTrack = audioTrack;\n\n\t\tclearInterval(this._videoResolutionTimer);\n\t\tthis._hideVideoResolution();\n\n\t\tconst { videoElement, audioElement } = this.refs;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\n\t\t\tvideoElement.srcObject = stream;\n\n\t\t\tvideoElement.oncanplay = () => this.setState({ videoCanPlay: true });\n\n\t\t\tvideoElement.onplay = () =>\n\t\t\t{\n\t\t\t\taudioElement.play()\n\t\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t\t};\n\n\t\t\tvideoElement.play()\n\t\t\t\t.catch((error) => logger.warn('videoElement.play() [error:\"%o]', error));\n\n\t\t\tthis._showVideoResolution();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideoElement.srcObject = null;\n\t\t}\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(audioTrack);\n\t\t\taudioElement.srcObject = stream;\n\n\t\t\taudioElement.play()\n\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudioElement.srcObject = null;\n\t\t}\n\t}\n\n\t_showVideoResolution()\n\t{\n\t\tthis._videoResolutionTimer = setInterval(() =>\n\t\t{\n\t\t\tconst { videoWidth, videoHeight } = this.state;\n\t\t\tconst { videoElement } = this.refs;\n\n\t\t\t// Don't re-render if nothing changed.\n\t\t\tif (\n\t\t\t\tvideoElement.videoWidth === videoWidth &&\n\t\t\t\tvideoElement.videoHeight === videoHeight\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tvideoWidth  : videoElement.videoWidth,\n\t\t\t\t\tvideoHeight : videoElement.videoHeight\n\t\t\t\t});\n\t\t}, 1000);\n\t}\n\n\t_hideVideoResolution()\n\t{\n\t\tthis.setState({ videoWidth: null, videoHeight: null });\n\t}\n}\n\nVideoView.propTypes =\n{\n\tisMe                           : PropTypes.bool,\n\tisScreen                       : PropTypes.bool,\n\tisExtraVideo   \t               : PropTypes.bool,\n\tshowQuality                    : PropTypes.bool,\n\tdisplayName                    : PropTypes.string,\n\tshowPeerInfo                   : PropTypes.bool,\n\tvideoContain                   : PropTypes.bool,\n\tadvancedMode                   : PropTypes.bool,\n\tvideoTrack                     : PropTypes.any,\n\taudioTrack                     : PropTypes.any,\n\tvideoVisible                   : PropTypes.bool.isRequired,\n\tconsumerSpatialLayers          : PropTypes.number,\n\tconsumerTemporalLayers         : PropTypes.number,\n\tconsumerCurrentSpatialLayer    : PropTypes.number,\n\tconsumerCurrentTemporalLayer   : PropTypes.number,\n\tconsumerPreferredSpatialLayer  : PropTypes.number,\n\tconsumerPreferredTemporalLayer : PropTypes.number,\n\tvideoMultiLayer                : PropTypes.bool,\n\taudioScore                     : PropTypes.any,\n\tvideoScore                     : PropTypes.any,\n\taudioCodec                     : PropTypes.string,\n\tvideoCodec                     : PropTypes.string,\n\tonChangeDisplayName            : PropTypes.func,\n\tchildren                       : PropTypes.object,\n\tclasses                        : PropTypes.object.isRequired,\n\tnetInfo               \t\t\t\t\t\t   : PropTypes.object\n};\n\nexport default withStyles(styles)(VideoView);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport * as roomActions from '../../actions/roomActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport NewWindowIcon from '@material-ui/icons/OpenInNew';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 4\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 3\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'flex-end',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 0.3s',\n\t\t\ttouchAction     : 'none',\n\t\t\t'&.hover'       :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 20,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst Peer = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tadvancedMode,\n\t\tpeer,\n\t\tactiveSpeaker,\n\t\tbrowser,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\textraVideoConsumers,\n\t\ttoggleConsumerFullscreen,\n\t\ttoggleConsumerWindow,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\twindowConsumer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\tconst rootStyle =\n\t{\n\t\t'margin' : spacing,\n\t\t...style\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={rootStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor={micEnabled ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioTrack={micConsumer && micConsumer.track}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ extraVideoConsumers.map((consumer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={consumer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!screenVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === screenConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(screenConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!screenVisible}\n\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(screenConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nPeer.propTypes =\n{\n\troomClient               : PropTypes.any.isRequired,\n\tadvancedMode             : PropTypes.bool,\n\tpeer                     : appPropTypes.Peer,\n\tmicConsumer              : appPropTypes.Consumer,\n\twebcamConsumer           : appPropTypes.Consumer,\n\tscreenConsumer           : appPropTypes.Consumer,\n\textraVideoConsumers      : PropTypes.arrayOf(appPropTypes.Consumer),\n\twindowConsumer           : PropTypes.string,\n\tactiveSpeaker            : PropTypes.bool,\n\tbrowser                  : PropTypes.object.isRequired,\n\tspacing                  : PropTypes.number,\n\tstyle                    : PropTypes.object,\n\tsmallContainer           : PropTypes.bool,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoggleConsumerWindow     : PropTypes.func.isRequired,\n\tclasses                  : PropTypes.object.isRequired,\n\ttheme                    : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer           : state.peers[id],\n\t\t\t...getPeerConsumers(state, id),\n\t\t\twindowConsumer : state.room.windowConsumer,\n\t\t\tactiveSpeaker  : id === state.room.activeSpeakerId,\n\t\t\tbrowser        : state.me.browser\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t},\n\t\ttoggleConsumerWindow : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerWindow(consumer.id));\n\t\t}\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.windowConsumer === next.room.windowConsumer &&\n\t\t\t\tprev.me.browser === next.me.browser\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Peer)));\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tmeProducersSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin        : theme.spacing(1),\n\t\t\tpointerEvents : 'auto'\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tmeTag :\n\t\t{\n\t\t\tposition   : 'absolute',\n\t\t\tfloat      : 'left',\n\t\t\ttop        : '50%',\n\t\t\tleft       : '50%',\n\t\t\ttransform  : 'translate(-50%, -50%)',\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.5)',\n\t\t\tfontSize   : '7em',\n\t\t\tzIndex     : 30,\n\t\t\tmargin     : 0,\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t'&.hover'  :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t},\n\t\t\t'&.smallContainer' :\n\t\t\t{\n\t\t\t\tfontSize : '3em'\n\t\t\t}\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'flex-end',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tzIndex         : 21,\n\t\t\ttouchAction    : 'none',\n\t\t\tpointerEvents  : 'none',\n\t\t\t'&.hide'       :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t\topacity    : 0\n\t\t\t},\n\t\t\t'&.hover' :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tptt :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\tfloat           : 'left',\n\t\t\ttop             : '25%',\n\t\t\tleft            : '50%',\n\t\t\ttransform       : 'translate(-50%, 0%)',\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize        : '1.3em',\n\t\t\tbackgroundColor : 'rgba(245, 0, 87, 0.70)',\n\t\t\tmargin          : '4px',\n\t\t\tpadding         : theme.spacing(2),\n\t\t\tzIndex          : 1200,\n\t\t\tborderRadius    : '20px',\n\t\t\ttextAlign       : 'center',\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 1s ease',\n\t\t\tpointerEvents   : 'none',\n\t\t\t'&.enabled'     :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s',\n\t\t\t\topacity    : 1\n\t\t\t}\n\t\t}\n\t});\n\nconst Me = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tactiveSpeaker,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\tadvancedMode,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\textraVideoProducers,\n\t\tcanShareScreen,\n\t\ttransports,\n\t\tnoiseVolume,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamProducer) &&\n\t\t!webcamProducer.locallyPaused &&\n\t\t!webcamProducer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenProducer) &&\n\t\t!screenProducer.locallyPaused &&\n\t\t!screenProducer.remotelyPaused\n\t);\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\tconst [\n\t\tscreenShareTooltipOpen,\n\t\tscreenShareTooltipSetOpen\n\t] = React.useState(false);\n\n\tconst screenShareTooltipHandleClose = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(false);\n\t};\n\n\tconst screenShareTooltipHandleOpen = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(true);\n\t};\n\n\tif (screenState === 'off' && me.screenShareInProgress && screenShareTooltipOpen)\n\t{\n\t\tscreenShareTooltipHandleClose();\n\t}\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\tlet audioScore = null;\n\n\tif (micProducer && micProducer.score)\n\t{\n\t\taudioScore =\n\t\t\tmicProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tlet videoScore = null;\n\n\tif (webcamProducer && webcamProducer.score)\n\t{\n\t\tvideoScore =\n\t\t\twebcamProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tlet poll;\n\n\t\tconst interval = 1000;\n\n\t\tif (advancedMode)\n\t\t{\n\t\t\tpoll = setInterval(() => roomClient.getTransportStats(), interval);\n\t\t}\n\n\t\treturn () => clearInterval(poll);\n\t}, [ roomClient, advancedMode ]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\n\t\t\t\t{ me.browser.platform !== 'mobile' && smallContainer &&\n\t\t\t\t<div className={classnames(\n\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t{ me.browser.platform !== 'mobile' && !smallContainer &&\n\t\t\t\t\t\t<div className={classnames(\n\t\t\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<p className={\n\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t\t{ !settings.buttonControlBar &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<Tooltip title={micTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmicState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted ? 'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ opacity: noiseVolume }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted? 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ opacity: noiseVolume }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: { opacity: 1 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip open={screenShareTooltipOpen}\n\t\t\t\t\t\t\t\t\t\tonClose={screenShareTooltipHandleClose}\n\t\t\t\t\t\t\t\t\t\tonOpen={screenShareTooltipHandleOpen}\n\t\t\t\t\t\t\t\t\t\ttitle={screenTip} placement='left'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tisMe\n\t\t\t\t\t\tVideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tvideoTrack={webcamProducer && webcamProducer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micProducer && micProducer.codec}\n\t\t\t\t\t\tvideoCodec={webcamProducer && webcamProducer.codec}\n\t\t\t\t\t\tnetInfo={transports && transports}\n\t\t\t\t\t\taudioScore={audioScore}\n\t\t\t\t\t\tvideoScore={videoScore}\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ micState === 'muted' ? null : <Volume id={me.id} /> }\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ extraVideoProducers.map((producer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={producer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\t\tisExtraVideo\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tvideoTrack={producer && producer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={producer && producer.codec}\n\t\t\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{ screenProducer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\tisScreen\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tvideoTrack={screenProducer && screenProducer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenProducer && screenProducer.codec}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nMe.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tme                  : appPropTypes.Me.isRequired,\n\tsettings            : PropTypes.object,\n\tactiveSpeaker       : PropTypes.bool,\n\tmicProducer         : appPropTypes.Producer,\n\twebcamProducer      : appPropTypes.Producer,\n\tscreenProducer      : appPropTypes.Producer,\n\textraVideoProducers : PropTypes.arrayOf(appPropTypes.Producer),\n\tspacing             : PropTypes.number,\n\tstyle               : PropTypes.object,\n\tsmallContainer      : PropTypes.bool,\n\tcanShareScreen      : PropTypes.bool.isRequired,\n\tnoiseVolume         : PropTypes.number,\n\tclasses             : PropTypes.object.isRequired,\n\ttheme               : PropTypes.object.isRequired,\n\ttransports          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_SCREEN);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tlet volume;\n\n\t\t// noiseVolume under threshold\n\t\tif (state.peerVolumes[state.me.id] < state.settings.noiseThreshold)\n\t\t{\n\t\t\t// noiseVolume mapped to range 0.5 ... 1 (threshold switch)\n\t\t\tvolume = 1 + ((Math.abs(state.peerVolumes[state.me.id] -\n\t\t\t\tstate.settings.noiseThreshold) / (-120 -\n\t\t\t\tstate.settings.noiseThreshold)));\n\t\t}\n\t\t// noiseVolume over threshold: no noise but voice\n\t\telse { volume = 0; }\n\n\t\treturn {\n\t\t\tme             : state.me,\n\t\t\t...meProducersSelector(state),\n\t\t\tsettings       : state.settings,\n\t\t\tactiveSpeaker  : state.me.id === state.room.activeSpeakerId,\n\t\t\tcanShareScreen : hasPermission(state),\n\t\t\ttransports     : state.transports,\n\t\t\tnoiseVolume    : volume\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tMath.round(prev.peerVolumes[prev.me.id]) ===\n\t\t\t\t\tMath.round(next.peerVolumes[next.me.id]) &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.transports === next.transports\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Me)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tspotlightPeersSelector,\n\tvideoBoxesSelector\n} from '../Selectors';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Peer from '../Containers/Peer';\nimport Me from '../Containers/Me';\n\nconst RATIO = 1.334;\nconst PADDING = 60;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tflexWrap       : 'wrap',\n\t\t\toverflow       : 'hidden',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\talignContent   : 'center'\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tbuttonControlBar :\n\t\t{\n\t\t\tpaddingLeft                    : 60,\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tpaddingLeft : 0\n\t\t\t}\n\t\t}\n\t});\n\nclass Democratic extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.peersRef = React.createRef();\n\t}\n\n\tupdateDimensions = () =>\n\t{\n\t\tif (!this.peersRef.current)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst n = this.props.boxes;\n\n\t\tif (n === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst width =\n\t\t\tthis.peersRef.current.clientWidth - (this.props.buttonControlBar ? PADDING : 0);\n\t\tconst height =\n\t\t\tthis.peersRef.current.clientHeight -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING : 0);\n\n\t\tlet x, y, space;\n\n\t\tfor (let rows = 1; rows < 100; rows = rows + 1)\n\t\t{\n\t\t\tx = width / Math.ceil(n / rows);\n\t\t\ty = x / RATIO;\n\t\t\tif (height < (y * rows))\n\t\t\t{\n\t\t\t\ty = height / rows;\n\t\t\t\tx = RATIO * y;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tspace = height - (y * (rows));\n\t\t\tif (space < y)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (Math.ceil(this.state.peerWidth) !== Math.ceil(0.94 * x))\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tpeerWidth  : 0.94 * x,\n\t\t\t\tpeerHeight : 0.94 * y\n\t\t\t});\n\t\t}\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t\tthis.updateDimensions();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tadvancedMode,\n\t\t\tspotlightsPeers,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tbuttonControlBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst style =\n\t\t{\n\t\t\t'width'  : this.state.peerWidth ? this.state.peerWidth : 0,\n\t\t\t'height' : this.state.peerHeight ? this.state.peerHeight : 0\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar,\n\t\t\t\t\tbuttonControlBar ? classes.buttonControlBar : null\n\t\t\t\t)}\n\t\t\t\tref={this.peersRef}\n\t\t\t>\n\t\t\t\t<Me\n\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\tspacing={6}\n\t\t\t\t\tstyle={style}\n\t\t\t\t/>\n\t\t\t\t{ spotlightsPeers.map((peer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\tkey={peer}\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={peer}\n\t\t\t\t\t\t\tspacing={6}\n\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDemocratic.propTypes =\n{\n\tadvancedMode     : PropTypes.bool,\n\tboxes            : PropTypes.number,\n\tspotlightsPeers  : PropTypes.array.isRequired,\n\ttoolbarsVisible  : PropTypes.bool.isRequired,\n\tpermanentTopBar  : PropTypes.bool.isRequired,\n\tbuttonControlBar : PropTypes.bool.isRequired,\n\ttoolAreaOpen     : PropTypes.bool.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tboxes            : videoBoxesSelector(state),\n\t\tspotlightsPeers  : spotlightPeersSelector(state),\n\t\ttoolbarsVisible  : state.room.toolbarsVisible,\n\t\tpermanentTopBar  : state.settings.permanentTopBar,\n\t\tbuttonControlBar : state.settings.buttonControlBar,\n\t\ttoolAreaOpen     : state.toolarea.toolAreaOpen\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Democratic));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.webcam'         :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition   : 'relative',\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst SpeakerPeer = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tspacing,\n\t\tstyle,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam'\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen')}\n\t\t\t\t>\n\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo} style={style}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ screenVisible &&\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nSpeakerPeer.propTypes =\n{\n\tadvancedMode   : PropTypes.bool,\n\tpeer           : appPropTypes.Peer,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tspacing        : PropTypes.number,\n\tstyle          : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\treturn {\n\t\tpeer : state.peers[id],\n\t\t...getPeerConsumers(state, id)\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(SpeakerPeer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n\tvideoBoxesSelector\n} from '../Selectors';\nimport { withRoomContext } from '../../RoomContext';\nimport Me from '../Containers/Me';\nimport Peer from '../Containers/Peer';\nimport SpeakerPeer from '../Containers/SpeakerPeer';\nimport Grid from '@material-ui/core/Grid';\n\nconst RATIO = 1.334;\nconst PADDING_V = 40;\nconst PADDING_H = 0;\nconst FILMSTRING_PADDING_V = 10;\nconst FILMSTRING_PADDING_H = 0;\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight              : '100%',\n\t\t\twidth               : '100%',\n\t\t\tdisplay             : 'grid',\n\t\t\toverflow            : 'hidden',\n\t\t\tgridTemplateColumns : '1fr',\n\t\t\tgridTemplateRows    : '1fr 0.25fr'\n\t\t},\n\t\tspeaker :\n\t\t{\n\t\t\tgridArea       : '1 / 1 / 1 / 1',\n\t\t\tdisplay        : 'flex',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tfilmStrip :\n\t\t{\n\t\t\tgridArea : '2 / 1 / 2 / 1'\n\t\t},\n\t\tfilmItem :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tborder       : 'var(--peer-border)',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t},\n\t\t\t'&.active' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t}\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t}\n\t});\n\nclass Filmstrip extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.rootContainer = React.createRef();\n\n\t\tthis.activePeerContainer = React.createRef();\n\n\t\tthis.filmStripContainer = React.createRef();\n\t}\n\n\tstate = {\n\t\tlastSpeaker : null\n\t};\n\n\t// Find the name of the peer which is currently speaking. This is either\n\t// the latest active speaker, or the manually selected peer, or, if no\n\t// person has spoken yet, the first peer in the list of peers.\n\tgetActivePeerId = () =>\n\t{\n\t\tconst {\n\t\t\tselectedPeerId,\n\t\t\tpeers\n\t\t} = this.props;\n\n\t\tconst { lastSpeaker } = this.state;\n\n\t\tif (selectedPeerId && peers[selectedPeerId])\n\t\t{\n\t\t\treturn this.props.selectedPeerId;\n\t\t}\n\n\t\tif (lastSpeaker && peers[lastSpeaker])\n\t\t{\n\t\t\treturn this.state.lastSpeaker;\n\t\t}\n\n\t\tconst peerIds = Object.keys(peers);\n\n\t\tif (peerIds.length > 0)\n\t\t{\n\t\t\treturn peerIds[0];\n\t\t}\n\t};\n\n\tisSharingCamera = (peerId) => this.props.peers[peerId] &&\n\t\tthis.props.peers[peerId].consumers.some((consumer) =>\n\t\t\tthis.props.consumers[consumer].source === 'screen');\n\n\tupdateDimensions = () =>\n\t{\n\t\tconst newState = {};\n\n\t\tconst root = this.rootContainer.current;\n\n\t\tif (!root)\n\t\t\treturn;\n\n\t\tconst availableWidth = root.clientWidth;\n\t\t// Grid is:\n\t\t// 4/5 speaker\n\t\t// 1/5 filmstrip\n\t\tconst availableSpeakerHeight = (root.clientHeight * 0.8) -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING_V : PADDING_H);\n\n\t\tconst availableFilmstripHeight = root.clientHeight * 0.2;\n\n\t\tconst speaker = this.activePeerContainer.current;\n\n\t\tif (speaker)\n\t\t{\n\t\t\tlet speakerWidth = (availableWidth - PADDING_H);\n\n\t\t\tlet speakerHeight = speakerWidth / RATIO;\n\n\t\t\tif (this.isSharingCamera(this.getActivePeerId()))\n\t\t\t{\n\t\t\t\tspeakerWidth /= 2;\n\t\t\t\tspeakerHeight = speakerWidth / RATIO;\n\t\t\t}\n\n\t\t\tif (speakerHeight > (availableSpeakerHeight - PADDING_V))\n\t\t\t{\n\t\t\t\tspeakerHeight = (availableSpeakerHeight - PADDING_V);\n\t\t\t\tspeakerWidth = speakerHeight * RATIO;\n\t\t\t}\n\n\t\t\tnewState.speakerWidth = speakerWidth;\n\t\t\tnewState.speakerHeight = speakerHeight;\n\t\t}\n\n\t\tconst filmStrip = this.filmStripContainer.current;\n\n\t\tif (filmStrip)\n\t\t{\n\t\t\tlet filmStripHeight = availableFilmstripHeight - FILMSTRING_PADDING_V;\n\n\t\t\tlet filmStripWidth = filmStripHeight * RATIO;\n\n\t\t\tif (\n\t\t\t\t(filmStripWidth * this.props.boxes) >\n\t\t\t\t(availableWidth - FILMSTRING_PADDING_H)\n\t\t\t)\n\t\t\t{\n\t\t\t\tfilmStripWidth = (availableWidth - FILMSTRING_PADDING_H) /\n\t\t\t\t\tthis.props.boxes;\n\t\t\t\tfilmStripHeight = filmStripWidth / RATIO;\n\t\t\t}\n\n\t\t\tnewState.filmStripWidth = filmStripWidth;\n\t\t\tnewState.filmStripHeight = filmStripHeight;\n\t\t}\n\n\t\tthis.setState({\n\t\t\t...newState\n\t\t});\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.props.activeSpeakerId != null &&\n\t\t\t\tthis.props.activeSpeakerId !== this.props.myId\n\t\t\t)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({\n\t\t\t\t\tlastSpeaker : this.props.activeSpeakerId\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateDimensions();\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tpeers,\n\t\t\tmyId,\n\t\t\tadvancedMode,\n\t\t\tspotlights,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst activePeerId = this.getActivePeerId();\n\n\t\tconst speakerStyle =\n\t\t{\n\t\t\twidth  : this.state.speakerWidth,\n\t\t\theight : this.state.speakerHeight\n\t\t};\n\n\t\tconst peerStyle =\n\t\t{\n\t\t\twidth  : this.state.filmStripWidth,\n\t\t\theight : this.state.filmStripHeight\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar\n\t\t\t\t)}\n\t\t\t\tref={this.rootContainer}\n\t\t\t>\n\t\t\t\t<div className={classes.speaker} ref={this.activePeerContainer}>\n\t\t\t\t\t{ peers[activePeerId] &&\n\t\t\t\t\t\t<SpeakerPeer\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={activePeerId}\n\t\t\t\t\t\t\tstyle={speakerStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.filmStrip} ref={this.filmStripContainer}>\n\t\t\t\t\t<Grid container justify='center' spacing={0}>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\tactive : myId === activePeerId\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Me\n\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t{ Object.keys(peers).map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (spotlights.find((spotlightsElement) => spotlightsElement === peerId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Grid key={peerId} item>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={peerId}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peerId)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\t\t\t\tselected : this.props.selectedPeerId === peerId,\n\t\t\t\t\t\t\t\t\t\t\t\tactive   : peerId === activePeerId\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\t\tid={peerId}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn ('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFilmstrip.propTypes = {\n\troomClient      : PropTypes.any.isRequired,\n\tactiveSpeakerId : PropTypes.string,\n\tadvancedMode    : PropTypes.bool,\n\tpeers           : PropTypes.object.isRequired,\n\tconsumers       : PropTypes.object.isRequired,\n\tmyId            : PropTypes.string.isRequired,\n\tselectedPeerId  : PropTypes.string,\n\tspotlights      : PropTypes.array.isRequired,\n\tboxes           : PropTypes.number,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tpermanentTopBar : PropTypes.bool,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tactiveSpeakerId : state.room.activeSpeakerId,\n\t\tselectedPeerId  : state.room.selectedPeerId,\n\t\tpeers           : state.peers,\n\t\tconsumers       : state.consumers,\n\t\tmyId            : state.me.id,\n\t\tspotlights      : state.room.spotlights,\n\t\tboxes           : videoBoxesSelector(state),\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.selectedPeerId === next.room.selectedPeerId &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.me.id === next.me.id\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Filmstrip)));","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PeerAudio extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received audio track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\t\tthis._audioOutputDevice = null;\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<audio\n\t\t\t\tref='audio'\n\t\t\t\tautoPlay\n\t\t\t/>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\tthis._setTrack(audioTrack);\n\t\tthis._setOutputDevice(audioOutputDevice);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\t\tthis._setTrack(audioTrack);\n\t\t\tthis._setOutputDevice(audioOutputDevice);\n\t\t}\n\t}\n\n\t_setTrack(audioTrack)\n\t{\n\t\tif (this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._audioTrack = audioTrack;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tif (audioTrack)\n\t\t\t\tstream.addTrack(audioTrack);\n\n\t\t\taudio.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudio.srcObject = null;\n\t\t}\n\t}\n\n\t_setOutputDevice(audioOutputDevice)\n\t{\n\t\tif (this._audioOutputDevice === audioOutputDevice)\n\t\t\treturn;\n\n\t\tthis._audioOutputDevice = audioOutputDevice;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioOutputDevice && typeof audio.setSinkId === 'function')\n\t\t\taudio.setSinkId(audioOutputDevice);\n\t}\n}\n\nPeerAudio.propTypes =\n{\n\taudioTrack        : PropTypes.any,\n\taudioOutputDevice : PropTypes.string\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { passiveMicConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport PeerAudio from './PeerAudio';\n\nconst AudioPeers = (props) =>\n{\n\tconst {\n\t\tmicConsumers,\n\t\taudioOutputDevice\n\t} = props;\n\n\treturn (\n\t\t<div data-component='AudioPeers'>\n\t\t\t{\n\t\t\t\tmicConsumers.map((micConsumer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<PeerAudio\n\t\t\t\t\t\t\tkey={micConsumer.id}\n\t\t\t\t\t\t\taudioTrack={micConsumer.track}\n\t\t\t\t\t\t\taudioOutputDevice={audioOutputDevice}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nAudioPeers.propTypes =\n{\n\tmicConsumers      : PropTypes.array,\n\taudioOutputDevice : PropTypes.string\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tmicConsumers      : passiveMicConsumerSelector(state),\n\t\taudioOutputDevice : state.settings.selectedAudioOutputDevice\n\t});\n\nconst AudioPeersContainer = connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.settings.selectedAudioOutputDevice ===\n\t\t\t\tnext.settings.selectedAudioOutputDevice\n\t\t\t);\n\t\t}\n\t}\n)(AudioPeers);\n\nexport default AudioPeersContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport VideoView from './VideoView';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin',\n\t\t\topacity            : 0,\n\t\t\t'&.visible'        :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst FullScreenView = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerFullscreen,\n\t\ttoolbarsVisible,\n\t\tpermanentTopBar,\n\t\tclasses\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.controls}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.button, {\n\t\t\t\t\t\tvisible : toolbarsVisible || permanentTopBar\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<VideoView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tvideoContain\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nFullScreenView.propTypes =\n{\n\tadvancedMode             : PropTypes.bool,\n\tconsumer                 : appPropTypes.Consumer,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoolbarsVisible          : PropTypes.bool,\n\tpermanentTopBar          : PropTypes.bool,\n\tclasses                  : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tconsumer        : state.consumers[state.room.fullScreenConsumer],\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.fullScreenConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.fullScreenConsumer] &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FullScreenView));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport FullScreen from '../FullScreen';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin'\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nclass NewWindow extends React.PureComponent\n{\n\tstatic defaultProps =\n\t{\n\t\turl        : '',\n\t\tname       : 'New edutech',\n\t\ttitle      : 'New edutech',\n\t\tfeatures   : { width: '800px', height: '600px' },\n\t\tonBlock    : null,\n\t\tonUnload   : null,\n\t\tcenter     : 'parent',\n\t\tcopyStyles : true\n\t};\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(this.window.document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.window = null;\n\t\tthis.windowCheckerInterval = null;\n\t\tthis.released = false;\n\t\tthis.fullscreen = null;\n\n\t\tthis.state = {\n\t\t\tmounted    : false,\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tif (!this.state.mounted)\n\t\t\treturn null;\n\n\t\treturn ReactDOM.createPortal([\n\t\t\t<div key='newwindow' className={classes.root}>\n\t\t\t\t<div className={classes.controls}>\n\t\t\t\t\t{ this.fullscreen.fullscreenEnabled &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tonClick={this.handleToggleFullscreen}\n\t\t\t\t\t\t\tdata-tip='Fullscreen'\n\t\t\t\t\t\t\tdata-place='right'\n\t\t\t\t\t\t\tdata-type='dark'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ this.state.fullscreen ?\n\t\t\t\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<FullScreenIcon className={classes.icon} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t], this.container);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tthis.openChild();\n\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\tthis.setState({ mounted: true });\n\n\t\tthis.fullscreen = new FullScreen(this.window.document);\n\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\t}\n\n\topenChild()\n\t{\n\t\tconst {\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tname,\n\t\t\tfeatures,\n\t\t\tonBlock,\n\t\t\tcenter\n\t\t} = this.props;\n\n\t\tif (center === 'parent')\n\t\t{\n\t\t\tfeatures.left =\n\t\t\t\t(window.top.outerWidth / 2) + window.top.screenX - (features.width / 2);\n\t\t\tfeatures.top =\n\t\t\t\t(window.top.outerHeight / 2) + window.top.screenY - (features.height / 2);\n\t\t}\n\t\telse if (center === 'screen')\n\t\t{\n\t\t\tconst screenLeft =\n\t\t\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screen.left;\n\t\t\tconst screenTop =\n\t\t\t\twindow.screenTop !== undefined ? window.screenTop : window.screen.top;\n\n\t\t\tconst width = window.innerWidth\n\t\t\t\t? window.innerWidth\n\t\t\t\t: document.documentElement.clientWidth\n\t\t\t\t\t? document.documentElement.clientWidth\n\t\t\t\t\t: window.screen.width;\n\t\t\tconst height = window.innerHeight\n\t\t\t\t? window.innerHeight\n\t\t\t\t: document.documentElement.clientHeight\n\t\t\t\t\t? document.documentElement.clientHeight\n\t\t\t\t\t: window.screen.height;\n\n\t\t\tfeatures.left = (width / 2) - (features.width / 2) + screenLeft;\n\t\t\tfeatures.top = (height / 2) - (features.height / 2) + screenTop;\n\t\t}\n\n\t\tthis.window = window.open(url, name, toWindowFeatures(features));\n\n\t\tthis.windowCheckerInterval = setInterval(() =>\n\t\t{\n\t\t\tif (!this.window || this.window.closed)\n\t\t\t{\n\t\t\t\tthis.release();\n\t\t\t}\n\t\t}, 50);\n\n\t\tif (this.window)\n\t\t{\n\t\t\tthis.window.document.title = title;\n\t\t\tthis.window.document.body.appendChild(this.container);\n\n\t\t\tif (this.props.copyStyles)\n\t\t\t{\n\t\t\t\tsetTimeout(() => copyStyles(document, this.window.document), 0);\n\t\t\t}\n\n\t\t\tthis.window.addEventListener('beforeunload', () => this.release());\n\t\t}\n\t\telse if (typeof onBlock === 'function')\n\t\t{\n\t\t\tonBlock(null);\n\t\t}\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.window)\n\t\t{\n\t\t\tif (this.fullscreen && this.fullscreen.fullscreenEnabled)\n\t\t\t{\n\t\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t\t}\n\n\t\t\tthis.window.close();\n\t\t}\n\t}\n\n\trelease()\n\t{\n\t\tif (this.released)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.released = true;\n\n\t\tclearInterval(this.windowCheckerInterval);\n\n\t\tconst { onUnload } = this.props;\n\n\t\tif (typeof onUnload === 'function')\n\t\t{\n\t\t\tonUnload(null);\n\t\t}\n\t}\n}\n\nNewWindow.propTypes = {\n\tchildren   : PropTypes.node,\n\turl        : PropTypes.string,\n\tname       : PropTypes.string,\n\ttitle      : PropTypes.string,\n\tfeatures   : PropTypes.object,\n\tonUnload   : PropTypes.func,\n\tonBlock    : PropTypes.func,\n\tcenter     : PropTypes.oneOf([ 'parent', 'screen' ]),\n\tcopyStyles : PropTypes.bool,\n\tclasses    : PropTypes.object.isRequired\n};\n\nfunction copyStyles(source, target)\n{\n\tArray.from(source.styleSheets).forEach((styleSheet) =>\n\t{\n\t\tlet rules;\n\n\t\ttry\n\t\t{\n\t\t\trules = styleSheet.cssRules;\n\t\t}\n\t\tcatch (err) {}\n\n\t\tif (rules)\n\t\t{\n\t\t\tconst newStyleEl = source.createElement('style');\n\n\t\t\tArray.from(styleSheet.cssRules).forEach((cssRule) =>\n\t\t\t{\n\t\t\t\tconst { cssText, type } = cssRule;\n\n\t\t\t\tlet returnText = cssText;\n\n\t\t\t\tif ([ 3, 5 ].includes(type))\n\t\t\t\t{\n\t\t\t\t\treturnText = cssText\n\t\t\t\t\t\t.split('url(')\n\t\t\t\t\t\t.map((line) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (line[1] === '/')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn `${line.slice(0, 1)}${\n\t\t\t\t\t\t\t\t\twindow.location.origin\n\t\t\t\t\t\t\t\t}${line.slice(1)}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn line;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('url(');\n\t\t\t\t}\n\n\t\t\t\tnewStyleEl.appendChild(source.createTextNode(returnText));\n\t\t\t});\n\n\t\t\ttarget.head.appendChild(newStyleEl);\n\t\t}\n\t\telse if (styleSheet.href)\n\t\t{\n\t\t\tconst newLinkEl = source.createElement('link');\n\n\t\t\tnewLinkEl.rel = 'stylesheet';\n\t\t\tnewLinkEl.href = styleSheet.href;\n\t\t\ttarget.head.appendChild(newLinkEl);\n\t\t}\n\t});\n}\n\nfunction toWindowFeatures(obj)\n{\n\treturn Object.keys(obj)\n\t\t.reduce((features, name) =>\n\t\t{\n\t\t\tconst value = obj[name];\n\n\t\t\tif (typeof value === 'boolean')\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value ? 'yes' : 'no'}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value}`);\n\t\t\t}\n\n\t\t\treturn features;\n\t\t}, [])\n\t\t.join(',');\n}\n\nexport default withStyles(styles)(NewWindow);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'contain',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\t'&.hidden'         :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t}\n\t\t}\n\t});\n\nclass FullView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\tthis.video = React.createRef();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tvideoVisible,\n\t\t\tvideoProfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<video\n\t\t\t\t\tref={this.video}\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\tloading : videoProfile === 'none'\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={Boolean(true)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\n\t\tconst video = this.video.current;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\t\t\tvideo.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideo.srcObject = null;\n\t\t}\n\t}\n}\n\nFullView.propTypes =\n{\n\tvideoTrack   : PropTypes.any,\n\tvideoVisible : PropTypes.bool,\n\tvideoProfile : PropTypes.string,\n\tclasses      : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(FullView);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport NewWindow from './NewWindow';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullView from '../VideoContainers/FullView';\n\nconst VideoWindow = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerWindow\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<NewWindow onUnload={toggleConsumerWindow}>\n\t\t\t<FullView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</NewWindow>\n\t);\n};\n\nVideoWindow.propTypes =\n{\n\tadvancedMode         : PropTypes.bool,\n\tconsumer             : appPropTypes.Consumer,\n\ttoggleConsumerWindow : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tconsumer : state.consumers[state.room.windowConsumer]\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerWindow : () =>\n\t\t{\n\t\t\tdispatch(roomActions.toggleConsumerWindow());\n\t\t}\n\t};\n};\n\nconst VideoWindowContainer = connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.windowConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.windowConsumer]\n\t\t\t);\n\t\t}\n\t}\n)(VideoWindow);\n\nexport default VideoWindowContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PromoteIcon from '@material-ui/icons/OpenInBrowser';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\talignItems : 'center'\n\t\t}\n\t});\n\nconst ListLobbyPeer = (props) =>\n{\n\tconst {\n\t\troomClient,\n\t\tpeer,\n\t\tpromotionInProgress,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst intl = useIntl();\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<ListItem\n\t\t\tclassName={classnames(classes.root)}\n\t\t\tkey={peer.peerId}\n\t\t\tbutton\n\t\t\talignItems='flex-start'\n\t\t>\n\t\t\t<ListItemAvatar>\n\t\t\t\t<Avatar alt='Peer avatar' src={picture} />\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={peer.displayName}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.admitFromLobby',\n\t\t\t\t\tdefaultMessage : 'Click to let them in'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\tpeer.promotionInProgress ||\n\t\t\t\t\t\tpromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\troomClient.promoteLobbyPeer(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PromoteIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</ListItem>\n\t);\n};\n\nListLobbyPeer.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tpeer                : PropTypes.object.isRequired,\n\tpromotionInProgress : PropTypes.bool.isRequired,\n\tcanPromote          : PropTypes.bool.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer                : state.lobbyPeers[id],\n\t\t\tpromotionInProgress : state.room.lobbyPeersPromotionInProgress,\n\t\t\tcanPromote          : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers && // For checking permissions\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListLobbyPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tlobbyPeersKeySelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport * as roomActions from '../../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListLobbyPeer from './ListLobbyPeer';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlock :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t}\n\t});\n\nconst LockDialog = ({\n\troomClient,\n\troom,\n\thandleCloseLockDialog,\n\tlobbyPeers,\n\tcanPromote,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={room.lockDialogOpen}\n\t\t\tonClose={() => handleCloseLockDialog(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.lobbyAdministration'\n\t\t\t\t\tdefaultMessage='Lobby administration'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t{ lobbyPeers.length > 0 ?\n\t\t\t\t<List\n\t\t\t\t\tdense\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<ListSubheader component='div'>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.peersInLobby'\n\t\t\t\t\t\t\t\tdefaultMessage='Participants in Lobby'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\tlobbyPeers.map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (<ListLobbyPeer key={peerId} id={peerId} />);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.lobbyEmpty'\n\t\t\t\t\t\t\tdefaultMessage='There are currently no one in the lobby'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t}\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tlobbyPeers.length === 0 ||\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\troom.lobbyPeersPromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tonClick={() => roomClient.promoteAllLobbyPeers()}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.promoteAllPeers'\n\t\t\t\t\t\tdefaultMessage='Promote all'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleCloseLockDialog(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nLockDialog.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\troom                  : appPropTypes.Room.isRequired,\n\thandleCloseLockDialog : PropTypes.func.isRequired,\n\thandleAccessCode      : PropTypes.func.isRequired,\n\tlobbyPeers            : PropTypes.array,\n\tcanPromote            : PropTypes.bool,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\troom       : state.room,\n\t\t\tlobbyPeers : lobbyPeersKeySelector(state),\n\t\t\tcanPromote : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = {\n\thandleCloseLockDialog : roomActions.setLockDialogOpen,\n\thandleAccessCode      : roomActions.setAccessCode\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(LockDialog)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Switch from '@material-ui/core/Switch';\n\nconst NoiseSlider = withStyles(\n\t{\n\t\troot :\n\t\t{\n\t\t\tcolor   : '#3880ff',\n\t\t\theight  : 2,\n\t\t\tpadding : '15px 0'\n\t\t},\n\t\ttrack : {\n\t\t\theight : 2\n\t\t},\n\t\trail : {\n\t\t\theight  : 2,\n\t\t\topacity : 0.2\n\t\t},\n\t\tmark : {\n\t\t\tbackgroundColor : '#bfbfbf',\n\t\t\theight          : 10,\n\t\t\twidth           : 3,\n\t\t\tmarginTop       : -3\n\t\t},\n\t\tmarkActive : {\n\t\t\topacity         : 1,\n\t\t\tbackgroundColor : 'currentColor'\n\t\t}\n\t})(Slider);\n\nconst styles = (theme) => ({\n\tsetting :\n\t{\n\t\tpadding : theme.spacing(2)\n\t},\n\tmargin :\n\t{\n\t\theight : theme.spacing(3)\n\t},\n\troot : {\n\t\twidth           : '100%',\n\t\tbackgroundColor : theme.palette.background.paper\n\t},\n\tswitchLabel : {\n\t\tjustifyContent : 'space-between',\n\t\tflex           : 'auto',\n\t\tdisplay        : 'flex',\n\t\tpadding        : theme.spacing(1)\n\t},\n\tnested : {\n\t\tdisplay       : 'block',\n\t\tpaddingTop    : 0,\n\t\tpaddingBottom : 0,\n\t\tpaddingLeft   : '25px',\n\t\tpaddingRight  : '25px'\n\t},\n\tformControl :\n\t{\n\t\tdisplay : 'flex'\n\t}\n});\n\nconst MediaSettings = ({\n\tsetEchoCancellation,\n\tsetAutoGainControl,\n\tsetNoiseSuppression,\n\tsetVoiceActivatedUnmute,\n\troomClient,\n\tme,\n\tvolume,\n\tsettings,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ audioSettingsOpen, setAudioSettingsOpen ] = React.useState(false);\n\tconst [ videoSettingsOpen, setVideoSettingsOpen ] = React.useState(false);\n\n\tconst resolutions = [ {\n\t\tvalue : 'low',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.low',\n\t\t\tdefaultMessage : 'Low'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'medium',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.medium',\n\t\t\tdefaultMessage : 'Medium'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'high',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.high',\n\t\t\tdefaultMessage : 'High (HD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'veryhigh',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.veryHigh',\n\t\t\tdefaultMessage : 'Very high (FHD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'ultra',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.ultra',\n\t\t\tdefaultMessage : 'Ultra (UHD)'\n\t\t})\n\t} ];\n\n\tlet webcams;\n\n\tif (me.webcamDevices)\n\t\twebcams = Object.values(me.webcamDevices);\n\telse\n\t\twebcams = [];\n\n\tlet audioDevices;\n\n\tif (me.audioDevices)\n\t\taudioDevices = Object.values(me.audioDevices);\n\telse\n\t\taudioDevices = [];\n\n\tlet audioOutputDevices;\n\n\tif (me.audioOutputDevices)\n\t\taudioOutputDevices = Object.values(me.audioOutputDevices);\n\telse\n\t\taudioOutputDevices = [];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedWebcam || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\troomClient.updateWebcam({\n\t\t\t\t\t\t\t\t\trestart     : true,\n\t\t\t\t\t\t\t\t\tnewDeviceId : event.target.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={webcams.length === 0 || me.webcamInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcams.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ webcams.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setVideoSettingsOpen(!videoSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced video settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{videoSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={videoSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.resolution || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Video resolution'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.resolution'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video resolution'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t{ /*\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.frameRate || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((frameRate) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={frameRate} value={frameRate}>\n\t\t\t\t\t\t\t\t\t\t\t\t{frameRate}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.frameRate'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video frame rate'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.screenSharingResolution || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Screen sharing resolution'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.screenSharingResolution'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing resolution'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t*/ }\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.screenSharingFrameRate || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((screenSharingFrameRate) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={screenSharingFrameRate} value={screenSharingFrameRate}>\n\t\t\t\t\t\t\t\t\t\t\t{screenSharingFrameRate}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.screenSharingFrameRate'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing frame rate'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedAudioDevice || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\troomClient.updateMic({ restart: true, newDeviceId: event.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.audio',\n\t\t\t\t\t\t\tdefaultMessage : 'Audio input device'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={audioDevices.length === 0 || me.audioInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ audioDevices.map((audio, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={audio.deviceId}>{audio.label==='' ? index+1 : audio.label }</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ audioDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t{ 'audioOutputSupportedBrowsers' in window.config &&\n\t\t\t\t\twindow.config.audioOutputSupportedBrowsers.includes(me.browser.name) &&\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.selectedAudioOutputDevice || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeAudioOutputDevice(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.audioOutput',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Audio output device'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\tdisabled={audioOutputDevices.length === 0 || me.audioOutputInProgress}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ audioOutputDevices.map((audioOutput, index) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tvalue={audioOutput.deviceId}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{audioOutput.label}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t{ audioOutputDevices.length > 0 ?\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.selectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t}\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setAudioSettingsOpen(!audioSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedAudio',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced audio settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{audioSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={audioSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<List component='div'>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.echoCancellation}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEchoCancellation(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.echoCancellation',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Echo cancellation'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.autoGainControl} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAutoGainControl(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.autoGainControl',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Auto gain control'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.noiseSuppression} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoiseSuppression(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseSuppression',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise suppression'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.voiceActivatedUnmute} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetVoiceActivatedUnmute(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.voiceActivatedUnmute',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Voice activated unmute'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<div className={classes.margin} />\n\t\t\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseThreshold',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise threshold'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<NoiseSlider className={classnames(classes.slider, classnames.setting)}\n\t\t\t\t\t\t\t\t\tkey={'noise-threshold-slider'}\n\t\t\t\t\t\t\t\t\tmin={-100}\n\t\t\t\t\t\t\t\t\tvalue={settings.noiseThreshold}\n\t\t\t\t\t\t\t\t\tmax={0}\n\t\t\t\t\t\t\t\t\tvalueLabelDisplay={'auto'}\n\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t(event, value) =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient._setNoiseThreshold(value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmarks={[ { value: volume, label: `${volume} dB` } ]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t</React.Fragment>\n\t);\n};\n\nMediaSettings.propTypes =\n{\n\troomClient              : PropTypes.any.isRequired,\n\tsetEchoCancellation     : PropTypes.func.isRequired,\n\tsetAutoGainControl      : PropTypes.func.isRequired,\n\tsetNoiseSuppression     : PropTypes.func.isRequired,\n\tsetVoiceActivatedUnmute : PropTypes.func.isRequired,\n\tme                      : appPropTypes.Me.isRequired,\n\tvolume                  : PropTypes.number,\n\tsettings                : PropTypes.object.isRequired,\n\tclasses                 : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tme       : state.me,\n\t\tvolume   : state.peerVolumes[state.me.id],\n\t\tsettings : state.settings\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetEchoCancellation     : settingsActions.setEchoCancellation,\n\tsetAutoGainControl      : settingsActions.setAutoGainControl,\n\tsetNoiseSuppression     : settingsActions.setNoiseSuppression,\n\tsetVoiceActivatedUnmute : settingsActions.setVoiceActivatedUnmute\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.peerVolumes[prev.me.id] === next[next.me.id]\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MediaSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as settingsActions from '../../actions/settingsActions';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AppearenceSettings = ({\n\tisMobile,\n\troom,\n\tsettings,\n\tonTogglePermanentTopBar,\n\tonToggleHiddenControls,\n\tonToggleButtonControlBar,\n\tonToggleShowNotifications,\n\tonToggleDrawerOverlayed,\n\thandleChangeMode,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst modes = [ {\n\t\tvalue : 'democratic',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.democratic',\n\t\t\tdefaultMessage : 'Democratic view'\n\t\t})\n\t}, {\n\t\tvalue : 'filmstrip',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.filmstrip',\n\t\t\tdefaultMessage : 'Filmstrip view'\n\t\t})\n\t} ];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={room.mode || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\thandleChangeMode(event.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.layout',\n\t\t\t\t\t\t\tdefaultMessage : 'Room layout'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ modes.map((mode, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={mode.value}>\n\t\t\t\t\t\t\t\t\t{mode.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='settings.selectRoomLayout'\n\t\t\t\t\t\t\tdefaultMessage='Select room layout'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch checked={settings.permanentTopBar} onChange={onTogglePermanentTopBar} value='permanentTopBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.permanentTopBar',\n\t\t\t\t\tdefaultMessage : 'Permanent top bar'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.hiddenControls} onChange={onToggleHiddenControls} value='hiddenControls' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.hiddenControls',\n\t\t\t\t\tdefaultMessage : 'Hidden media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.buttonControlBar} onChange={onToggleButtonControlBar} value='buttonControlBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.buttonControlBar',\n\t\t\t\t\tdefaultMessage : 'Separate media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !isMobile &&\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\tcontrol={<Switch checked={settings.drawerOverlayed} onChange={onToggleDrawerOverlayed} value='drawerOverlayed' />}\n\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.drawerOverlayed',\n\t\t\t\t\t\tdefaultMessage : 'Side drawer over content'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.showNotifications} onChange={onToggleShowNotifications} value='showNotifications' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.showNotifications',\n\t\t\t\t\tdefaultMessage : 'Show notifications'\n\t\t\t\t})}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n};\n\nAppearenceSettings.propTypes =\n{\n\tisMobile                  : PropTypes.bool.isRequired,\n\troom                      : appPropTypes.Room.isRequired,\n\tsettings                  : PropTypes.object.isRequired,\n\tonTogglePermanentTopBar   : PropTypes.func.isRequired,\n\tonToggleHiddenControls    : PropTypes.func.isRequired,\n\tonToggleButtonControlBar  : PropTypes.func.isRequired,\n\tonToggleShowNotifications : PropTypes.func.isRequired,\n\tonToggleDrawerOverlayed   : PropTypes.func.isRequired,\n\thandleChangeMode          : PropTypes.func.isRequired,\n\tclasses                   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tisMobile : state.me.browser.platform === 'mobile',\n\t\troom     : state.room,\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonTogglePermanentTopBar   : settingsActions.togglePermanentTopBar,\n\tonToggleHiddenControls    : settingsActions.toggleHiddenControls,\n\tonToggleShowNotifications : settingsActions.toggleShowNotifications,\n\tonToggleButtonControlBar  : settingsActions.toggleButtonControlBar,\n\tonToggleDrawerOverlayed   : settingsActions.toggleDrawerOverlayed,\n\thandleChangeMode          : roomActions.setDisplayMode\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AppearenceSettings));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AdvancedSettings = ({\n\troomClient,\n\tsettings,\n\tonToggleAdvancedMode,\n\tonToggleNotificationSounds,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.advancedMode} onChange={onToggleAdvancedMode} value='advancedMode' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.advancedMode',\n\t\t\t\t\tdefaultMessage : 'Advanced mode'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.notificationSounds} onChange={onToggleNotificationSounds} value='notificationSounds' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.notificationSounds',\n\t\t\t\t\tdefaultMessage : 'Notification sounds'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !window.config.lockLastN &&\n\t\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.lastN || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeMaxSpotlights(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname='Last N'\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ Array.from(\n\t\t\t\t\t\t\t\t{ length: window.config.maxLastN || 10 },\n\t\t\t\t\t\t\t\t(_, i) => i + 1\n\t\t\t\t\t\t\t).map((lastN) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem key={lastN} value={lastN}>\n\t\t\t\t\t\t\t\t\t\t{lastN}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='settings.lastn'\n\t\t\t\t\t\t\t\tdefaultMessage='Number of visible videos'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</form>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nAdvancedSettings.propTypes =\n{\n\troomClient                 : PropTypes.any.isRequired,\n\tsettings                   : PropTypes.object.isRequired,\n\tonToggleAdvancedMode       : PropTypes.func.isRequired,\n\tonToggleNotificationSounds : PropTypes.func.isRequired,\n\tclasses                    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonToggleAdvancedMode       : settingsActions.toggleAdvancedMode,\n\tonToggleNotificationSounds : settingsActions.toggleNotificationSounds\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AdvancedSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport MediaSettings from './MediaSettings';\nimport AppearenceSettings from './AppearenceSettings';\nimport AdvancedSettings from './AdvancedSettings';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\n\nconst tabs =\n[\n\t'media',\n\t'appearence',\n\t'advanced'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst Settings = ({\n\tcurrentSettingsTab,\n\tsettingsOpen,\n\thandleCloseSettings,\n\tsetSettingsTab,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={settingsOpen}\n\t\t\tonClose={() => handleCloseSettings(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='settings.settings'\n\t\t\t\t\tdefaultMessage='Settings'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tvalue={tabs.indexOf(currentSettingsTab)}\n\t\t\t\tonChange={(event, value) => setSettingsTab(tabs[value])}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.media',\n\t\t\t\t\t\t\tdefaultMessage : 'Media'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.appearance',\n\t\t\t\t\t\tdefaultMessage : 'Appearence'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.advanced',\n\t\t\t\t\t\tdefaultMessage : 'Advanced'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{currentSettingsTab === 'media' && <MediaSettings />}\n\t\t\t{currentSettingsTab === 'appearence' && <AppearenceSettings />}\n\t\t\t{currentSettingsTab === 'advanced' && <AdvancedSettings />}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => handleCloseSettings(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nSettings.propTypes =\n{\n\tcurrentSettingsTab  : PropTypes.string.isRequired,\n\tsettingsOpen        : PropTypes.bool.isRequired,\n\thandleCloseSettings : PropTypes.func.isRequired,\n\tsetSettingsTab      : PropTypes.func.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tcurrentSettingsTab : state.room.currentSettingsTab,\n\t\tsettingsOpen       : state.room.settingsOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseSettings : roomActions.setSettingsOpen,\n\tsetSettingsTab      : roomActions.setSettingsTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.currentSettingsTab === next.room.currentSettingsTab &&\n\t\t\t\tprev.room.settingsOpen === next.room.settingsOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Settings));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n\tlobbyPeersKeySelector,\n\tpeersLengthSelector,\n\traisedHandsSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Paper from '@material-ui/core/Paper';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport PeopleIcon from '@material-ui/icons/People';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport HelpIcon from '@material-ui/icons/Help';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst styles = (theme) =>\n\t({\n\t\tpersistentDrawerOpen :\n\t\t{\n\t\t\twidth                          : 'calc(100% - 30vw)',\n\t\t\tmarginLeft                     : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 40vw)',\n\t\t\t\tmarginLeft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 50vw)',\n\t\t\t\tmarginLeft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 70vw)',\n\t\t\t\tmarginLeft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 90vw)',\n\t\t\t\tmarginLeft : '90vw'\n\t\t\t}\n\t\t},\n\t\tmenuButton :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : 0\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(3)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tgrow :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t},\n\t\ttitle :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tsectionDesktop : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'flex'\n\t\t\t}\n\t\t},\n\t\tsectionMobile : {\n\t\t\tdisplay                      : 'flex',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'none'\n\t\t\t}\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmargin  : theme.spacing(1, 0),\n\t\t\tpadding : theme.spacing(0, 1)\n\t\t},\n\t\tdisabledButton :\n\t\t{\n\t\t\tmargin : theme.spacing(1, 0)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t},\n\t\tmoreAction :\n\t\t{\n\t\t\tmargin : theme.spacing(0.5, 0, 0.5, 1.5)\n\t\t}\n\t});\n\nconst PulsingBadge = withStyles((theme) =>\n\t({\n\t\tbadge :\n\t\t{\n\t\t\tbackgroundColor : theme.palette.secondary.main,\n\t\t\t'&::after'      :\n\t\t\t{\n\t\t\t\tposition     : 'absolute',\n\t\t\t\twidth        : '100%',\n\t\t\t\theight       : '100%',\n\t\t\t\tborderRadius : '50%',\n\t\t\t\tanimation    : '$ripple 1.2s infinite ease-in-out',\n\t\t\t\tborder       : `3px solid ${theme.palette.secondary.main}`,\n\t\t\t\tcontent      : '\"\"'\n\t\t\t}\n\t\t},\n\t\t'@keyframes ripple' :\n\t\t{\n\t\t\t'0%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(.8)',\n\t\t\t\topacity   : 1\n\t\t\t},\n\t\t\t'100%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(2.4)',\n\t\t\t\topacity   : 0\n\t\t\t}\n\t\t}\n\t}))(Badge);\n\nconst TopBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ mobileMoreAnchorEl, setMobileMoreAnchorEl ] = useState(null);\n\tconst [ anchorEl, setAnchorEl ] = useState(null);\n\tconst [ currentMenu, setCurrentMenu ] = useState(null);\n\n\tconst handleExited = () =>\n\t{\n\t\tsetCurrentMenu(null);\n\t};\n\n\tconst handleMobileMenuOpen = (event) =>\n\t{\n\t\tsetMobileMoreAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMobileMenuClose = () =>\n\t{\n\t\tsetMobileMoreAnchorEl(null);\n\t};\n\n\tconst handleMenuOpen = (event, menu) =>\n\t{\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetCurrentMenu(menu);\n\t};\n\n\tconst handleMenuClose = () =>\n\t{\n\t\tsetAnchorEl(null);\n\n\t\thandleMobileMenuClose();\n\t};\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tpeersLength,\n\t\tlobbyPeers,\n\t\tpermanentTopBar,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tisMobile,\n\t\tmyPicture,\n\t\tloggedIn,\n\t\tloginEnabled,\n\t\tfullscreenEnabled,\n\t\tfullscreen,\n\t\tonFullscreen,\n\t\tsetSettingsOpen,\n\t\tsetExtraVideoOpen,\n\t\tsetHelpOpen,\n\t\tsetAboutOpen,\n\t\tsetLockDialogOpen,\n\t\ttoggleToolArea,\n\t\topenUsersTab,\n\t\tunread,\n\t\tcanProduceExtraVideo,\n\t\tcanLock,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst isMenuOpen = Boolean(anchorEl);\n\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\tconst lockTooltip = room.locked ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.unLockRoom',\n\t\t\tdefaultMessage : 'Unlock room'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.lockRoom',\n\t\t\tdefaultMessage : 'Lock room'\n\t\t});\n\n\tconst fullscreenTooltip = fullscreen ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.leaveFullscreen',\n\t\t\tdefaultMessage : 'Leave fullscreen'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t});\n\n\tconst loginTooltip = loggedIn ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.logout',\n\t\t\tdefaultMessage : 'Log out'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.login',\n\t\t\tdefaultMessage : 'Log in'\n\t\t});\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AppBar\n\t\t\t\tposition='fixed'\n\t\t\t\tclassName={classnames(\n\t\t\t\t\troom.toolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.show : classes.hide,\n\t\t\t\t\t!(isMobile || drawerOverlayed) && toolAreaOpen ?\n\t\t\t\t\t\tclasses.persistentDrawerOpen : null\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tbadgeContent={unread}\n\t\t\t\t\t\tonClick={() => toggleToolArea()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.openDrawer',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Open drawer'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t>\n\t\t\t\t\t\t{ window.config.title ? window.config.title : 'New edutech' }\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\t\t\tdefaultMessage : 'More actions'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={fullscreenTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={onFullscreen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => openUsersTab()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/*<Tooltip*/}\n\t\t\t\t\t\t{/*\ttitle={intl.formatMessage({*/}\n\t\t\t\t\t\t{/*\t\tid             : 'tooltip.settings',*/}\n\t\t\t\t\t\t{/*\t\tdefaultMessage : 'Show settings'*/}\n\t\t\t\t\t\t{/*\t})}*/}\n\t\t\t\t\t\t{/*>*/}\n\t\t\t\t\t\t{/*\t<IconButton*/}\n\t\t\t\t\t\t{/*\t\taria-label={intl.formatMessage({*/}\n\t\t\t\t\t\t{/*\t\t\tid             : 'tooltip.settings',*/}\n\t\t\t\t\t\t{/*\t\t\tdefaultMessage : 'Show settings'*/}\n\t\t\t\t\t\t{/*\t\t})}*/}\n\t\t\t\t\t\t{/*\t\tclassName={classes.actionButton}*/}\n\t\t\t\t\t\t{/*\t\tcolor='inherit'*/}\n\t\t\t\t\t\t{/*\t\tonClick={() => setSettingsOpen(!room.settingsOpen)}*/}\n\t\t\t\t\t\t{/*\t>*/}\n\t\t\t\t\t\t{/*\t\t<SettingsIcon />*/}\n\t\t\t\t\t\t{/*\t</IconButton>*/}\n\t\t\t\t\t\t{/*</Tooltip>*/}\n\t\t\t\t\t\t<Tooltip title={lockTooltip}>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lockRoom',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Lock room'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{/*{ loginEnabled &&*/}\n\t\t\t\t\t\t{/*\t<Tooltip title={loginTooltip}>*/}\n\t\t\t\t\t\t{/*\t\t<IconButton*/}\n\t\t\t\t\t\t{/*\t\t\taria-label={intl.formatMessage({*/}\n\t\t\t\t\t\t{/*\t\t\t\tid             : 'tooltip.login',*/}\n\t\t\t\t\t\t{/*\t\t\t\tdefaultMessage : 'Log in'*/}\n\t\t\t\t\t\t{/*\t\t\t})}*/}\n\t\t\t\t\t\t{/*\t\t\tclassName={classes.actionButton}*/}\n\t\t\t\t\t\t{/*\t\t\tcolor='inherit'*/}\n\t\t\t\t\t\t{/*\t\t\tonClick={() =>*/}\n\t\t\t\t\t\t{/*\t\t\t{*/}\n\t\t\t\t\t\t{/*\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();*/}\n\t\t\t\t\t\t{/*\t\t\t}}*/}\n\t\t\t\t\t\t{/*\t\t>*/}\n\t\t\t\t\t\t{/*\t\t\t{ myPicture ?*/}\n\t\t\t\t\t\t{/*\t\t\t\t<Avatar src={myPicture} />*/}\n\t\t\t\t\t\t{/*\t\t\t\t:*/}\n\t\t\t\t\t\t{/*\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />*/}\n\t\t\t\t\t\t{/*\t\t\t}*/}\n\t\t\t\t\t\t{/*\t\t</IconButton>*/}\n\t\t\t\t\t\t{/*\t</Tooltip>*/}\n\t\t\t\t\t\t{/*}*/}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\tonClick={handleMobileMenuOpen}\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.divider} />\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.leave',\n\t\t\t\t\t\t\tdefaultMessage : 'Leave'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={() => roomClient.close()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.leave'\n\t\t\t\t\t\t\tdefaultMessage='Leave'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\topen={isMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tonExited={handleExited}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ currentMenu === 'moreActions' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t{/*<MenuItem*/}\n\t\t\t\t\t\t{/*\tdisabled={!canProduceExtraVideo}*/}\n\t\t\t\t\t\t{/*\tonClick={() =>*/}\n\t\t\t\t\t\t{/*\t{*/}\n\t\t\t\t\t\t{/*\t\thandleMenuClose();*/}\n\t\t\t\t\t\t{/*\t\tsetExtraVideoOpen(!room.extraVideoOpen);*/}\n\t\t\t\t\t\t{/*\t}}*/}\n\t\t\t\t\t\t{/*>*/}\n\t\t\t\t\t\t{/*\t<VideoCallIcon*/}\n\t\t\t\t\t\t{/*\t\taria-label={intl.formatMessage({*/}\n\t\t\t\t\t\t{/*\t\t\tid             : 'label.addVideo',*/}\n\t\t\t\t\t\t{/*\t\t\tdefaultMessage : 'Add video'*/}\n\t\t\t\t\t\t{/*\t\t})}*/}\n\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t{/*\t<p className={classes.moreAction}>*/}\n\t\t\t\t\t\t{/*\t\t<FormattedMessage*/}\n\t\t\t\t\t\t{/*\t\t\tid='label.addVideo'*/}\n\t\t\t\t\t\t{/*\t\t\tdefaultMessage='Add video'*/}\n\t\t\t\t\t\t{/*\t\t/>*/}\n\t\t\t\t\t\t{/*\t</p>*/}\n\t\t\t\t\t\t{/*</MenuItem>*/}\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetHelpOpen(!room.helpOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HelpIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.help',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.help'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t{/*<MenuItem*/}\n\t\t\t\t\t\t{/*\tonClick={() =>*/}\n\t\t\t\t\t\t{/*\t{*/}\n\t\t\t\t\t\t{/*\t\thandleMenuClose();*/}\n\t\t\t\t\t\t{/*\t\tsetAboutOpen(!room.aboutOpen);*/}\n\t\t\t\t\t\t{/*\t}}*/}\n\t\t\t\t\t\t{/*>*/}\n\t\t\t\t\t\t{/*\t<InfoIcon*/}\n\t\t\t\t\t\t{/*\t\taria-label={intl.formatMessage({*/}\n\t\t\t\t\t\t{/*\t\t\tid             : 'room.about',*/}\n\t\t\t\t\t\t{/*\t\t\tdefaultMessage : 'About'*/}\n\t\t\t\t\t\t{/*\t\t})}*/}\n\t\t\t\t\t\t{/*\t/>*/}\n\t\t\t\t\t\t{/*\t<p className={classes.moreAction}>*/}\n\t\t\t\t\t\t{/*\t\t<FormattedMessage*/}\n\t\t\t\t\t\t{/*\t\t\tid='room.about'*/}\n\t\t\t\t\t\t{/*\t\t\tdefaultMessage='About'*/}\n\t\t\t\t\t\t{/*\t\t/>*/}\n\t\t\t\t\t\t{/*\t</p>*/}\n\t\t\t\t\t\t{/*</MenuItem>*/}\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\t\t\t</Popover>\n\t\t\t<Menu\n\t\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n\t\t\t\topen={isMobileMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={loginTooltip}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loggedIn ?\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.logout'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log out'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.login'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log in'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={lockTooltip}\n\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\n\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t}\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.unLockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Unlock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.lockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Lock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetSettingsOpen(!room.settingsOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.settings'\n\t\t\t\t\t\t\tdefaultMessage='Show settings'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\topenUsersTab();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t</Badge>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.participants'\n\t\t\t\t\t\t\tdefaultMessage='Show participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tonFullscreen();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.enterFullscreen'\n\t\t\t\t\t\t\t\tdefaultMessage='Enter fullscreen'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t>\n\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.moreActions'\n\t\t\t\t\t\t\tdefaultMessage='More actions'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t</React.Fragment>\n\t);\n};\n\nTopBar.propTypes =\n{\n\troomClient           : PropTypes.object.isRequired,\n\troom                 : appPropTypes.Room.isRequired,\n\tisMobile             : PropTypes.bool.isRequired,\n\tpeersLength          : PropTypes.number,\n\tlobbyPeers           : PropTypes.array,\n\tpermanentTopBar      : PropTypes.bool.isRequired,\n\tdrawerOverlayed      : PropTypes.bool.isRequired,\n\ttoolAreaOpen         : PropTypes.bool.isRequired,\n\tmyPicture            : PropTypes.string,\n\tloggedIn             : PropTypes.bool.isRequired,\n\tloginEnabled         : PropTypes.bool.isRequired,\n\tfullscreenEnabled    : PropTypes.bool,\n\tfullscreen           : PropTypes.bool,\n\tonFullscreen         : PropTypes.func.isRequired,\n\tsetToolbarsVisible   : PropTypes.func.isRequired,\n\tsetSettingsOpen      : PropTypes.func.isRequired,\n\tsetExtraVideoOpen    : PropTypes.func.isRequired,\n\tsetHelpOpen          : PropTypes.func.isRequired,\n\tsetAboutOpen         : PropTypes.func.isRequired,\n\tsetLockDialogOpen    : PropTypes.func.isRequired,\n\ttoggleToolArea       : PropTypes.func.isRequired,\n\topenUsersTab         : PropTypes.func.isRequired,\n\tunread               : PropTypes.number.isRequired,\n\tcanProduceExtraVideo : PropTypes.bool.isRequired,\n\tcanLock              : PropTypes.bool.isRequired,\n\tcanPromote           : PropTypes.bool.isRequired,\n\tclasses              : PropTypes.object.isRequired,\n\ttheme                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasExtraVideoPermission =\n\t\tmakePermissionSelector(permissions.EXTRA_VIDEO);\n\n\tconst hasLockPermission =\n\t\tmakePermissionSelector(permissions.CHANGE_ROOM_LOCK);\n\n\tconst hasPromotionPermission =\n\t\tmakePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\troom            : state.room,\n\t\t\tisMobile        : state.me.browser.platform === 'mobile',\n\t\t\tpeersLength     : peersLengthSelector(state),\n\t\t\tlobbyPeers      : lobbyPeersKeySelector(state),\n\t\t\tpermanentTopBar : state.settings.permanentTopBar,\n\t\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t\tloggedIn        : state.me.loggedIn,\n\t\t\tloginEnabled    : state.me.loginEnabled,\n\t\t\tmyPicture       : state.me.picture,\n\t\t\tunread          : state.toolarea.unreadMessages +\n\t\t\t\tstate.toolarea.unreadFiles + raisedHandsSelector(state),\n\t\t\tcanProduceExtraVideo : hasExtraVideoPermission(state),\n\t\t\tcanLock              : hasLockPermission(state),\n\t\t\tcanPromote           : hasPromotionPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\tsetSettingsOpen : (settingsOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setSettingsOpen(settingsOpen));\n\t\t},\n\t\tsetExtraVideoOpen : (extraVideoOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setExtraVideoOpen(extraVideoOpen));\n\t\t},\n\t\tsetHelpOpen : (helpOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setHelpOpen(helpOpen));\n\t\t},\n\t\tsetAboutOpen : (aboutOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setAboutOpen(aboutOpen));\n\t\t},\n\t\tsetLockDialogOpen : (lockDialogOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setLockDialogOpen(lockDialogOpen));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t},\n\t\topenUsersTab : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.openToolArea());\n\t\t\tdispatch(toolareaActions.setToolTab('users'));\n\t\t}\n\t});\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.me.loggedIn === next.me.loggedIn &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.loginEnabled === next.me.loginEnabled &&\n\t\t\t\tprev.me.picture === next.me.picture &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(TopBar)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst ExtraVideo = ({\n\troomClient,\n\textraVideoOpen,\n\twebcamDevices,\n\thandleCloseExtraVideo,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ videoDevice, setVideoDevice ] = React.useState('');\n\n\tconst handleChange = (event) =>\n\t{\n\t\tsetVideoDevice(event.target.value);\n\t};\n\n\tlet videoDevices;\n\n\tif (webcamDevices)\n\t\tvideoDevices = Object.values(webcamDevices);\n\telse\n\t\tvideoDevices = [];\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={extraVideoOpen}\n\t\t\tonClose={() => handleCloseExtraVideo(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.extraVideo'\n\t\t\t\t\tdefaultMessage='Extra video'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={videoDevice}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={videoDevices.length === 0}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ videoDevices.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ videoDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => roomClient.addExtraVideo(videoDevice)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nExtraVideo.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\textraVideoOpen        : PropTypes.bool.isRequired,\n\twebcamDevices         : PropTypes.object,\n\thandleCloseExtraVideo : PropTypes.func.isRequired,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\twebcamDevices  : state.me.webcamDevices,\n\t\textraVideoOpen : state.room.extraVideoOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseExtraVideo : roomActions.setExtraVideoOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.webcamDevices === next.me.webcamDevices &&\n\t\t\t\tprev.room.extraVideoOpen === next.room.extraVideoOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ExtraVideo)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { meProducersSelector } from '../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition                     : 'fixed',\n\t\t\tdisplay                      : 'flex',\n\t\t\tzIndex                       : 30,\n\t\t\t[theme.breakpoints.up('md')] :\n\t\t\t{\n\t\t\t\ttop            : '50%',\n\t\t\t\ttransform      : 'translate(0%, -50%)',\n\t\t\t\tflexDirection  : 'column',\n\t\t\t\tjustifyContent : 'center',\n\t\t\t\talignItems     : 'center',\n\t\t\t\tleft           : theme.spacing(1)\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tflexDirection : 'row',\n\t\t\t\tbottom        : theme.spacing(1),\n\t\t\t\tleft          : '50%',\n\t\t\t\ttransform     : 'translate(-50%, -0%)'\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tmove :\n\t\t{\n\t\t\tleft                           : '30vw',\n\t\t\ttop                            : '50%',\n\t\t\ttransform                      : 'translate(0%, -50%)',\n\t\t\tflexDirection                  : 'column',\n\t\t\tjustifyContent                 : 'center',\n\t\t\talignItems                     : 'center',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\tleft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\tleft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tleft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\tleft : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nconst ButtonControlBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\ttoolbarsVisible,\n\t\thiddenControls,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tme,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tclassnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\thiddenControls ?\n\t\t\t\t\t\t(toolbarsVisible ? classes.show : classes.hide) :\n\t\t\t\t\t\tclasses.show,\n\t\t\t\t\ttoolAreaOpen &&\n\t\t\t\t\t\t(me.browser.platform !== 'mobile' && !drawerOverlayed) ?\n\t\t\t\t\t\tclasses.move : null\n\t\t\t\t)\n\t\t\t}\n\t\t>\n\t\t\t<Tooltip title={micTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\tcolor={micState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t<Tooltip title={webcamTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t<Tooltip title={screenTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\tdisabled={!me.canShareScreen || me.screenShareInProgress}\n\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenState === 'on' || screenState === 'unsupported' ?\n\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ screenState === 'off' ?\n\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t</Fab>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nButtonControlBar.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\thiddenControls  : PropTypes.bool.isRequired,\n\tdrawerOverlayed : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tme              : appPropTypes.Me.isRequired,\n\tmicProducer     : appPropTypes.Producer,\n\twebcamProducer  : appPropTypes.Producer,\n\tscreenProducer  : appPropTypes.Producer,\n\tclasses         : PropTypes.object.isRequired,\n\ttheme           : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\thiddenControls  : state.settings.hiddenControls,\n\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t...meProducersSelector(state),\n\t\tme              : state.me\n\t});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.hiddenControls === next.settings.hiddenControls &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.me === next.me\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(ButtonControlBar)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst shortcuts=[\n\t{ key: 'h', label: 'room.help', defaultMessage: 'Help' },\n\t{ key: 'm', label: 'device.muteAudio', defaultMessage: 'Mute Audio' },\n\t{ key: 'v', label: 'device.stopVideo', defaultMessage: 'Mute Video' },\n\t{ key: '1', label: 'label.democratic', defaultMessage: 'Democratic View' },\n\t{ key: '2', label: 'label.filmstrip', defaultMessage: 'Filmstrip View' },\n\t{ key: 'space', label: 'me.mutedPTT', defaultMessage: 'Push SPACE to talk' },\n\t{ key: 'a', label: 'label.advanced', defaultMessage: 'Show advanced information' },\n\t{ key: `${String.fromCharCode(8592)} ${String.fromCharCode(8594)}`, label: 'room.browsePeersSpotlight', defaultMessage: 'Browse participants into Spotlight' }\n];\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t},\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column'\n\t\t},\n\t\tpaper : {\n\t\t\tpadding      : theme.spacing(1),\n\t\t\ttextAlign    : 'center',\n\t\t\tcolor        : theme.palette.text.secondary,\n\t\t\twhiteSpace   : 'nowrap',\n\t\t\tmarginRight  : theme.spacing(3),\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tminWidth     : theme.spacing(8)\n\t\t},\n\t\tshortcuts : {\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row',\n\t\t\talignItems    : 'center',\n\t\t\tpaddingLeft   : theme.spacing(2),\n\t\t\tpaddingRight  : theme.spacing(2)\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow     : 1,\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t}\n\t});\n\nconst Help = ({\n\thelpOpen,\n\thandleCloseHelp,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={helpOpen}\n\t\t\tonClose={() => { handleCloseHelp(false); }}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.help'\n\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tvalue={0}\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.shortcutKeys',\n\t\t\t\t\t\t\tdefaultMessage : 'Shortcut keys'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{shortcuts.map((value, index) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={index} className={classes.shortcuts}>\n\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t{value.key}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid={value.label}\n\t\t\t\t\t\t\tdefaultMessage={value.defaultMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => { handleCloseHelp(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nHelp.propTypes =\n{\n\troomClient      : PropTypes.object.isRequired,\n\thelpOpen        : PropTypes.bool.isRequired,\n\thandleCloseHelp : PropTypes.func.isRequired,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\thelpOpen : state.room.helpOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseHelp : roomActions.setHelpOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.helpOpen === next.room.helpOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Help)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\tlink :\n\t\t{\n\t\t\tdisplay      : 'block',\n\t\t\ttextAlign    : 'center',\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginBottom : theme.spacing(3)\n\t\t}\n\t});\nconst eduMeetUrl='https://edumeet.org';\nconst About = ({\n\taboutOpen,\n\thandleCloseAbout,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\topen={aboutOpen}\n\t\t\tonClose={() => handleCloseAbout(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.about'\n\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tContributions to this work were made on behalf of the GANT\n\t\t\t\t\tproject, a project that has received funding from the\n\t\t\t\t\tEuropean Unions Horizon 2020 research and innovation\n\t\t\t\t\tprogramme under Grant Agreement No. 731122 (GN4-2).\n\t\t\t\t\tOn behalf of GANT project, GANT Association is the sole\n\t\t\t\t\towner of the copyright in all material which was developed\n\t\t\t\t\tby a member of the GANT project.\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tGANT Vereniging (Association) is registered with the\n\t\t\t\t\tChamber of Commerce in Amsterdam with registration number\n\t\t\t\t\t40535155 and operates in the UK as a branch of GANT\n\t\t\t\t\tVereniging. Registered office: Hoekenrode 3, 1102BR\n\t\t\t\t\tAmsterdam, The Netherlands. UK branch address: City House,\n\t\t\t\t\t126-130 Hills Road, Cambridge CB2 1PQ, UK.\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t<Link href={eduMeetUrl} target='_blank' rel='noreferrer' color='secondary' variant='h6'>\n\t\t\t\t\t\t{eduMeetUrl}\n\t\t\t\t\t</Link>\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' variant='body2'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.version'\n\t\t\t\t\t\tdefaultMessage='Version'\n\t\t\t\t\t/>\n\t\t\t\t\t:{` ${process.env.REACT_APP_VERSION}`}\n\t\t\t\t</DialogContentText>\n\t\t\t\t<Divider variant='middle' light className={classes.divider}/>\n\t\t\t\t{\n\t\t\t\t\twindow.config.supportUrl\n\t\t\t\t\t&&\n\t\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t\t<span>Visit for more info: </span>\n\t\t\t\t\t\t<Link href={window.config.supportUrl} target='_blank' rel='noreferrer' color='secondary'>\n\t\t\t\t\t\t\t{ window.config.supportUrl }\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t}\n\t\t\t\t<Link href={window.config.privacyUrl ? window.config.privacyUrl : 'privacy/privacy.html'} target='_blank' rel='noreferrer' color='secondary' className={classes.link}>\n\t\t\t\t\tData protection and Privacy Policy\n\t\t\t\t</Link>\n\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t<Button onClick={() => { handleCloseAbout(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nAbout.propTypes =\n{\n\troomClient       : PropTypes.object.isRequired,\n\taboutOpen        : PropTypes.bool.isRequired,\n\thandleCloseAbout : PropTypes.func.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\taboutOpen : state.room.aboutOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseAbout : roomActions.setAboutOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.aboutOpen === next.room.aboutOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(About)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from './appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport * as roomActions from '../actions/roomActions';\nimport * as toolareaActions from '../actions/toolareaActions';\nimport { idle } from '../utils';\nimport FullScreen from './FullScreen';\nimport { FormattedMessage } from 'react-intl';\nimport CookieConsent from 'react-cookie-consent';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport Notifications from './Notifications/Notifications';\nimport MeetingDrawer from './MeetingDrawer/MeetingDrawer';\nimport Democratic from './MeetingViews/Democratic';\nimport Filmstrip from './MeetingViews/Filmstrip';\nimport AudioPeers from './PeerAudio/AudioPeers';\nimport FullScreenView from './VideoContainers/FullScreenView';\nimport VideoWindow from './VideoWindow/VideoWindow';\nimport LockDialog from './AccessControl/LockDialog/LockDialog';\nimport Settings from './Settings/Settings';\nimport TopBar from './Controls/TopBar';\nimport WakeLock from 'react-wakelock-react16';\nimport ExtraVideo from './Controls/ExtraVideo';\nimport ButtonControlBar from './Controls/ButtonControlBar';\nimport Help from './Controls/Help';\nimport About from './Controls/About';\n\nconst TIMEOUT = window.config.hideTimeout || 5000;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdrawer :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tflexShrink                     : 0,\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tdrawerPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nclass Room extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.fullscreen = new FullScreen(document);\n\n\t\tthis.state =\n\t\t{\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\twaitForHide = idle(() =>\n\t{\n\t\tthis.props.setToolbarsVisible(false);\n\t}, TIMEOUT);\n\n\thandleMovement = () =>\n\t{\n\t\t// If the toolbars were hidden, show them again when\n\t\t// the user moves their cursor.\n\t\tif (!this.props.room.toolbarsVisible)\n\t\t{\n\t\t\tthis.props.setToolbarsVisible(true);\n\t\t}\n\n\t\tthis.waitForHide();\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.addEventListener('mousemove', this.handleMovement);\n\t\twindow.addEventListener('touchstart', this.handleMovement);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.removeEventListener('mousemove', this.handleMovement);\n\t\twindow.removeEventListener('touchstart', this.handleMovement);\n\t}\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troom,\n\t\t\tbrowser,\n\t\t\tadvancedMode,\n\t\t\tshowNotifications,\n\t\t\tbuttonControlBar,\n\t\t\tdrawerOverlayed,\n\t\t\ttoolAreaOpen,\n\t\t\ttoggleToolArea,\n\t\t\tclasses,\n\t\t\ttheme\n\t\t} = this.props;\n\n\t\tconst View =\n\t\t{\n\t\t\tfilmstrip  : Filmstrip,\n\t\t\tdemocratic : Democratic\n\t\t}[room.mode];\n\n\t\tconst container = window !== undefined ? window.document.body : undefined;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.consentUnderstand'\n\t\t\t\t\t\t\t\tdefaultMessage='I understand'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\n\t\t\t\t<FullScreenView advancedMode={advancedMode} />\n\n\t\t\t\t<VideoWindow advancedMode={advancedMode} />\n\n\t\t\t\t<AudioPeers />\n\n\t\t\t\t{ showNotifications &&\n\t\t\t\t\t<Notifications />\n\t\t\t\t}\n\n\t\t\t\t<CssBaseline />\n\n\t\t\t\t<TopBar\n\t\t\t\t\tfullscreenEnabled={this.fullscreen.fullscreenEnabled}\n\t\t\t\t\tfullscreen={this.state.fullscreen}\n\t\t\t\t\tonFullscreen={this.handleToggleFullscreen}\n\t\t\t\t/>\n\n\t\t\t\t{ (browser.platform === 'mobile' || drawerOverlayed) ?\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<SwipeableDrawer\n\t\t\t\t\t\t\t\tcontainer={container}\n\t\t\t\t\t\t\t\tvariant='temporary'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tonOpen={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tModalProps={{\n\t\t\t\t\t\t\t\t\tkeepMounted : true // Better open performance on mobile.\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</SwipeableDrawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t\t:\n\t\t\t\t\t<nav className={toolAreaOpen ? classes.drawer : null}>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\t\tvariant='persistent'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t}\n\n\t\t\t\t{ browser.platform === 'mobile' && browser.os !== 'ios' &&\n\t\t\t\t\t<WakeLock />\n\t\t\t\t}\n\n\t\t\t\t<View advancedMode={advancedMode} />\n\n\t\t\t\t{ buttonControlBar &&\n\t\t\t\t\t<ButtonControlBar />\n\t\t\t\t}\n\n\t\t\t\t{ room.lockDialogOpen &&\n\t\t\t\t\t<LockDialog />\n\t\t\t\t}\n\n\t\t\t\t{ room.settingsOpen &&\n\t\t\t\t\t<Settings />\n\t\t\t\t}\n\n\t\t\t\t{ room.extraVideoOpen &&\n\t\t\t\t\t<ExtraVideo />\n\t\t\t\t}\n\t\t\t\t{ room.helpOpen &&\n\t\t\t\t\t<Help />\n\t\t\t\t}\n\t\t\t\t{ room.aboutOpen &&\n\t\t\t\t\t<About />\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRoom.propTypes =\n{\n\troom               : appPropTypes.Room.isRequired,\n\tbrowser            : PropTypes.object.isRequired,\n\tadvancedMode       : PropTypes.bool.isRequired,\n\tshowNotifications  : PropTypes.bool.isRequired,\n\tbuttonControlBar   : PropTypes.bool.isRequired,\n\tdrawerOverlayed    : PropTypes.bool.isRequired,\n\ttoolAreaOpen       : PropTypes.bool.isRequired,\n\tsetToolbarsVisible : PropTypes.func.isRequired,\n\ttoggleToolArea     : PropTypes.func.isRequired,\n\tclasses            : PropTypes.object.isRequired,\n\ttheme              : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\troom              : state.room,\n\t\tbrowser           : state.me.browser,\n\t\tadvancedMode      : state.settings.advancedMode,\n\t\tshowNotifications : state.settings.showNotifications,\n\t\tbuttonControlBar  : state.settings.buttonControlBar,\n\t\tdrawerOverlayed   : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen      : state.toolarea.toolAreaOpen\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.settings.advancedMode === next.settings.advancedMode &&\n\t\t\t\tprev.settings.showNotifications === next.settings.showNotifications &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Room));"],"sourceRoot":""}