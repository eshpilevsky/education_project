(this["webpackJsonpnew-edutech"]=this["webpackJsonpnew-edutech"]||[]).push([[6],{354:function(e,a,t){e.exports=t.p+"static/media/avatar-empty.23a3776b.jpeg"},652:function(e,a,t){"use strict";t.r(a);var n=t(45),r=t(52),o=t(70),l=t(71),i=t(0),s=t.n(i),c=t(132),u=t(6),d=t.n(u),m=(d.a.shape({state:d.a.oneOf(["new","connecting","connected","closed"]).isRequired,activeSpeakerId:d.a.string}),d.a.shape({id:d.a.string.isRequired,canSendMic:d.a.bool.isRequired,canSendWebcam:d.a.bool.isRequired,webcamInProgress:d.a.bool.isRequired}),d.a.shape({id:d.a.string.isRequired,source:d.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,deviceLabel:d.a.string,type:d.a.oneOf(["front","back","screen","extravideo"]),paused:d.a.bool.isRequired,track:d.a.any,codec:d.a.string.isRequired}),d.a.shape({id:d.a.string.isRequired,displayName:d.a.string,consumers:d.a.arrayOf(d.a.string).isRequired}),d.a.shape({id:d.a.string.isRequired,peerId:d.a.string.isRequired,source:d.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,locallyPaused:d.a.bool.isRequired,remotelyPaused:d.a.bool.isRequired,profile:d.a.oneOf(["none","default","low","medium","high"]),track:d.a.any,codec:d.a.string}),d.a.shape({id:d.a.string.isRequired,type:d.a.oneOf(["info","error"]).isRequired,timeout:d.a.number}),d.a.shape({type:d.a.string,component:d.a.string,text:d.a.string,sender:d.a.string}),d.a.shape({data:d.a.shape({id:d.a.string.isRequired,picture:d.a.string,file:d.a.shape({magnet:d.a.string.isRequired}).isRequired,me:d.a.bool}).isRequired,notify:d.a.func.isRequired}),t(7)),p=t(92),f=t.n(p),g=t(10),b=function(e){return{type:"SET_TOOL_TAB",payload:{toolTab:e}}},h=t(120),v={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},E=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],y=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],w=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],M=function(){function e(a){Object(n.a)(this,e),this.document=a,this.vendor="fullscreenEnabled"in this.document&&Object.keys(v)||E[0]in this.document&&E||y[0]in this.document&&y||w[0]in this.document&&w||[]}return Object(r.a)(e,[{key:"requestFullscreen",value:function(e){e[this.vendor[v.requestFullscreen]]()}},{key:"requestFullscreenFunction",value:function(e){e[this.vendor[v.requestFullscreen]]}},{key:"addEventListener",value:function(e,a){this.document.addEventListener(this.vendor[v[e]],a)}},{key:"removeEventListener",value:function(e,a){this.document.removeEventListener(this.vendor[v[e]],a)}},{key:"exitFullscreen",get:function(){return this.document[this.vendor[v.exitFullscreen]].bind(this.document)}},{key:"fullscreenEnabled",get:function(){return Boolean(this.document[this.vendor[v.fullscreenEnabled]])},set:function(e){}},{key:"fullscreenElement",get:function(){return this.document[this.vendor[v.fullscreenElement]]},set:function(e){}},{key:"onfullscreenchange",get:function(){return this.document["on".concat(this.vendor[v.fullscreenchange]).toLowerCase()]},set:function(e){this.document["on".concat(this.vendor[v.fullscreenchange]).toLowerCase()]=e}},{key:"onfullscreenerror",get:function(){return this.document["on".concat(this.vendor[v.fullscreenerror]).toLowerCase()]},set:function(e){this.document["on".concat(this.vendor[v.fullscreenerror]).toLowerCase()]=e}}]),e}(),k=t(79),C=t(142),S=t.n(C),O=t(651),T=t(655),N=t(456),x=t(279),P=t(29),j=t(156),L=t(82),A=window.config.notificationPosition||"right",I=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).displayed=[],e.storeDisplayed=function(a){e.displayed=[].concat(Object(P.a)(e.displayed),[a])},e}return Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e){for(var a=e.notifications,t=void 0===a?[]:a,n=this.props.notifications,r=!1,o=function(e){if(r)return"continue";r=r||!n.filter((function(a){var n=a.id;return t[e].id===n})).length},l=0;l<t.length;l+=1)o(l);return r}},{key:"componentDidUpdate",value:function(){var e=this,a=this.props.notifications;(void 0===a?[]:a).forEach((function(a){e.displayed.includes(a.id)||(e.props.enqueueSnackbar(a.text,{variant:a.type,autoHideDuration:a.timeout,anchorOrigin:{vertical:"bottom",horizontal:A}}),e.storeDisplayed(a.id),e.props.removeNotification(a.id))}))}},{key:"render",value:function(){return null}}]),t}(i.Component),R=Object(j.b)(Object(c.b)((function(e){return{notifications:e.notifications}}),(function(e){return{removeNotification:function(a){return e(L.c({notificationId:a}))}}}),null,{areStatesEqual:function(e,a){return a.notifications===e.notifications}})(I)),B=t(576),D=function(e){return e.me.roles},V=function(e){return e.room.roomPermissions},F=function(e){return e.room.allowWhenRoleMissing},z=function(e){return e.producers},H=function(e){return e.consumers},W=function(e){return e.room.spotlights},q=function(e){return e.peers},U=function(e,a){return e.peers[a]?e.peers[a].consumers:null},_=function(e){return e.consumers},G=Object(B.a)(q,(function(e){return Object.keys(e)})),K=Object(B.a)(q,(function(e){return Object.values(e)})),Y=Object(B.a)((function(e){return e.lobbyPeers}),(function(e){return Object.keys(e)})),Q=(Object(B.a)(z,(function(e){return Object.values(e).filter((function(e){return"mic"===e.source}))})),Object(B.a)(z,(function(e){return Object.values(e).filter((function(e){return"webcam"===e.source}))})),Object(B.a)(z,(function(e){return Object.values(e).filter((function(e){return"screen"===e.source}))}))),X=Object(B.a)(z,(function(e){return Object.values(e).filter((function(e){return"extravideo"===e.source}))})),J=Object(B.a)(z,(function(e){return Object.values(e).find((function(e){return"mic"===e.source}))})),$=Object(B.a)(z,(function(e){return Object.values(e).find((function(e){return"webcam"===e.source}))})),Z=Object(B.a)(z,(function(e){return Object.values(e).find((function(e){return"screen"===e.source}))})),ee=(Object(B.a)(H,(function(e){return Object.values(e).filter((function(e){return"mic"===e.source}))})),Object(B.a)(H,(function(e){return Object.values(e).filter((function(e){return"webcam"===e.source}))})),Object(B.a)(H,(function(e){return Object.values(e).filter((function(e){return"screen"===e.source}))})),Object(B.a)(W,H,(function(e,a){return Object.values(a).filter((function(a){return"screen"===a.source&&e.includes(a.peerId)}))}))),ae=Object(B.a)(W,H,(function(e,a){return Object.values(a).filter((function(a){return"extravideo"===a.source&&e.includes(a.peerId)}))})),te=Object(B.a)(W,H,(function(e,a){return Object.values(a).filter((function(a){return"mic"===a.source&&!e.includes(a.peerId)}))})),ne=Object(B.a)(W,(function(e){return e.length})),re=Object(B.a)(W,G,(function(e,a){return a.filter((function(a){return e.includes(a)}))})),oe=Object(B.a)(W,K,(function(e,a){return a.filter((function(a){return e.includes(a.id)&&!a.raisedHand})).sort((function(e,a){return String(e.displayName||"").localeCompare(String(a.displayName||""))}))})),le=Object(B.a)(K,(function(e){return e.filter((function(e){return e.raisedHand})).sort((function(e,a){return e.raisedHandTimestamp-a.raisedHandTimestamp}))})),ie=Object(B.a)(W,K,(function(e,a){return a.filter((function(a){return!e.includes(a.id)&&!a.raisedHand})).sort((function(e,a){return String(e.displayName||"").localeCompare(String(a.displayName||""))}))})),se=Object(B.a)(le,oe,ie,(function(e,a,t){return[].concat(Object(P.a)(e),Object(P.a)(a),Object(P.a)(t))})),ce=Object(B.a)(q,(function(e){return Object.values(e).length})),ue=(Object(B.a)(K,W,(function(e,a){return e.filter((function(e){return!a.includes(e.id)})).sort((function(e,a){return String(e.displayName||"").localeCompare(String(a.displayName||""))}))})),Object(B.a)(K,(function(e){return e.reduce((function(e,a){return e+(a.raisedHand?1:0)}),0)}))),de=Object(B.a)(ne,Q,ee,X,ae,(function(e,a,t,n,r){return e+1+a.length+t.length+n.length+r.length})),me=Object(B.a)(J,$,Z,X,(function(e,a,t,n){return{micProducer:e,webcamProducer:a,screenProducer:t,extraVideoProducers:n}})),pe=function(){return Object(B.a)(U,_,(function(e,a){if(!e)return null;var t=e.map((function(e){return a[e]}));return{micConsumer:t.find((function(e){return"mic"===e.source})),webcamConsumer:t.find((function(e){return"webcam"===e.source})),screenConsumer:t.find((function(e){return"screen"===e.source})),extraVideoConsumers:t.filter((function(e){return"extravideo"===e.source}))}}))},fe=function(e){return Object(B.a)(D,V,F,K,(function(a,t,n,r){return!!t&&(!!a.some((function(a){return t[e].includes(a)}))||!!n&&!(!n.includes(e)||0!==r.filter((function(a){return a.roles.some((function(a){return t[e].includes(a)}))})).length))}))},ge=t(216),be=t(640),he=t(653),ve=t(641),Ee=t(642),ye=t(195),we=t(135),Me="CHANGE_ROOM_LOCK",ke="PROMOTE_PEER",Ce="SEND_CHAT",Se="MODERATE_CHAT",Oe="SHARE_SCREEN",Te="EXTRA_VIDEO",Ne="SHARE_FILE",xe="MODERATE_FILES",Pe="MODERATE_ROOM",je=t(278),Le=Object(we.b)(Object(c.b)((function(){var e=fe(Se);return function(a){return{isChatModerator:e(a),room:a.room}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me===e.me&&a.peers===e.peers}})(Object(m.a)((function(e){return{root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}}))((function(e){var a=Object(ge.a)(),t=e.roomClient,n=e.isChatModerator,r=e.room,o=e.classes;return n?s.a.createElement("ul",{className:o.root},s.a.createElement("li",{className:o.listheader},s.a.createElement(k.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.clearChat",defaultMessage:"Clear chat"}),className:o.actionButton,variant:"contained",color:"secondary",disabled:r.clearChatInProgress,onClick:function(){return t.clearChat()}},s.a.createElement(k.a,{id:"room.clearChat",defaultMessage:"Clear chat"}))):null})))),Ae=t(133),Ie=t(337),Re=t.n(Ie),Be=t(577),De=t.n(Be),Ve=t(578),Fe=t.n(Ve),ze=t(69),He=new Fe.a.Renderer;He.link=function(e,a,t){return a=a||e,t=t||e,"<a target='_blank' href='".concat(e,"' title='").concat(a,"'>").concat(t,"</a>")};var We=Object(m.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(1),padding:e.spacing(1),flexShrink:0},selfMessage:{marginLeft:"auto"},remoteMessage:{marginRight:"auto"},text:{"& p":{margin:0}},content:{marginLeft:e.spacing(1)},avatar:{borderRadius:"50%",height:"2rem",alignSelf:"center"}}}))((function(e){var a=Object(ge.a)(),t=e.self,n=e.picture,r=e.text,o=e.time,l=e.name,i=e.classes;return s.a.createElement(ye.a,{className:Re()(i.root,t?i.selfMessage:i.remoteMessage)},s.a.createElement("img",{alt:"Avatar",className:i.avatar,src:n}),s.a.createElement("div",{className:i.content},s.a.createElement(ze.a,{className:i.text,variant:"subtitle1",dangerouslySetInnerHTML:{__html:De.a.sanitize(Fe.a.parse(r,{renderer:He}),{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target","title"]})}}),s.a.createElement(ze.a,{variant:"caption"},t?a.formatMessage({id:"room.me",defaultMessage:"Me"}):l," - ",o)))})),qe=t(354),Ue=t.n(qe),_e=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"shouldComponentUpdate",value:function(e){return e.chat.length!==this.props.chat.length}},{key:"componentDidUpdate",value:function(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"getTimeString",value:function(e){return s.a.createElement(Ae.a,{value:new Date(e)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.chat,n=a.myPicture,r=a.classes;return s.a.createElement("div",{className:r.root,ref:function(a){e.node=a}},t.map((function(a,t){var r=("response"===a.sender?a.picture:n)||Ue.a;return s.a.createElement(We,{key:t,self:"client"===a.sender,picture:r,text:a.text,time:e.getTimeString(a.time),name:a.name})})))}}]),t}(s.a.Component),Ge=Object(c.b)((function(e){return{chat:e.chat,myPicture:e.me.picture}}),null,null,{areStatesEqual:function(e,a){return a.chat===e.chat&&a.me.picture===e.me.picture}})(Object(m.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}}))(_e)),Ke=t(53),Ye=t(204),Qe=t(634),Xe=t(581),Je=t.n(Xe),$e=Object(we.b)(Object(c.b)((function(){var e=fe(Ce);return function(a){return{displayName:a.settings.displayName,picture:a.me.picture,canChat:e(a)}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers&&a.settings.displayName===e.settings.displayName&&a.me.picture===e.me.picture}})(Object(m.a)((function(e){return{root:{padding:e.spacing(1),display:"flex",alignItems:"center",borderRadius:0},input:{marginLeft:8,flex:1},iconButton:{padding:10}}}))((function(e){var a=Object(i.useState)(""),t=Object(Ke.a)(a,2),n=t[0],r=t[1],o=Object(ge.a)(),l=function(e,a,t,n){return{type:"message",text:e,time:Date.now(),name:t,sender:a,picture:n}},c=e.roomClient,u=e.displayName,d=e.picture,m=e.canChat,p=e.classes;return s.a.createElement(ye.a,{className:p.root},s.a.createElement(Ye.a,{className:p.input,placeholder:o.formatMessage({id:"label.chatInput",defaultMessage:"Enter chat message..."}),value:n||"",disabled:!m,onChange:function(e){r(e.target.value)},onKeyPress:function(e){if("Enter"===e.key&&(e.preventDefault(),n&&""!==n)){var a=l(n,"response",u,d);c.sendChatMessage(a),r("")}},autoFocus:!0}),s.a.createElement(Qe.a,{color:"primary",className:p.iconButton,"aria-label":"Send",disabled:!m,onClick:function(){if(n&&""!==n){var e=l(n,"response",u,d);c.sendChatMessage(e),r("")}}},s.a.createElement(Je.a,null)))})))),Ze=Object(m.a)((function(){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto"}}}))((function(e){var a=e.classes;return s.a.createElement(ye.a,{className:a.root},s.a.createElement(Le,null),s.a.createElement(Ge,null),s.a.createElement($e,null))})),ea=t(3),aa=t.n(ea),ta=t(8),na=t(57),ra=t(370),oa=t.n(ra),la=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.roomClient,t=e.displayName,n=e.picture,r=e.canShareFiles,o=e.magnetUri,l=e.file,c=e.classes;return s.a.createElement("div",{className:c.root},s.a.createElement("img",{alt:"Avatar",className:c.avatar,src:n}),s.a.createElement("div",{className:c.fileContent},l.files&&s.a.createElement(i.Fragment,null,s.a.createElement(ze.a,{className:c.text},s.a.createElement(k.a,{id:"filesharing.finished",defaultMessage:"File finished downloading"})),l.files.map((function(e,t){return s.a.createElement("div",{className:c.fileInfo,key:t},s.a.createElement(ze.a,{className:c.text},e.name),s.a.createElement(je.a,{variant:"contained",component:"span",className:c.button,onClick:function(){a.saveFile(e)}},s.a.createElement(k.a,{id:"filesharing.save",defaultMessage:"Save"})))}))),s.a.createElement(ze.a,{className:c.text},s.a.createElement(k.a,{id:"filesharing.sharedFile",defaultMessage:"{displayName} shared a file",values:{displayName:t}})),!l.active&&!l.files&&s.a.createElement("div",{className:c.fileInfo},s.a.createElement(ze.a,{className:c.text},oa.a.decode(o).dn),r?s.a.createElement(je.a,{variant:"contained",component:"span",className:c.button,onClick:function(){a.handleDownload(o)}},s.a.createElement(k.a,{id:"filesharing.download",defaultMessage:"Download"})):s.a.createElement(ze.a,{className:c.text},s.a.createElement(k.a,{id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"}))),l.timeout&&s.a.createElement(ze.a,{className:c.text},s.a.createElement(k.a,{id:"filesharing.missingSeeds",defaultMessage:"If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want."})),l.active&&s.a.createElement("progress",{value:l.progress})))}}]),t}(s.a.PureComponent),ia=Object(we.b)(Object(c.b)((function(e,a){var t=a.magnetUri;return{file:e.files[t],canShareFiles:e.me.canShareFiles}}),null,null,{areStatesEqual:function(e,a){return a.files===e.files&&a.me.canShareFiles===e.me.canShareFiles}})(Object(m.a)((function(e){return{root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(1),boxShadow:"0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)","&:not(:last-child)":{marginBottom:e.spacing(1)}},avatar:{borderRadius:"50%",height:"2rem"},text:{margin:0,padding:e.spacing(1)},fileContent:{display:"flex",alignItems:"center"},fileInfo:{display:"flex",alignItems:"center",padding:e.spacing(1)},button:{marginRight:"auto"}}}))(la))),sa=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"componentDidUpdate",value:function(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"render",value:function(){var e=this,a=this.props,t=a.files,n=a.me,r=a.peers,o=a.intl,l=a.classes;return s.a.createElement("div",{className:l.root,ref:function(a){e.node=a}},Object.entries(t).map((function(e){var a,t,l=Object(Ke.a)(e,2),i=l[0],c=l[1];return n.id===c.peerId?(a=o.formatMessage({id:"room.me",defaultMessage:"Me"}),t=n.picture):r[c.peerId]?(a=r[c.peerId].displayName,t=r[c.peerId].picture):a=o.formatMessage({id:"label.unknown",defaultMessage:"Unknown"}),s.a.createElement(ia,{key:i,magnetUri:i,displayName:a,picture:t||Ue.a})})))}}]),t}(s.a.PureComponent),ca=Object(c.b)((function(e){return{files:e.files,me:e.me,peers:e.peers}}),null,null,{areStatesEqual:function(e,a){return a.files===e.files&&a.me===e.me&&a.peers===e.peers}})(Object(m.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}}))(Object(na.c)(sa))),ua=Object(we.b)(Object(c.b)((function(){var e=fe(xe);return function(a){return{isFileSharingModerator:e(a),room:a.room}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me===e.me&&a.peers===e.peers}})(Object(m.a)((function(e){return{root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}}))((function(e){var a=Object(ge.a)(),t=e.roomClient,n=e.isFileSharingModerator,r=e.room,o=e.classes;return n?s.a.createElement("ul",{className:o.root},s.a.createElement("li",{className:o.listheader},s.a.createElement(k.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.clearFileSharing",defaultMessage:"Clear files"}),className:o.actionButton,variant:"contained",color:"secondary",disabled:r.clearFileSharingInProgress,onClick:function(){return t.clearFileSharing()}},s.a.createElement(k.a,{id:"room.clearFileSharing",defaultMessage:"Clear files"}))):null})))),da=Object(we.b)(Object(c.b)((function(){var e=fe(Ne);return function(a){return{canShareFiles:a.me.canShareFiles,browser:a.me.browser,tabOpen:"files"===a.toolarea.currentToolTab,canShare:e(a)}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me.browser===e.me.browser&&a.me.roles===e.me.roles&&a.me.canShareFiles===e.me.canShareFiles&&a.peers===e.peers&&a.toolarea.currentToolTab===e.toolarea.currentToolTab}})(Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},input:{display:"none"},button:{margin:e.spacing(1)},shareButtonsWrapper:{display:"flex"}}}))((function(e){var a=Object(ge.a)(),t=function(){var a=Object(ta.a)(aa.a.mark((function a(t){return aa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.target.files.length>0)){a.next=3;break}return a.next=3,e.roomClient.shareFiles(t.target.files);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),n=e.canShareFiles,r=e.browser,o=e.canShare,l=e.classes,i=n?a.formatMessage({id:"label.shareFile",defaultMessage:"Share file"}):a.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"}),c=n?a.formatMessage({id:"label.shareGalleryFile",defaultMessage:"Share image"}):a.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"});return s.a.createElement(ye.a,{className:l.root},s.a.createElement(ua,null),s.a.createElement("div",{className:l.shareButtonsWrapper},s.a.createElement("input",{className:l.input,type:"file",disabled:!o,onChange:t,onClick:function(e){return e.target.value=null},id:"share-files-button"}),s.a.createElement("input",{className:l.input,type:"file",disabled:!o,onChange:t,accept:"image/*",id:"share-files-gallery-button"}),s.a.createElement("label",{htmlFor:"share-files-button"},s.a.createElement(je.a,{variant:"contained",component:"span",className:l.button,disabled:!n||!o},i)),"mobile"===r.platform&&n&&o&&s.a.createElement("label",{htmlFor:"share-files-gallery-button"},s.a.createElement(je.a,{variant:"contained",component:"span",className:l.button,disabled:!n||!o},c))),s.a.createElement(ca,null))})))),ma=t(618),pa=t(1),fa=t(111),ga=t(654),ba=t(385),ha=t.n(ba),va=t(386),Ea=t.n(va),ya=t(387),wa=t.n(ya),Ma=t(388),ka=t.n(Ma),Ca=t(452),Sa=t.n(Ca),Oa=t(453),Ta=t.n(Oa),Na=t(383),xa=t.n(Na),Pa=t(384),ja=t.n(Pa),La=t(583),Aa=t.n(La),Ia=t(451),Ra=t.n(Ia),Ba=t(582),Da=t.n(Ba),Va=Object(we.b)(Object(c.b)((function(e,a){var t=a.id,n=pe();return function(e){return Object(pa.a)({peer:e.peers[t]},n(e,t))}}),null,null,{areStatesEqual:function(e,a){return a.peers===e.peers&&a.consumers===e.consumers}})(Object(m.a)((function(e){return{root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},indicators:{display:"flex",padding:e.spacing(1)},buttons:{padding:e.spacing(1)},green:{color:"rgba(0, 153, 0, 1)",marginLeft:e.spacing(2)}}}))((function(e){var a=Object(ge.a)(),t=e.roomClient,n=e.isModerator,r=e.spotlight,o=e.peer,l=e.micConsumer,i=e.webcamConsumer,c=e.screenConsumer,u=e.children,d=e.classes,m=Boolean(i)&&!i.locallyPaused&&!i.remotelyPaused,p=Boolean(l)&&!l.locallyPaused&&!l.remotelyPaused,f=Boolean(c)&&!c.locallyPaused&&!c.remotelyPaused,g=o.picture||Ue.a;return s.a.createElement("div",{className:d.root},s.a.createElement("img",{alt:"Peer avatar",className:d.avatar,src:g}),s.a.createElement("div",{className:d.peerInfo},o.displayName),o.raisedHand&&s.a.createElement(Qe.a,{className:d.buttons,style:{color:fa.a[500]},disabled:!n||o.raisedHandInProgress,onClick:function(e){e.stopPropagation(),t.lowerPeerHand(o.id)}},s.a.createElement(Ra.a,null)),r&&s.a.createElement(Qe.a,{className:d.buttons,style:{color:fa.a[500]},disabled:!0},s.a.createElement(Da.a,null)),c&&r&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteScreenSharing",defaultMessage:"Mute participant share"}),placement:"bottom"},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.muteScreenSharing",defaultMessage:"Mute participant share"}),color:f?"primary":"secondary",disabled:o.peerScreenInProgress,className:d.buttons,onClick:function(e){e.stopPropagation(),f?t.modifyPeerConsumer(o.id,"screen",!0):t.modifyPeerConsumer(o.id,"screen",!1)}},f?s.a.createElement(xa.a,null):s.a.createElement(ja.a,null))),r&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteParticipantVideo",defaultMessage:"Mute participant video"}),placement:"bottom"},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.muteParticipantVideo",defaultMessage:"Mute participant video"}),color:m?"primary":"secondary",disabled:o.peerVideoInProgress,className:d.buttons,onClick:function(e){e.stopPropagation(),m?t.modifyPeerConsumer(o.id,"webcam",!0):t.modifyPeerConsumer(o.id,"webcam",!1)}},m?s.a.createElement(ha.a,null):s.a.createElement(Ea.a,null))),s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute participant"}),placement:"bottom"},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute participant"}),color:p?"primary":"secondary",disabled:o.peerAudioInProgress,className:d.buttons,onClick:function(e){e.stopPropagation(),p?t.modifyPeerConsumer(o.id,"mic",!0):t.modifyPeerConsumer(o.id,"mic",!1)}},p?s.a.createElement(Sa.a,null):s.a.createElement(Ta.a,null))),n&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.kickParticipant",defaultMessage:"Kick out participant"}),placement:"bottom"},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.kickParticipant",defaultMessage:"Kick out participant"}),disabled:o.peerKickInProgress,className:d.buttons,color:"secondary",onClick:function(e){e.stopPropagation(),t.kickPeer(o.id)}},s.a.createElement(Aa.a,null))),n&&l&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteParticipantAudioModerator",defaultMessage:"Mute participant audio globally"}),placement:"bottom"},s.a.createElement(Qe.a,{className:d.buttons,style:{color:fa.a[500]},disabled:!n||o.stopPeerAudioInProgress,onClick:function(e){e.stopPropagation(),t.mutePeer(o.id)}},l.remotelyPaused?s.a.createElement(ka.a,null):s.a.createElement(wa.a,null))),n&&i&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteParticipantVideoModerator",defaultMessage:"Mute participant video globally"}),placement:"bottom"},s.a.createElement(Qe.a,{className:d.buttons,style:{color:fa.a[500]},disabled:!n||o.stopPeerVideoInProgress,onClick:function(e){e.stopPropagation(),t.stopPeerVideo(o.id)}},i.remotelyPaused?s.a.createElement(Ea.a,null):s.a.createElement(ha.a,null))),n&&c&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.muteScreenSharingModerator",defaultMessage:"Mute participant screen share globally"}),placement:"bottom"},s.a.createElement(Qe.a,{className:d.buttons,style:{color:fa.a[500]},disabled:!n||o.stopPeerScreenSharingInProgress,onClick:function(e){e.stopPropagation(),t.stopPeerScreenSharing(o.id)}},c.remotelyPaused?s.a.createElement(ja.a,null):s.a.createElement(xa.a,null))),u)})))),Fa=Object(we.b)(Object(c.b)((function(e){return{me:e.me,settings:e.settings}}),null,null,{areStatesEqual:function(e,a){return a.me===e.me&&a.settings===e.settings}})(Object(m.a)((function(e){return{root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},buttons:{padding:e.spacing(1)},green:{color:"rgba(0, 153, 0, 1)"}}}))((function(e){var a=Object(ge.a)(),t=e.roomClient,n=e.me,r=e.settings,o=e.classes,l=n.picture||Ue.a;return s.a.createElement("div",{className:o.root},s.a.createElement("img",{alt:"My avatar",className:o.avatar,src:l}),s.a.createElement("div",{className:o.peerInfo},r.displayName),s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),placement:"bottom"},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),className:Re()(n.raisedHand?o.green:null,o.buttons),disabled:n.raisedHandInProgress,color:"primary",onClick:function(e){e.stopPropagation(),t.setRaisedHand(!n.raisedHand)}},s.a.createElement(Ra.a,null))))})))),za=Object(we.b)(Object(c.b)((function(e){return{room:e.room}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room}})(Object(m.a)((function(e){return{root:{padding:e.spacing(1),display:"flex"},divider:{marginLeft:e.spacing(2)}}}))((function(e){var a=Object(ge.a)(),t=e.roomClient,n=e.room,r=e.classes;return s.a.createElement("div",{className:r.root},s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.muteAll",defaultMessage:"Mute all"}),variant:"contained",color:"secondary",disabled:n.muteAllInProgress,onClick:function(){return t.muteAllPeers()}},s.a.createElement(k.a,{id:"room.muteAll",defaultMessage:"Mute all"})),s.a.createElement("div",{className:r.divider}),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.stopAllVideo",defaultMessage:"Stop all video"}),variant:"contained",color:"secondary",disabled:n.stopAllVideoInProgress,onClick:function(){return t.stopAllPeerVideo()}},s.a.createElement(k.a,{id:"room.stopAllVideo",defaultMessage:"Stop all video"})),s.a.createElement("div",{className:r.divider}),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"}),variant:"contained",color:"secondary",disabled:n.stopAllScreenSharingInProgress,onClick:function(){return t.stopAllPeerScreenSharing()}},s.a.createElement(k.a,{id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"})),s.a.createElement("div",{className:r.divider}),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"room.closeMeeting",defaultMessage:"Close meeting"}),variant:"contained",color:"secondary",disabled:n.closeMeetingInProgress,onClick:function(){return t.closeMeeting()}},s.a.createElement(k.a,{id:"room.closeMeeting",defaultMessage:"Close meeting"})))})))),Ha=Object(c.b)((function(e,a){return function(e){return e.peerVolumes[a.id]>e.settings.noiseThreshold?{volume:Math.round((e.peerVolumes[a.id]+100)/10)}:{volume:0}}}))(Object(m.a)((function(){return{volumeLarge:{position:"absolute",top:0,bottom:0,right:2,width:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},largeBar:{width:6,borderRadius:6,background:"rgba(yellow, 0.65)",transitionProperty:"height background-color",transitionDuration:"0.25s","&.level0":{height:0,backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level1":{height:"10%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level2":{height:"20%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level3":{height:"30%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level4":{height:"40%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level5":{height:"50%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level6":{height:"60%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level7":{height:"70%",backgroundColor:"rgba(255, 100, 0, 0.65)"},"&.level8":{height:"80%",backgroundColor:"rgba(255, 60, 0, 0.65)"},"&.level9":{height:"90%",backgroundColor:"rgba(255, 30, 0, 0.65)"},"&.level10":{height:"100%",backgroundColor:"rgba(255, 0, 0, 0.65)"}},volumeSmall:{float:"right",display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"1vmin",position:"relative",backgroundSize:"75%"},smallBar:{flex:"0 0 auto",backgroundSize:"75%",backgroundRepeat:"no-repeat",backgroundColor:"rgba(0, 0, 0, 1)",cursor:"pointer",transitionProperty:"opacity, background-color",width:3,borderRadius:2,transitionDuration:"0.25s",position:"absolute",top:"50%",transform:"translateY(-50%)","&.level0":{height:0},"&.level1":{height:"0.2vh"},"&.level2":{height:"0.4vh"},"&.level3":{height:"0.6vh"},"&.level4":{height:"0.8vh"},"&.level5":{height:"1.0vh"},"&.level6":{height:"1.2vh"},"&.level7":{height:"1.4vh"},"&.level8":{height:"1.6vh"},"&.level9":{height:"1.8vh"},"&.level10":{height:"2.0vh"}}}}))((function(e){var a=e.small,t=e.volume,n=e.classes;return s.a.createElement("div",{className:a?n.volumeSmall:n.volumeLarge},s.a.createElement("div",{className:Re()(a?n.smallBar:n.largeBar,"level".concat(t))}))}))),Wa=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"componentDidUpdate",value:function(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"render",value:function(){var e=this,a=this.props,t=a.roomClient,n=a.advancedMode,r=a.isModerator,o=a.participants,l=a.spotlights,i=a.selectedPeerId,c=a.classes;return s.a.createElement("div",{className:c.root,ref:function(a){e.node=a}},r&&s.a.createElement("ul",{className:c.list},s.a.createElement("li",{className:c.listheader},s.a.createElement(k.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),s.a.createElement(za,null)),s.a.createElement("ul",{className:c.list},s.a.createElement("li",{className:c.listheader},s.a.createElement(k.a,{id:"room.me",defaultMessage:"Me"})),s.a.createElement(Fa,null)),s.a.createElement("ul",{className:c.list},s.a.createElement("li",{className:c.listheader},s.a.createElement(k.a,{id:"label.participants",defaultMessage:"Participants"})),s.a.createElement(ma.b,{flipKey:o},o.map((function(e){return s.a.createElement(ma.a,{key:e.id,flipId:e.id},s.a.createElement("li",{key:e.id,className:Re()(c.listItem,{selected:e.id===i}),onClick:function(){return t.setSelectedPeer(e.id)}},l.includes(e.id)?s.a.createElement(Va,{id:e.id,advancedMode:n,isModerator:r,spotlight:!0},s.a.createElement(Ha,{small:!0,id:e.id})):s.a.createElement(Va,{id:e.id,advancedMode:n,isModerator:r})))})))))}}]),t}(s.a.PureComponent),qa=Object(we.b)(Object(c.b)((function(){var e=fe(Pe);return function(a){return{isModerator:e(a),participants:se(a),spotlights:a.room.spotlights,selectedPeerId:a.room.selectedPeerId}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers}})(Object(m.a)((function(e){return{root:{width:"100%",overflowY:"auto",padding:e.spacing(1)},list:{listStyleType:"none",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{fontWeight:"bolder"},listItem:{width:"100%",overflow:"hidden",cursor:"pointer","&.selected":{backgroundColor:"rgba(55, 126, 255, 1)"},"&:not(:last-child)":{borderBottom:"1px solid #CBCBCB"}}}}))(Wa))),Ua=t(584),_a=t.n(Ua),Ga=t(585),Ka=t.n(Ga),Ya=["chat","files","users"],Qa={setToolTab:b},Xa=Object(c.b)((function(e){return{currentToolTab:e.toolarea.currentToolTab,unreadMessages:e.toolarea.unreadMessages,unreadFiles:e.toolarea.unreadFiles,raisedHands:ue(e)}}),Qa,null,{areStatesEqual:function(e,a){return a.toolarea.currentToolTab===e.toolarea.currentToolTab&&a.toolarea.unreadMessages===e.toolarea.unreadMessages&&a.toolarea.unreadFiles===e.toolarea.unreadFiles&&a.peers===e.peers}})(Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:e.palette.background.paper},appBar:{display:"flex",flexDirection:"row"},tabsHeader:{flexGrow:1}}}),{withTheme:!0})((function(e){var a=Object(ge.a)(),t=e.currentToolTab,n=e.unreadMessages,r=e.unreadFiles,o=e.raisedHands,l=e.closeDrawer,i=e.setToolTab,c=e.classes,u=e.theme;return s.a.createElement("div",{className:c.root},s.a.createElement(be.a,{position:"static",color:"default",className:c.appBar},s.a.createElement(he.a,{className:c.tabsHeader,value:Ya.indexOf(t),onChange:function(e,a){return i(Ya[a])},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},s.a.createElement(ve.a,{label:s.a.createElement(Ee.a,{color:"secondary",badgeContent:n},a.formatMessage({id:"label.chat",defaultMessage:"Chat"}))}),s.a.createElement(ve.a,{label:s.a.createElement(Ee.a,{color:"secondary",badgeContent:r},a.formatMessage({id:"label.filesharing",defaultMessage:"File sharing"}))}),s.a.createElement(ve.a,{label:s.a.createElement(Ee.a,{color:"secondary",badgeContent:o},a.formatMessage({id:"label.participants",defaultMessage:"Participants"}))})),s.a.createElement(Qe.a,{onClick:l},"ltr"===u.direction?s.a.createElement(_a.a,null):s.a.createElement(Ka.a,null))),"chat"===t&&s.a.createElement(Ze,null),"files"===t&&s.a.createElement(da,null),"users"===t&&s.a.createElement(qa,null))}))),Ja=t(325),$a=t(586),Za=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.value,t=e.propName,n=e.className,r=e.classLoading,o=e.classInvalid,l=e.editProps,i=e.onChange;return s.a.createElement($a.RIEInput,{value:a,propName:t,className:n,classLoading:r,classInvalid:o,shouldBlockWhileLoading:!0,editProps:l,change:function(e){return i(e)}})}},{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}}]),t}(s.a.Component),et=t(94),at=t(109),tt=t(110),nt=t(643),rt=t(594),ot=t.n(rt),lt=t(595),it=t.n(lt),st=t(596),ct=t.n(st),ut=t(597),dt=t.n(ut),mt=t(598),pt=t.n(mt),ft=new et.a("VideoView"),gt=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={videoWidth:null,videoHeight:null},r._audioTrack=null,r._videoTrack=null,r._videoResolutionTimer=null,r}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.isMe,t=e.isScreen,n=e.isExtraVideo,r=e.showQuality,o=e.displayName,l=e.showPeerInfo,i=e.videoContain,c=e.advancedMode,u=e.videoVisible,d=e.videoMultiLayer,m=e.audioScore,p=e.videoScore,f=e.consumerCurrentSpatialLayer,g=e.consumerCurrentTemporalLayer,b=e.consumerPreferredSpatialLayer,h=e.consumerPreferredTemporalLayer,v=e.audioCodec,E=e.videoCodec,y=e.onChangeDisplayName,w=e.children,M=e.classes,k=e.netInfo,C=this.state,S=C.videoWidth,O=C.videoHeight,T=null;if(r&&(T=s.a.createElement(ot.a,{style:{color:at.a[500]}}),p||m)){var N=p||m;switch(a?N.score:N.producerScore){case 0:case 1:T=s.a.createElement(it.a,{style:{color:at.a[500]}});break;case 2:case 3:T=s.a.createElement(ct.a,{style:{color:at.a[500]}});break;case 4:case 5:case 6:T=s.a.createElement(dt.a,{style:{color:tt.a[500]}});break;case 7:case 8:case 9:T=s.a.createElement(pt.a,{style:{color:nt.a[500]}});break;case 10:T=null}}return s.a.createElement("div",{className:M.root},s.a.createElement("div",{className:M.info},s.a.createElement("div",{className:M.media},s.a.createElement("div",{className:Re()(M.box,"left",{hidden:!c})},v&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"AcodL"},"Acod: "),s.a.createElement("span",{className:"Acod"},v)),E&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"VcodL"},"Vcod: "),s.a.createElement("span",{className:"Vcod"},E)),u&&null!==S&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"ResL"},"Res: "),s.a.createElement("span",{className:"Res"},S,"x",O)),a&&!t&&!n&&k.recv&&k.send&&k.send.iceSelectedTuple&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"RecvL"},"Recv: "),s.a.createElement("span",{className:"RecvBps"},(k.recv.sendBitrate/1024/1024).toFixed(2),"Mb/s"),s.a.createElement("span",{className:"RecvSum"},(k.recv.bytesSent/1024/1024).toFixed(2),"MB"),s.a.createElement("span",{className:"SendL"},"Send: "),s.a.createElement("span",{className:"SendBps"},(k.send.recvBitrate/1024/1024).toFixed(2),"Mb/s"),s.a.createElement("span",{className:"SendSum"},(k.send.bytesReceived/1024/1024).toFixed(2),"MB"),s.a.createElement("span",{className:"IPlocL"},"IPloc: "),s.a.createElement("span",{className:"IPloc"},k.send.iceSelectedTuple.remoteIp),s.a.createElement("span",{className:"IPsrvL"},"IPsrv: "),s.a.createElement("span",{className:"IPsrv"},k.send.iceSelectedTuple.localIp)),d&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"STLcurrL"},"STLcurr: "),s.a.createElement("span",{className:"STLcurr"},f," ",g),s.a.createElement("span",{className:"STLprefL"},"STLpref: "),s.a.createElement("span",{className:"STLpref"},b," ",h))),r&&s.a.createElement("div",{className:Re()(M.box,"right")},T)),l&&s.a.createElement("div",{className:M.peer},s.a.createElement("div",{className:M.box},a?s.a.createElement(s.a.Fragment,null,s.a.createElement(Za,{value:o,propName:"newDisplayName",className:M.displayNameEdit,classLoading:"loading",classInvalid:"invalid",shouldBlockWhileLoading:!0,editProps:{maxLength:30,autoCorrect:"off",spellCheck:!1},onChange:function(e){var a=e.newDisplayName;return y(a)}})):s.a.createElement("span",{className:M.displayNameStatic},o)))),s.a.createElement("video",{ref:"videoElement",className:Re()(M.video,{hidden:!u,isMe:a&&!t,contain:i}),autoPlay:!0,playsInline:!0,muted:!0,controls:!1}),s.a.createElement("audio",{ref:"audioElement",autoPlay:!0,playsInline:!0,muted:a,controls:!1}),w)}},{key:"componentDidMount",value:function(){var e=this.props,a=e.videoTrack,t=e.audioTrack;this._setTracks(a,t)}},{key:"componentWillUnmount",value:function(){clearInterval(this._videoResolutionTimer);var e=this.refs.videoElement;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var a=this.props,t=a.videoTrack,n=a.audioTrack;this._setTracks(t,n)}}},{key:"_setTracks",value:function(e,a){var t=this;if(this._videoTrack!==e||this._audioTrack!==a){this._videoTrack=e,this._audioTrack=a,clearInterval(this._videoResolutionTimer),this._hideVideoResolution();var n=this.refs,r=n.videoElement,o=n.audioElement;if(e){var l=new MediaStream;l.addTrack(e),r.srcObject=l,r.oncanplay=function(){return t.setState({videoCanPlay:!0})},r.onplay=function(){o.play().catch((function(e){return ft.warn('audioElement.play() [error:"%o]',e)}))},r.play().catch((function(e){return ft.warn('videoElement.play() [error:"%o]',e)})),this._showVideoResolution()}else r.srcObject=null;if(a){var i=new MediaStream;i.addTrack(a),o.srcObject=i,o.play().catch((function(e){return ft.warn('audioElement.play() [error:"%o]',e)}))}else o.srcObject=null}}},{key:"_showVideoResolution",value:function(){var e=this;this._videoResolutionTimer=setInterval((function(){var a=e.state,t=a.videoWidth,n=a.videoHeight,r=e.refs.videoElement;r.videoWidth===t&&r.videoHeight===n||e.setState({videoWidth:r.videoWidth,videoHeight:r.videoHeight})}),1e3)}},{key:"_hideVideoResolution",value:function(){this.setState({videoWidth:null,videoHeight:null})}}]),t}(s.a.PureComponent),bt=Object(m.a)((function(e){return{root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"cover",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"var(--peer-video-bg-color)","&.isMe":{transform:"scaleX(-1)"},"&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"},"&.contain":{objectFit:"contain",backgroundColor:"rgba(0, 0, 0, 1)"}},info:{width:"100%",height:"100%",padding:e.spacing(1),position:"absolute",zIndex:10,display:"flex",flexDirection:"column",justifyContent:"space-between"},media:{display:"flex",transitionProperty:"opacity",transitionDuration:".15s"},box:{padding:e.spacing(.5),borderRadius:2,userSelect:"none",margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8em","&.left":{backgroundColor:"rgba(0, 0, 0, 0.25)",display:"grid",gap:"1px 5px",gridTemplateAreas:'\t\t\t\t"AcodL\t\tAcod\tAcod\tAcod\tAcod" \t\t\t\t\t"VcodL\t\tVcod\tVcod\tVcod\tVcod" \t\t\t\t\t"ResL\t\tRes\t\tRes\t\tRes\t\tRes" \t\t\t\t\t"RecvL\t\tRecvBps RecvBps RecvSum RecvSum" \t\t\t\t\t"SendL\t\tSendBps SendBps SendSum SendSum" \t\t\t\t\t"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc" \t\t\t\t\t"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv" \t\t\t\t\t"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr" \t\t\t\t\t"STLprefL\tSTLpref STLpref STLpref STLpref"',"& .AcodL":{gridArea:"AcodL"},"& .Acod":{gridArea:"Acod"},"& .VcodL":{gridArea:"VcodL"},"& .Vcod":{gridArea:"Vcod"},"& .ResL":{gridArea:"ResL"},"& .Res":{gridArea:"Res"},"& .RecvL":{gridArea:"RecvL"},"& .RecvBps":{gridArea:"RecvBps",justifySelf:"flex-end"},"& .RecvSum":{gridArea:"RecvSum",justifySelf:"flex-end"},"& .SendL":{gridArea:"SendL"},"& .SendBps":{gridArea:"SendBps",justifySelf:"flex-end"},"& .SendSum":{gridArea:"SendSum",justifySelf:"flex-end"},"& .IPlocL":{gridArea:"IPlocL"},"& .IPloc":{gridArea:"IPloc"},"& .IPsrvL":{gridArea:"IPsrvL"},"& .IPsrv":{gridArea:"IPsrv"},"& .STLcurrL":{gridArea:"STLcurrL"},"& .STLcurr":{gridArea:"STLcurr"},"& .STLprefL":{gridArea:"STLprefL"},"& .STLpref":{gridArea:"STLpref"}},"&.right":{marginLeft:"auto",width:30},"&.hidden":{opacity:0,transitionDuration:"0s"}},peer:{display:"flex"},displayNameEdit:{fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)",border:"none",borderBottom:"1px solid #aeff00",backgroundColor:"transparent"},displayNameStatic:{userSelect:"none",cursor:"text",fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)","&:hover":{backgroundColor:"rgb(174, 255, 0, 0.25)"}}}}))(gt),ht=t(644),vt=t(599),Et=t.n(vt),yt=t(390),wt=t.n(yt),Mt=Object(we.b)(Object(c.b)((function(e,a){var t=a.id,n=pe();return function(e){return Object(pa.a)(Object(pa.a)({peer:e.peers[t]},n(e,t)),{},{windowConsumer:e.room.windowConsumer,activeSpeaker:t===e.room.activeSpeakerId,browser:e.me.browser})}}),(function(e){return{toggleConsumerFullscreen:function(a){a&&e(g.E(a.id))},toggleConsumerWindow:function(a){a&&e(g.F(a.id))}}}),null,{areStatesEqual:function(e,a){return a.peers===e.peers&&a.consumers===e.consumers&&a.room.activeSpeakerId===e.room.activeSpeakerId&&a.room.windowConsumer===e.room.windowConsumer&&a.me.browser===e.me.browser}})(Object(m.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:4},"&.screen":{order:3}},fab:{margin:e.spacing(1)},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},controls:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,opacity:0,transition:"opacity 0.3s",touchAction:"none","&.hover":{opacity:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:20,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}}),{withTheme:!0})((function(e){var a=Object(i.useState)(!1),t=Object(Ke.a)(a,2),n=t[0],r=t[1],o=Object(ge.a)(),l=null,c=e.roomClient,u=e.advancedMode,d=e.peer,m=e.activeSpeaker,p=e.browser,f=e.micConsumer,g=e.webcamConsumer,b=e.screenConsumer,h=e.extraVideoConsumers,v=e.toggleConsumerFullscreen,E=e.toggleConsumerWindow,y=e.spacing,w=e.style,M=e.smallContainer,C=e.windowConsumer,S=e.classes,O=e.theme,T=Boolean(f)&&!f.locallyPaused&&!f.remotelyPaused,N=Boolean(g)&&!g.locallyPaused&&!g.remotelyPaused,x=Boolean(b)&&!b.locallyPaused&&!b.remotelyPaused,P=Object(Ja.a)(O.breakpoints.down("sm")),j=Object(pa.a)({margin:y},w);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Re()(S.root,"webcam",n?"hover":null,m?"active-speaker":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)},style:j},s.a.createElement("div",{className:Re()(S.viewContainer)},!N&&s.a.createElement("div",{className:S.videoInfo},s.a.createElement("p",null,s.a.createElement(k.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),s.a.createElement("div",{className:Re()(S.controls,n?"hover":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)}},s.a.createElement(ga.a,{title:o.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),placement:P?"top":"left"},M?s.a.createElement(Qe.a,{"aria-label":o.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:S.smallContainer,disabled:!f,color:"primary",size:"small",onClick:function(){T?c.modifyPeerConsumer(d.id,"mic",!0):c.modifyPeerConsumer(d.id,"mic",!1)}},T?s.a.createElement(Sa.a,null):s.a.createElement(Ta.a,null)):s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:S.fab,disabled:!f,color:T?"default":"secondary",size:"large",onClick:function(){T?c.modifyPeerConsumer(d.id,"mic",!0):c.modifyPeerConsumer(d.id,"mic",!1)}},T?s.a.createElement(Sa.a,null):s.a.createElement(Ta.a,null))),"mobile"!==p.platform&&s.a.createElement(ga.a,{title:o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},M?s.a.createElement(Qe.a,{"aria-label":o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.smallContainer,disabled:!N||C===g.id,size:"small",color:"primary",onClick:function(){E(g)}},s.a.createElement(Et.a,null)):s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!N||C===g.id,size:"large",onClick:function(){E(g)}},s.a.createElement(Et.a,null))),s.a.createElement(ga.a,{title:o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},M?s.a.createElement(Qe.a,{"aria-label":o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.smallContainer,disabled:!N,size:"small",color:"primary",onClick:function(){v(g)}},s.a.createElement(wt.a,null)):s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!N,size:"large",onClick:function(){v(g)}},s.a.createElement(wt.a,null)))),s.a.createElement(bt,{showQuality:!0,advancedMode:u,peer:d,displayName:d.displayName,showPeerInfo:!0,consumerSpatialLayers:g?g.spatialLayers:null,consumerTemporalLayers:g?g.temporalLayers:null,consumerCurrentSpatialLayer:g?g.currentSpatialLayer:null,consumerCurrentTemporalLayer:g?g.currentTemporalLayer:null,consumerPreferredSpatialLayer:g?g.preferredSpatialLayer:null,consumerPreferredTemporalLayer:g?g.preferredTemporalLayer:null,videoMultiLayer:g&&"simple"!==g.type,videoTrack:g&&g.track,videoVisible:N,audioTrack:f&&f.track,audioCodec:f&&f.codec,videoCodec:g&&g.codec,audioScore:f?f.score:null,videoScore:g?g.score:null},s.a.createElement(Ha,{id:d.id})))),h.map((function(e){return s.a.createElement("div",{key:e.id,className:Re()(S.root,"webcam",n?"hover":null,m?"active-speaker":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)},style:j},s.a.createElement("div",{className:Re()(S.viewContainer)},!N&&s.a.createElement("div",{className:S.videoInfo},s.a.createElement("p",null,s.a.createElement(k.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),s.a.createElement("div",{className:Re()(S.controls,n?"hover":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)}},"mobile"!==p.platform&&s.a.createElement(ga.a,{title:o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},M?s.a.createElement(Qe.a,{"aria-label":o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.smallContainer,disabled:!N||C===e.id,size:"small",color:"primary",onClick:function(){E(e)}},s.a.createElement(Et.a,null)):s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!N||C===e.id,size:"large",onClick:function(){E(e)}},s.a.createElement(Et.a,null))),s.a.createElement(ga.a,{title:o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},M?s.a.createElement(Qe.a,{"aria-label":o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.smallContainer,disabled:!N,size:"small",color:"primary",onClick:function(){v(e)}},s.a.createElement(wt.a,null)):s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!N,size:"large",onClick:function(){v(e)}},s.a.createElement(wt.a,null)))),s.a.createElement(bt,{showQuality:!0,advancedMode:u,peer:d,displayName:d.displayName,showPeerInfo:!0,consumerSpatialLayers:e?e.spatialLayers:null,consumerTemporalLayers:e?e.temporalLayers:null,consumerCurrentSpatialLayer:e?e.currentSpatialLayer:null,consumerCurrentTemporalLayer:e?e.currentTemporalLayer:null,consumerPreferredSpatialLayer:e?e.preferredSpatialLayer:null,consumerPreferredTemporalLayer:e?e.preferredTemporalLayer:null,videoMultiLayer:e&&"simple"!==e.type,videoTrack:e&&e.track,videoVisible:N,videoCodec:e&&e.codec,videoScore:e?e.score:null})))})),b&&s.a.createElement("div",{className:Re()(S.root,"screen",n?"hover":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)},style:j},s.a.createElement("div",{className:Re()(S.viewContainer)},!x&&s.a.createElement("div",{className:S.videoInfo},s.a.createElement("p",null,s.a.createElement(k.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),s.a.createElement("div",{className:Re()(S.controls,n?"hover":null),onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},onTouchStart:function(){l&&clearTimeout(l),r(!0)},onTouchEnd:function(){l&&clearTimeout(l),l=setTimeout((function(){r(!1)}),2e3)}},"mobile"!==p.platform&&s.a.createElement(ga.a,{title:o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!x||C===b.id,size:M?"small":"large",onClick:function(){E(b)}},s.a.createElement(Et.a,null))),s.a.createElement(ga.a,{title:o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},s.a.createElement(ht.a,{"aria-label":o.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!x,size:M?"small":"large",onClick:function(){v(b)}},s.a.createElement(wt.a,null)))),s.a.createElement(bt,{showQuality:!0,advancedMode:u,videoContain:!0,consumerSpatialLayers:b?b.spatialLayers:null,consumerTemporalLayers:b?b.temporalLayers:null,consumerCurrentSpatialLayer:b?b.currentSpatialLayer:null,consumerCurrentTemporalLayer:b?b.currentTemporalLayer:null,consumerPreferredSpatialLayer:b?b.preferredSpatialLayer:null,consumerPreferredTemporalLayer:b?b.preferredTemporalLayer:null,videoMultiLayer:b&&"simple"!==b.type,videoTrack:b&&b.track,videoVisible:x,videoCodec:b&&b.codec,videoScore:b?b.score:null}))))})))),kt=Object(we.b)(Object(c.b)((function(){var e=fe(Oe);return function(a){var t;return t=a.peerVolumes[a.me.id]<a.settings.noiseThreshold?1+Math.abs(a.peerVolumes[a.me.id]-a.settings.noiseThreshold)/(-120-a.settings.noiseThreshold):0,Object(pa.a)(Object(pa.a)({me:a.me},me(a)),{},{settings:a.settings,activeSpeaker:a.me.id===a.room.activeSpeakerId,canShareScreen:e(a),transports:a.transports,noiseVolume:t})}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me===e.me&&Math.round(a.peerVolumes[a.me.id])===Math.round(e.peerVolumes[e.me.id])&&a.peers===e.peers&&a.producers===e.producers&&a.settings===e.settings&&a.transports===e.transports}})(Object(m.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:1},"&.screen":{order:2}},fab:{margin:e.spacing(1),pointerEvents:"auto"},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},meTag:{position:"absolute",float:"left",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"rgba(255, 255, 255, 0.5)",fontSize:"7em",zIndex:30,margin:0,opacity:0,transition:"opacity 0.1s ease-in-out","&.hover":{opacity:1},"&.smallContainer":{fontSize:"3em"}},controls:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,touchAction:"none",pointerEvents:"none","&.hide":{transition:"opacity 0.1s ease-in-out",opacity:0},"&.hover":{opacity:1}},ptt:{position:"absolute",float:"left",top:"25%",left:"50%",transform:"translate(-50%, 0%)",color:"rgba(255, 255, 255, 0.7)",fontSize:"1.3em",backgroundColor:"rgba(245, 0, 87, 0.70)",margin:"4px",padding:e.spacing(2),zIndex:1200,borderRadius:"20px",textAlign:"center",opacity:0,transition:"opacity 1s ease",pointerEvents:"none","&.enabled":{transition:"opacity 0.1s",opacity:1}}}}),{withTheme:!0})((function(e){var a,t,n,r,o,l,c=Object(i.useState)(!1),u=Object(Ke.a)(c,2),d=u[0],m=u[1],p=Object(ge.a)(),f=null,g=e.roomClient,b=e.me,h=e.settings,v=e.activeSpeaker,E=e.spacing,y=e.style,w=e.smallContainer,M=e.advancedMode,C=e.micProducer,S=e.webcamProducer,O=e.screenProducer,T=e.extraVideoProducers,N=e.canShareScreen,x=e.transports,P=e.noiseVolume,j=e.classes,L=Boolean(S)&&!S.locallyPaused&&!S.remotelyPaused,A=Boolean(O)&&!O.locallyPaused&&!O.remotelyPaused;b.canSendMic?C?C.locallyPaused||C.remotelyPaused?(a="muted",t=p.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(a="on",t=p.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(a="off",t=p.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(a="unsupported",t=p.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),b.canSendWebcam?S?(n="on",r=p.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(n="off",r=p.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(n="unsupported",r=p.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),b.canShareScreen?O?(o="on",l=p.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(o="off",l=p.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(o="unsupported",l=p.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));var I=s.a.useState(!1),R=Object(Ke.a)(I,2),B=R[0],D=R[1],V=function(){D(!1)};"off"===o&&b.screenShareInProgress&&B&&V();var F={margin:E},z=null;C&&C.score&&(z=C.score.reduce((function(e,a){return e.score<a.score?e:a})));var H=null;return S&&S.score&&(H=S.score.reduce((function(e,a){return e.score<a.score?e:a}))),Object(i.useEffect)((function(){var e;return M&&(e=setInterval((function(){return g.getTransportStats()}),1e3)),function(){return clearInterval(e)}}),[g,M]),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Re()(j.root,"webcam",d?"hover":null,v?"active-speaker":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){f&&clearTimeout(f),m(!0)},onTouchEnd:function(){f&&clearTimeout(f),f=setTimeout((function(){m(!1)}),2e3)},style:F},"mobile"!==b.browser.platform&&w&&s.a.createElement("div",{className:Re()(j.ptt,"muted"===a&&b.isSpeaking?"enabled":null)},s.a.createElement(k.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})),s.a.createElement("div",{className:j.viewContainer,style:y},"mobile"!==b.browser.platform&&!w&&s.a.createElement("div",{className:Re()(j.ptt,"muted"===a&&b.isSpeaking?"enabled":null)},s.a.createElement(k.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})),s.a.createElement("p",{className:Re()(j.meTag,d?"hover":null,w?"smallContainer":null)},s.a.createElement(k.a,{id:"room.me",defaultMessage:"ME"})),!h.buttonControlBar&&s.a.createElement("div",{className:Re()(j.controls,h.hiddenControls?"hide":null,d?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){f&&clearTimeout(f),m(!0)},onTouchEnd:function(){f&&clearTimeout(f),f=setTimeout((function(){m(!1)}),2e3)}},s.a.createElement(s.a.Fragment,null,s.a.createElement(ga.a,{title:t,placement:"left"},w?s.a.createElement("div",null,s.a.createElement(Qe.a,{"aria-label":p.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:j.smallContainer,disabled:!b.canSendMic||b.audioInProgress,color:"on"===a?h.voiceActivatedUnmute&&!b.isAutoMuted?"primary":"default":"secondary",size:"small",onClick:function(){"off"===a?g.updateMic({start:!0}):"on"===a?g.muteMic():g.unmuteMic()}},"on"===a?s.a.createElement(wa.a,{color:b.isAutoMuted?"secondary":"primary",style:{opacity:P}}):s.a.createElement(ka.a,null))):s.a.createElement("div",null,s.a.createElement(ht.a,{"aria-label":p.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:j.fab,disabled:!b.canSendMic||b.audioInProgress,color:"on"===a?h.voiceActivatedUnmute&&!b.isAutoMuted?"primary":"default":"secondary",size:"large",onClick:function(){"off"===a?g.updateMic({start:!0}):"on"===a?g.muteMic():g.unmuteMic()}},"on"===a?s.a.createElement(wa.a,{color:b.isAutoMuted&&h.voiceActivatedUnmute?"secondary":"primary",style:b.isAutoMuted&&h.voiceActivatedUnmute?{opacity:P}:{opacity:1}}):s.a.createElement(ka.a,null)))),s.a.createElement(ga.a,{title:r,placement:"left"},w?s.a.createElement("div",null,s.a.createElement(Qe.a,{"aria-label":p.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:j.smallContainer,disabled:!b.canSendWebcam||b.webcamInProgress,color:"on"===n?"primary":"secondary",size:"small",onClick:function(){"on"===n?g.disableWebcam():g.updateWebcam({start:!0})}},"on"===n?s.a.createElement(ha.a,null):s.a.createElement(Ea.a,null))):s.a.createElement("div",null,s.a.createElement(ht.a,{"aria-label":p.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:j.fab,disabled:!b.canSendWebcam||b.webcamInProgress,color:"on"===n?"default":"secondary",size:"large",onClick:function(){"on"===n?g.disableWebcam():g.updateWebcam({start:!0})}},"on"===n?s.a.createElement(ha.a,null):s.a.createElement(Ea.a,null)))),"mobile"!==b.browser.platform&&s.a.createElement(ga.a,{open:B,onClose:V,onOpen:function(){D(!0)},title:l,placement:"left"},w?s.a.createElement("div",null,s.a.createElement(Qe.a,{"aria-label":p.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:j.smallContainer,disabled:!N||!b.canShareScreen||b.screenShareInProgress,color:"primary",size:"small",onClick:function(){"off"===o?g.updateScreenSharing({start:!0}):"on"===o&&g.disableScreenSharing()}},("on"===o||"unsupported"===o)&&s.a.createElement(ja.a,null),"off"===o&&s.a.createElement(xa.a,null))):s.a.createElement("div",null,s.a.createElement(ht.a,{"aria-label":p.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:j.fab,disabled:!N||!b.canShareScreen||b.screenShareInProgress,color:"on"===o?"primary":"default",size:"large",onClick:function(){"off"===o?g.updateScreenSharing({start:!0}):"on"===o&&g.disableScreenSharing()}},("on"===o||"unsupported"===o)&&s.a.createElement(ja.a,null),"off"===o&&s.a.createElement(xa.a,null)))))),s.a.createElement(bt,{isMe:!0,VideoView:!0,advancedMode:M,peer:b,displayName:h.displayName,showPeerInfo:!0,videoTrack:S&&S.track,videoVisible:L,audioCodec:C&&C.codec,videoCodec:S&&S.codec,netInfo:x&&x,audioScore:z,videoScore:H,showQuality:!0,onChangeDisplayName:function(e){g.changeDisplayName(e)}},"muted"===a?null:s.a.createElement(Ha,{id:b.id})))),T.map((function(e){return s.a.createElement("div",{key:e.id,className:Re()(j.root,"webcam",d?"hover":null,v?"active-speaker":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){f&&clearTimeout(f),m(!0)},onTouchEnd:function(){f&&clearTimeout(f),f=setTimeout((function(){m(!1)}),2e3)},style:F},s.a.createElement("div",{className:j.viewContainer,style:y},s.a.createElement("p",{className:Re()(j.meTag,d?"hover":null,w?"smallContainer":null)},s.a.createElement(k.a,{id:"room.me",defaultMessage:"ME"})),s.a.createElement("div",{className:Re()(j.controls,h.hiddenControls?"hide":null,d?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){f&&clearTimeout(f),m(!0)},onTouchEnd:function(){f&&clearTimeout(f),f=setTimeout((function(){m(!1)}),2e3)}},s.a.createElement(ga.a,{title:r,placement:"left"},w?s.a.createElement("div",null,s.a.createElement(Qe.a,{"aria-label":p.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:j.smallContainer,disabled:!b.canSendWebcam||b.webcamInProgress,size:"small",color:"primary",onClick:function(){g.disableExtraVideo(e.id)}},s.a.createElement(ha.a,null))):s.a.createElement("div",null,s.a.createElement(ht.a,{"aria-label":p.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:j.fab,disabled:!b.canSendWebcam||b.webcamInProgress,size:w?"small":"large",onClick:function(){g.disableExtraVideo(e.id)}},s.a.createElement(ha.a,null))))),s.a.createElement(bt,{isMe:!0,isExtraVideo:!0,advancedMode:M,peer:b,displayName:h.displayName,showPeerInfo:!0,videoTrack:e&&e.track,videoVisible:L,videoCodec:e&&e.codec,onChangeDisplayName:function(e){g.changeDisplayName(e)}})))})),O&&s.a.createElement("div",{className:Re()(j.root,"screen",d?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){f&&clearTimeout(f),m(!0)},onTouchEnd:function(){f&&clearTimeout(f),f=setTimeout((function(){m(!1)}),2e3)},style:F},s.a.createElement("div",{className:j.viewContainer,style:y},s.a.createElement("p",{className:Re()(j.meTag,d?"hover":null,w?"smallContainer":null)},s.a.createElement(k.a,{id:"room.me",defaultMessage:"ME"})),s.a.createElement(bt,{isMe:!0,isScreen:!0,advancedMode:M,videoContain:!0,videoTrack:O&&O.track,videoVisible:A,videoCodec:O&&O.codec}))))})))),Ct=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).updateDimensions=function(){if(r.peersRef.current){var e=r.props.boxes;if(0!==e){for(var a,t,n=r.peersRef.current.clientWidth-(r.props.buttonControlBar?60:0),o=r.peersRef.current.clientHeight-(r.props.toolbarsVisible||r.props.permanentTopBar?60:0),l=1;l<100;l+=1){if(o<(t=(a=n/Math.ceil(e/l))/1.334)*l){a=1.334*(t=o/l);break}if(o-t*l<t)break}Math.ceil(r.state.peerWidth)!==Math.ceil(.94*a)&&r.setState({peerWidth:.94*a,peerHeight:.94*t})}}},r.state={},r.resizeTimeout=null,r.peersRef=s.a.createRef(),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){return e.updateDimensions()}),250)})),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.updateDimensions()}},{key:"render",value:function(){var e=this.props,a=e.advancedMode,t=e.spotlightsPeers,n=e.toolbarsVisible,r=e.permanentTopBar,o=e.buttonControlBar,l=e.classes,i={width:this.state.peerWidth?this.state.peerWidth:0,height:this.state.peerHeight?this.state.peerHeight:0};return s.a.createElement("div",{className:Re()(l.root,n||r?l.showingToolBar:l.hiddenToolBar,o?l.buttonControlBar:null),ref:this.peersRef},s.a.createElement(kt,{advancedMode:a,spacing:6,style:i}),t.map((function(e){return s.a.createElement(Mt,{key:e,advancedMode:a,id:e,spacing:6,style:i})})))}}]),t}(s.a.PureComponent),St=Object(c.b)((function(e){return{boxes:de(e),spotlightsPeers:re(e),toolbarsVisible:e.room.toolbarsVisible,permanentTopBar:e.settings.permanentTopBar,buttonControlBar:e.settings.buttonControlBar,toolAreaOpen:e.toolarea.toolAreaOpen}}),null,null,{areStatesEqual:function(e,a){return a.peers===e.peers&&a.producers===e.producers&&a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.settings.buttonControlBar===e.settings.buttonControlBar&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen}})(Object(m.a)((function(e){return{root:{width:"100%",height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",overflow:"hidden",justifyContent:"center",alignItems:"center",alignContent:"center"},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:60,transition:"padding .5s"},buttonControlBar:{paddingLeft:60,[e.breakpoints.down("sm")]:{paddingLeft:0}}}}),{withTheme:!0})(Ct)),Ot=Object(c.b)((function(e,a){var t=a.id,n=pe();return Object(pa.a)({peer:e.peers[t]},n(e,t))}),null,null,{areStatesEqual:function(e,a){return a.peers===e.peers&&a.consumers===e.consumers&&a.room.activeSpeakerId===e.room.activeSpeakerId}})(Object(m.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.webcam":{order:2},"&.screen":{order:1}},viewContainer:{position:"relative","&.webcam":{order:2},"&.screen":{order:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:21,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}}),{withTheme:!0})((function(e){var a=e.advancedMode,t=e.peer,n=e.micConsumer,r=e.webcamConsumer,o=e.screenConsumer,l=e.spacing,i=e.style,c=e.classes,u=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,d=Boolean(o)&&!o.locallyPaused&&!o.remotelyPaused,m={margin:l};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Re()(c.root,"webcam"),style:m},s.a.createElement("div",{className:Re()(c.viewContainer),style:i},!u&&s.a.createElement("div",{className:c.videoInfo},s.a.createElement("p",null,s.a.createElement(k.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),s.a.createElement(bt,{advancedMode:a,peer:t,displayName:t.displayName,showPeerInfo:!0,consumerSpatialLayers:r?r.spatialLayers:null,consumerTemporalLayers:r?r.temporalLayers:null,consumerCurrentSpatialLayer:r?r.currentSpatialLayer:null,consumerCurrentTemporalLayer:r?r.currentTemporalLayer:null,consumerPreferredSpatialLayer:r?r.preferredSpatialLayer:null,consumerPreferredTemporalLayer:r?r.preferredTemporalLayer:null,videoMultiLayer:r&&"simple"!==r.type,videoTrack:r&&r.track,videoVisible:u,audioCodec:n&&n.codec,videoCodec:r&&r.codec,audioScore:n?n.score:null,videoScore:r?r.score:null},s.a.createElement(Ha,{id:t.id})))),o&&s.a.createElement("div",{className:Re()(c.root,"screen")},!d&&s.a.createElement("div",{className:c.videoInfo,style:i},s.a.createElement("p",null,s.a.createElement(k.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),d&&s.a.createElement("div",{className:Re()(c.viewContainer),style:i},s.a.createElement(bt,{advancedMode:a,videoContain:!0,consumerSpatialLayers:o?o.spatialLayers:null,consumerTemporalLayers:o?o.temporalLayers:null,consumerCurrentSpatialLayer:o?o.currentSpatialLayer:null,consumerCurrentTemporalLayer:o?o.currentTemporalLayer:null,consumerPreferredSpatialLayer:o?o.preferredSpatialLayer:null,consumerPreferredTemporalLayer:o?o.preferredTemporalLayer:null,videoMultiLayer:o&&"simple"!==o.type,videoTrack:o&&o.track,videoVisible:d,videoCodec:o&&o.codec,videoScore:o?o.score:null}))))}))),Tt=t(130),Nt=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={lastSpeaker:null},r.getActivePeerId=function(){var e=r.props,a=e.selectedPeerId,t=e.peers,n=r.state.lastSpeaker;if(a&&t[a])return r.props.selectedPeerId;if(n&&t[n])return r.state.lastSpeaker;var o=Object.keys(t);return o.length>0?o[0]:void 0},r.isSharingCamera=function(e){return r.props.peers[e]&&r.props.peers[e].consumers.some((function(e){return"screen"===r.props.consumers[e].source}))},r.updateDimensions=function(){var e={},a=r.rootContainer.current;if(a){var t=a.clientWidth,n=.8*a.clientHeight-(r.props.toolbarsVisible||r.props.permanentTopBar?40:0),o=.2*a.clientHeight;if(r.activePeerContainer.current){var l=t-0,i=l/1.334;r.isSharingCamera(r.getActivePeerId())&&(i=(l/=2)/1.334),i>n-40&&(l=1.334*(i=n-40)),e.speakerWidth=l,e.speakerHeight=i}if(r.filmStripContainer.current){var s=o-10,c=1.334*s;c*r.props.boxes>t-0&&(s=(c=(t-0)/r.props.boxes)/1.334),e.filmStripWidth=c,e.filmStripHeight=s}r.setState(Object(pa.a)({},e))}},r.resizeTimeout=null,r.rootContainer=s.a.createRef(),r.activePeerContainer=s.a.createRef(),r.filmStripContainer=s.a.createRef(),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){return e.updateDimensions()}),250)})),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(null!=this.props.activeSpeakerId&&this.props.activeSpeakerId!==this.props.myId&&this.setState({lastSpeaker:this.props.activeSpeakerId}),this.updateDimensions())}},{key:"render",value:function(){var e=this,a=this.props,t=a.roomClient,n=a.peers,r=a.myId,o=a.advancedMode,l=a.spotlights,i=a.toolbarsVisible,c=a.permanentTopBar,u=a.classes,d=this.getActivePeerId(),m={width:this.state.speakerWidth,height:this.state.speakerHeight},p={width:this.state.filmStripWidth,height:this.state.filmStripHeight};return s.a.createElement("div",{className:Re()(u.root,i||c?u.showingToolBar:u.hiddenToolBar),ref:this.rootContainer},s.a.createElement("div",{className:u.speaker,ref:this.activePeerContainer},n[d]&&s.a.createElement(Ot,{advancedMode:o,id:d,style:m})),s.a.createElement("div",{className:u.filmStrip,ref:this.filmStripContainer},s.a.createElement(Tt.a,{container:!0,justify:"center",spacing:0},s.a.createElement(Tt.a,{item:!0},s.a.createElement("div",{className:Re()(u.filmItem,{active:r===d})},s.a.createElement(kt,{advancedMode:o,style:p,smallContainer:!0}))),Object.keys(n).map((function(a){return l.find((function(e){return e===a}))?s.a.createElement(Tt.a,{key:a,item:!0},s.a.createElement("div",{key:a,onClick:function(){return t.setSelectedPeer(a)},className:Re()(u.filmItem,{selected:e.props.selectedPeerId===a,active:a===d})},s.a.createElement(Mt,{advancedMode:o,id:a,style:p,smallContainer:!0}))):""})))))}}]),t}(s.a.PureComponent),xt=Object(we.b)(Object(c.b)((function(e){return{activeSpeakerId:e.room.activeSpeakerId,selectedPeerId:e.room.selectedPeerId,peers:e.peers,consumers:e.consumers,myId:e.me.id,spotlights:e.room.spotlights,boxes:de(e),toolbarsVisible:e.room.toolbarsVisible,toolAreaOpen:e.toolarea.toolAreaOpen,permanentTopBar:e.settings.permanentTopBar}}),null,null,{areStatesEqual:function(e,a){return a.room.activeSpeakerId===e.room.activeSpeakerId&&a.room.selectedPeerId===e.room.selectedPeerId&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.peers===e.peers&&a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.me.id===e.me.id}})(Object(m.a)((function(){return{root:{height:"100%",width:"100%",display:"grid",overflow:"hidden",gridTemplateColumns:"1fr",gridTemplateRows:"1fr 0.25fr"},speaker:{gridArea:"1 / 1 / 1 / 1",display:"flex",justifyContent:"center",alignItems:"center"},filmStrip:{gridArea:"2 / 1 / 2 / 1"},filmItem:{display:"flex",border:"var(--peer-border)","&.selected":{borderColor:"var(--selected-peer-border-color)"},"&.active":{borderColor:"var(--selected-peer-border-color)"}},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:60,transition:"padding .5s"}}}))(Nt))),Pt=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e))._audioTrack=null,r._audioOutputDevice=null,r}return Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("audio",{ref:"audio",autoPlay:!0})}},{key:"componentDidMount",value:function(){var e=this.props,a=e.audioTrack,t=e.audioOutputDevice;this._setTrack(a),this._setOutputDevice(t)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var a=this.props,t=a.audioTrack,n=a.audioOutputDevice;this._setTrack(t),this._setOutputDevice(n)}}},{key:"_setTrack",value:function(e){if(this._audioTrack!==e){this._audioTrack=e;var a=this.refs.audio;if(e){var t=new MediaStream;e&&t.addTrack(e),a.srcObject=t}else a.srcObject=null}}},{key:"_setOutputDevice",value:function(e){if(this._audioOutputDevice!==e){this._audioOutputDevice=e;var a=this.refs.audio;e&&"function"===typeof a.setSinkId&&a.setSinkId(e)}}}]),t}(s.a.PureComponent),jt=Object(c.b)((function(e){return{micConsumers:te(e),audioOutputDevice:e.settings.selectedAudioOutputDevice}}),null,null,{areStatesEqual:function(e,a){return a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.settings.selectedAudioOutputDevice===e.settings.selectedAudioOutputDevice}})((function(e){var a=e.micConsumers,t=e.audioOutputDevice;return s.a.createElement("div",{"data-component":"AudioPeers"},a.map((function(e){return s.a.createElement(Pt,{key:e.id,audioTrack:e.track,audioOutputDevice:t})})))})),Lt=t(391),At=t.n(Lt),It=Object(c.b)((function(e){return{consumer:e.consumers[e.room.fullScreenConsumer],toolbarsVisible:e.room.toolbarsVisible,permanentTopBar:e.settings.permanentTopBar}}),(function(e){return{toggleConsumerFullscreen:function(a){a&&e(g.E(a.id))}}}),null,{areStatesEqual:function(e,a){return a.consumers[a.room.fullScreenConsumer]===e.consumers[e.room.fullScreenConsumer]&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.permanentTopBar===e.settings.permanentTopBar}})(Object(m.a)((function(e){return{root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin",opacity:0,"&.visible":{opacity:1}},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}}))((function(e){var a=e.advancedMode,t=e.consumer,n=e.toggleConsumerFullscreen,r=e.toolbarsVisible,o=e.permanentTopBar,l=e.classes;if(!t)return null;var i=Boolean(t)&&!t.locallyPaused&&!t.remotelyPaused;return s.a.createElement("div",{className:l.root},s.a.createElement("div",{className:l.controls},s.a.createElement("div",{className:Re()(l.button,{visible:r||o}),onClick:function(e){e.stopPropagation(),n(t)}},s.a.createElement(At.a,{className:l.icon}))),s.a.createElement(bt,{advancedMode:a,videoContain:!0,consumerSpatialLayers:t?t.spatialLayers:null,consumerTemporalLayers:t?t.temporalLayers:null,consumerCurrentSpatialLayer:t?t.currentSpatialLayer:null,consumerCurrentTemporalLayer:t?t.currentTemporalLayer:null,consumerPreferredSpatialLayer:t?t.preferredSpatialLayer:null,consumerPreferredTemporalLayer:t?t.preferredTemporalLayer:null,videoMultiLayer:t&&"simple"!==t.type,videoTrack:t&&t.track,videoVisible:i,videoCodec:t&&t.codec,videoScore:t?t.score:null}))}))),Rt=t(13),Bt=t.n(Rt),Dt=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).handleToggleFullscreen=function(){r.fullscreen.fullscreenElement?r.fullscreen.exitFullscreen():r.fullscreen.requestFullscreen(r.window.document.documentElement)},r.handleFullscreenChange=function(){r.setState({fullscreen:null!==r.fullscreen.fullscreenElement})},r.container=document.createElement("div"),r.window=null,r.windowCheckerInterval=null,r.released=!1,r.fullscreen=null,r.state={mounted:!1,fullscreen:!1},r}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.mounted?Bt.a.createPortal([s.a.createElement("div",{key:"newwindow",className:e.root},s.a.createElement("div",{className:e.controls},this.fullscreen.fullscreenEnabled&&s.a.createElement("div",{className:e.button,onClick:this.handleToggleFullscreen,"data-tip":"Fullscreen","data-place":"right","data-type":"dark"},this.state.fullscreen?s.a.createElement(At.a,{className:e.icon}):s.a.createElement(wt.a,{className:e.icon}))),this.props.children)],this.container):null}},{key:"componentDidMount",value:function(){this.openChild(),this.setState({mounted:!0}),this.fullscreen=new M(this.window.document),this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange)}},{key:"openChild",value:function(){var e,a=this,t=this.props,n=t.url,r=t.title,o=t.name,l=t.features,i=t.onBlock,s=t.center;if("parent"===s)l.left=window.top.outerWidth/2+window.top.screenX-l.width/2,l.top=window.top.outerHeight/2+window.top.screenY-l.height/2;else if("screen"===s){var c=void 0!==window.screenLeft?window.screenLeft:window.screen.left,u=void 0!==window.screenTop?window.screenTop:window.screen.top,d=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;l.left=d/2-l.width/2+c,l.top=m/2-l.height/2+u}this.window=window.open(n,o,(e=l,Object.keys(e).reduce((function(a,t){var n=e[t];return"boolean"===typeof n?a.push("".concat(t,"=").concat(n?"yes":"no")):a.push("".concat(t,"=").concat(n)),a}),[]).join(","))),this.windowCheckerInterval=setInterval((function(){a.window&&!a.window.closed||a.release()}),50),this.window?(this.window.document.title=r,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout((function(){return e=document,t=a.window.document,void Array.from(e.styleSheets).forEach((function(a){var n;try{n=a.cssRules}catch(l){}if(n){var r=e.createElement("style");Array.from(a.cssRules).forEach((function(a){var t=a.cssText,n=a.type,o=t;[3,5].includes(n)&&(o=t.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")),r.appendChild(e.createTextNode(o))})),t.head.appendChild(r)}else if(a.href){var o=e.createElement("link");o.rel="stylesheet",o.href=a.href,t.head.appendChild(o)}}));var e,t}),0),this.window.addEventListener("beforeunload",(function(){return a.release()}))):"function"===typeof i&&i(null)}},{key:"componentWillUnmount",value:function(){this.window&&(this.fullscreen&&this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),this.window.close())}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"===typeof e&&e(null)}}}]),t}(s.a.PureComponent);Dt.defaultProps={url:"",name:"New edutech",title:"New edutech",features:{width:"800px",height:"600px"},onBlock:null,onUnload:null,center:"parent",copyStyles:!0};var Vt=Object(m.a)((function(e){return{root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin"},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}}))(Dt),Ft=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e))._videoTrack=null,r.video=s.a.createRef(),r}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.videoVisible,t=e.videoProfile,n=e.classes;return s.a.createElement("div",{className:n.root},s.a.createElement("video",{ref:this.video,className:Re()(n.video,{hidden:!a,loading:"none"===t}),autoPlay:!0,playsInline:!0,muted:Boolean(!0)}))}},{key:"componentDidMount",value:function(){var e=this.props.videoTrack;this._setTracks(e)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var a=this.props.videoTrack;this._setTracks(a)}}},{key:"_setTracks",value:function(e){if(this._videoTrack!==e){this._videoTrack=e;var a=this.video.current;if(e){var t=new MediaStream;t.addTrack(e),a.srcObject=t}else a.srcObject=null}}}]),t}(s.a.PureComponent),zt=Object(m.a)((function(){return{root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"contain",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"rgba(0, 0, 0, 1)","&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"}}}}))(Ft),Ht=Object(c.b)((function(e){return{consumer:e.consumers[e.room.windowConsumer]}}),(function(e){return{toggleConsumerWindow:function(){e(g.F())}}}),null,{areStatesEqual:function(e,a){return a.consumers[a.room.windowConsumer]===e.consumers[e.room.windowConsumer]}})((function(e){var a=e.advancedMode,t=e.consumer,n=e.toggleConsumerWindow;if(!t)return null;var r=Boolean(t)&&!t.locallyPaused&&!t.remotelyPaused;return s.a.createElement(Vt,{onUnload:n},s.a.createElement(zt,{advancedMode:a,consumerSpatialLayers:t?t.spatialLayers:null,consumerTemporalLayers:t?t.temporalLayers:null,consumerCurrentSpatialLayer:t?t.currentSpatialLayer:null,consumerCurrentTemporalLayer:t?t.currentTemporalLayer:null,consumerPreferredSpatialLayer:t?t.preferredSpatialLayer:null,consumerPreferredTemporalLayer:t?t.preferredTemporalLayer:null,videoMultiLayer:t&&"simple"!==t.type,videoTrack:t&&t.track,videoVisible:r,videoCodec:t&&t.codec,videoScore:t?t.score:null}))})),Wt=t(194),qt=t(198),Ut=t(275),_t=t(200),Gt=t(276),Kt=t(271),Yt=t(645),Qt=t(272),Xt=t(274),Jt=t(273),$t=t(281),Zt=t(600),en=t.n(Zt),an=Object(we.b)(Object(c.b)((function(e,a){var t=a.id,n=fe(ke);return function(e){return{peer:e.lobbyPeers[t],promotionInProgress:e.room.lobbyPeersPromotionInProgress,canPromote:n(e)}}}),null,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.peers===e.peers&&a.me.roles===e.me.roles&&a.lobbyPeers===e.lobbyPeers}})(Object(m.a)((function(){return{root:{alignItems:"center"}}}))((function(e){var a=e.roomClient,t=e.peer,n=e.promotionInProgress,r=e.canPromote,o=e.classes,l=Object(ge.a)(),i=t.picture||Ue.a;return s.a.createElement(Qt.a,{className:Re()(o.root),key:t.peerId,button:!0,alignItems:"flex-start"},s.a.createElement(Jt.a,null,s.a.createElement($t.a,{alt:"Peer avatar",src:i})),s.a.createElement(Xt.a,{primary:t.displayName}),s.a.createElement(ga.a,{title:l.formatMessage({id:"tooltip.admitFromLobby",defaultMessage:"Click to let them in"})},s.a.createElement(Qe.a,{disabled:!r||t.promotionInProgress||n,color:"primary",onClick:function(e){e.stopPropagation(),a.promoteLobbyPeer(t.id)}},s.a.createElement(en.a,null))))})))),tn={handleCloseLockDialog:g.n,handleAccessCode:g.c},nn=Object(we.b)(Object(c.b)((function(){var e=fe(ke);return function(a){return{room:a.room,lobbyPeers:Y(a),canPromote:e(a)}}}),tn,null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers&&a.lobbyPeers===e.lobbyPeers}})(Object(m.a)((function(e){return{root:{},dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},lock:{padding:e.spacing(2)}}}))((function(e){var a=e.roomClient,t=e.room,n=e.handleCloseLockDialog,r=e.lobbyPeers,o=e.canPromote,l=e.classes;return s.a.createElement(Wt.a,{className:l.root,open:t.lockDialogOpen,onClose:function(){return n(!1)},classes:{paper:l.dialogPaper}},s.a.createElement(qt.a,{id:"form-dialog-title"},s.a.createElement(k.a,{id:"room.lobbyAdministration",defaultMessage:"Lobby administration"})),r.length>0?s.a.createElement(Kt.a,{dense:!0,subheader:s.a.createElement(Yt.a,{component:"div"},s.a.createElement(k.a,{id:"room.peersInLobby",defaultMessage:"Participants in Lobby"}))},r.map((function(e){return s.a.createElement(an,{key:e,id:e})}))):s.a.createElement(_t.a,null,s.a.createElement(Gt.a,{gutterBottom:!0},s.a.createElement(k.a,{id:"room.lobbyEmpty",defaultMessage:"There are currently no one in the lobby"}))),s.a.createElement(Ut.a,null,s.a.createElement(je.a,{disabled:0===r.length||!o||t.lobbyPeersPromotionInProgress,onClick:function(){return a.promoteAllLobbyPeers()},color:"primary"},s.a.createElement(k.a,{id:"label.promoteAllPeers",defaultMessage:"Promote all"})),s.a.createElement(je.a,{onClick:function(){return n(!1)},color:"primary"},s.a.createElement(k.a,{id:"label.close",defaultMessage:"Close"}))))})))),rn=t(27),on=t(646),ln=t(330),sn=t(328),cn=t(647),un=t(334),dn=t(657),mn=t(332),pn=t(601),fn=t.n(pn),gn=t(602),bn=t.n(gn),hn=t(656),vn=Object(m.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},track:{height:2},rail:{height:2,opacity:.2},mark:{backgroundColor:"#bfbfbf",height:10,width:3,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(dn.a),En={setEchoCancellation:rn.c,setAutoGainControl:rn.a,setNoiseSuppression:rn.e,setVoiceActivatedUnmute:rn.n},yn=Object(we.b)(Object(c.b)((function(e){return{me:e.me,volume:e.peerVolumes[e.me.id],settings:e.settings}}),En,null,{areStatesEqual:function(e,a){return a.me===e.me&&a.settings===e.settings&&a.peerVolumes[a.me.id]===e[e.me.id]}})(Object(m.a)((function(e){return{setting:{padding:e.spacing(2)},margin:{height:e.spacing(3)},root:{width:"100%",backgroundColor:e.palette.background.paper},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1)},nested:{display:"block",paddingTop:0,paddingBottom:0,paddingLeft:"25px",paddingRight:"25px"},formControl:{display:"flex"}}}))((function(e){var a,t,n,r=e.setEchoCancellation,o=e.setAutoGainControl,l=e.setNoiseSuppression,i=e.setVoiceActivatedUnmute,c=e.roomClient,u=e.me,d=e.volume,m=e.settings,p=e.classes,f=Object(ge.a)(),g=s.a.useState(!1),b=Object(Ke.a)(g,2),h=b[0],v=b[1],E=s.a.useState(!1),y=Object(Ke.a)(E,2),w=y[0],M=y[1],C=[{value:"low",label:f.formatMessage({id:"label.low",defaultMessage:"Low"})},{value:"medium",label:f.formatMessage({id:"label.medium",defaultMessage:"Medium"})},{value:"high",label:f.formatMessage({id:"label.high",defaultMessage:"High (HD)"})},{value:"veryhigh",label:f.formatMessage({id:"label.veryHigh",defaultMessage:"Very high (FHD)"})},{value:"ultra",label:f.formatMessage({id:"label.ultra",defaultMessage:"Ultra (UHD)"})}];return a=u.webcamDevices?Object.values(u.webcamDevices):[],t=u.audioDevices?Object.values(u.audioDevices):[],n=u.audioOutputDevices?Object.values(u.audioOutputDevices):[],s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:p.setting,autoComplete:"off"},s.a.createElement(sn.a,{className:p.formControl},s.a.createElement(un.a,{value:m.selectedWebcam||"",onChange:function(e){e.target.value&&c.updateWebcam({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:f.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:p.selectEmpty,disabled:0===a.length||u.webcamInProgress},a.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.deviceId},e.label)}))),s.a.createElement(ln.a,null,a.length>0?f.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):f.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"}))),s.a.createElement(Kt.a,{className:p.root,component:"nav"},s.a.createElement(Qt.a,{button:!0,onClick:function(){return M(!w)}},s.a.createElement(Xt.a,{primary:f.formatMessage({id:"settings.showAdvancedVideo",defaultMessage:"Advanced video settings"})}),w?s.a.createElement(fn.a,null):s.a.createElement(bn.a,null)),s.a.createElement(mn.a,{in:w,timeout:"auto"},s.a.createElement(sn.a,{className:p.formControl},s.a.createElement(un.a,{value:m.resolution||"",onChange:function(e){e.target.value&&c.updateWebcam({newResolution:e.target.value})},name:"Video resolution",autoWidth:!0,className:p.selectEmpty},C.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.value},e.label)}))),s.a.createElement(ln.a,null,s.a.createElement(k.a,{id:"settings.resolution",defaultMessage:"Select your video resolution"}))),s.a.createElement(sn.a,{className:p.formControl},s.a.createElement(un.a,{value:m.screenSharingFrameRate||"",onChange:function(e){e.target.value&&c.updateScreenSharing({newFrameRate:e.target.value})},name:"Frame rate",autoWidth:!0,className:p.selectEmpty},[1,5,10,15,20,25,30].map((function(e){return s.a.createElement(on.a,{key:e,value:e},e)}))),s.a.createElement(ln.a,null,s.a.createElement(k.a,{id:"settings.screenSharingFrameRate",defaultMessage:"Select your screen sharing frame rate"})))))),s.a.createElement("form",{className:p.setting,autoComplete:"off"},s.a.createElement(sn.a,{className:p.formControl},s.a.createElement(un.a,{value:m.selectedAudioDevice||"",onChange:function(e){e.target.value&&c.updateMic({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:f.formatMessage({id:"settings.audio",defaultMessage:"Audio input device"}),autoWidth:!0,className:p.selectEmpty,disabled:0===t.length||u.audioInProgress},t.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.deviceId},""===e.label?a+1:e.label)}))),s.a.createElement(ln.a,null,t.length>0?f.formatMessage({id:"settings.selectAudio",defaultMessage:"Select audio input device"}):f.formatMessage({id:"settings.cantSelectAudio",defaultMessage:"Unable to select audio input device"}))),"audioOutputSupportedBrowsers"in window.config&&window.config.audioOutputSupportedBrowsers.includes(u.browser.name)&&s.a.createElement(sn.a,{className:p.formControl},s.a.createElement(un.a,{value:m.selectedAudioOutputDevice||"",onChange:function(e){e.target.value&&c.changeAudioOutputDevice(e.target.value)},displayEmpty:!0,name:f.formatMessage({id:"settings.audioOutput",defaultMessage:"Audio output device"}),autoWidth:!0,className:p.selectEmpty,disabled:0===n.length||u.audioOutputInProgress},n.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.deviceId},e.label)}))),s.a.createElement(ln.a,null,n.length>0?f.formatMessage({id:"settings.selectAudioOutput",defaultMessage:"Select audio output device"}):f.formatMessage({id:"settings.cantSelectAudioOutput",defaultMessage:"Unable to select audio output device"}))),s.a.createElement(Kt.a,{className:p.root,component:"nav"},s.a.createElement(Qt.a,{button:!0,onClick:function(){return v(!h)}},s.a.createElement(Xt.a,{primary:f.formatMessage({id:"settings.showAdvancedAudio",defaultMessage:"Advanced audio settings"})}),h?s.a.createElement(fn.a,null):s.a.createElement(bn.a,null)),s.a.createElement(mn.a,{in:h,timeout:"auto"},s.a.createElement(Kt.a,{component:"div"},s.a.createElement(Qt.a,{className:p.nested},s.a.createElement(cn.a,{className:Re()(p.setting,p.switchLabel),control:s.a.createElement(hn.a,{color:"secondary",checked:m.echoCancellation,onChange:function(e){r(e.target.checked),c.updateMic()}}),labelPlacement:"start",label:f.formatMessage({id:"settings.echoCancellation",defaultMessage:"Echo cancellation"})})),s.a.createElement(Qt.a,{className:p.nested},s.a.createElement(cn.a,{className:Re()(p.setting,p.switchLabel),control:s.a.createElement(hn.a,{color:"secondary",checked:m.autoGainControl,onChange:function(e){o(e.target.checked),c.updateMic()}}),labelPlacement:"start",label:f.formatMessage({id:"settings.autoGainControl",defaultMessage:"Auto gain control"})})),s.a.createElement(Qt.a,{className:p.nested},s.a.createElement(cn.a,{className:Re()(p.setting,p.switchLabel),control:s.a.createElement(hn.a,{color:"secondary",checked:m.noiseSuppression,onChange:function(e){l(e.target.checked),c.updateMic()}}),labelPlacement:"start",label:f.formatMessage({id:"settings.noiseSuppression",defaultMessage:"Noise suppression"})})),s.a.createElement(Qt.a,{className:p.nested},s.a.createElement(cn.a,{className:Re()(p.setting,p.switchLabel),control:s.a.createElement(hn.a,{color:"secondary",checked:m.voiceActivatedUnmute,onChange:function(e){i(e.target.checked)}}),labelPlacement:"start",label:f.formatMessage({id:"settings.voiceActivatedUnmute",defaultMessage:"Voice activated unmute"})})),s.a.createElement(Qt.a,{className:p.nested},s.a.createElement("div",{className:p.margin}),s.a.createElement(ze.a,{gutterBottom:!0},f.formatMessage({id:"settings.noiseThreshold",defaultMessage:"Noise threshold"}),":"),s.a.createElement(vn,{className:Re()(p.slider,Re.a.setting),key:"noise-threshold-slider",min:-100,value:m.noiseThreshold,max:0,valueLabelDisplay:"auto",onChange:function(e,a){c._setNoiseThreshold(a)},marks:[{value:d,label:"".concat(d," dB")}]})))))))})))),wn={onTogglePermanentTopBar:rn.t,onToggleHiddenControls:rn.r,onToggleShowNotifications:rn.u,onToggleButtonControlBar:rn.p,onToggleDrawerOverlayed:rn.q,handleChangeMode:g.h},Mn=Object(c.b)((function(e){return{isMobile:"mobile"===e.me.browser.platform,room:e.room,settings:e.settings}}),wn,null,{areStatesEqual:function(e,a){return a.me.browser===e.me.browser&&a.room===e.room&&a.settings===e.settings}})(Object(m.a)((function(e){return{setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}}))((function(e){var a=e.isMobile,t=e.room,n=e.settings,r=e.onTogglePermanentTopBar,o=e.onToggleHiddenControls,l=e.onToggleButtonControlBar,i=e.onToggleShowNotifications,c=e.onToggleDrawerOverlayed,u=e.handleChangeMode,d=e.classes,m=Object(ge.a)(),p=[{value:"democratic",label:m.formatMessage({id:"label.democratic",defaultMessage:"Democratic view"})},{value:"filmstrip",label:m.formatMessage({id:"label.filmstrip",defaultMessage:"Filmstrip view"})}];return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:d.setting,autoComplete:"off"},s.a.createElement(sn.a,{className:d.formControl},s.a.createElement(un.a,{value:t.mode||"",onChange:function(e){e.target.value&&u(e.target.value)},name:m.formatMessage({id:"settings.layout",defaultMessage:"Room layout"}),autoWidth:!0,className:d.selectEmpty},p.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.value},e.label)}))),s.a.createElement(ln.a,null,s.a.createElement(k.a,{id:"settings.selectRoomLayout",defaultMessage:"Select room layout"})))),s.a.createElement(cn.a,{className:Re()(d.setting,d.switchLabel),control:s.a.createElement(hn.a,{checked:n.permanentTopBar,onChange:r,value:"permanentTopBar"}),labelPlacement:"start",label:m.formatMessage({id:"settings.permanentTopBar",defaultMessage:"Permanent top bar"})}),s.a.createElement(cn.a,{className:Re()(d.setting,d.switchLabel),control:s.a.createElement(hn.a,{checked:n.hiddenControls,onChange:o,value:"hiddenControls"}),labelPlacement:"start",label:m.formatMessage({id:"settings.hiddenControls",defaultMessage:"Hidden media controls"})}),s.a.createElement(cn.a,{className:Re()(d.setting,d.switchLabel),control:s.a.createElement(hn.a,{checked:n.buttonControlBar,onChange:l,value:"buttonControlBar"}),labelPlacement:"start",label:m.formatMessage({id:"settings.buttonControlBar",defaultMessage:"Separate media controls"})}),!a&&s.a.createElement(cn.a,{className:Re()(d.setting,d.switchLabel),control:s.a.createElement(hn.a,{checked:n.drawerOverlayed,onChange:c,value:"drawerOverlayed"}),labelPlacement:"start",label:m.formatMessage({id:"settings.drawerOverlayed",defaultMessage:"Side drawer over content"})}),s.a.createElement(cn.a,{className:Re()(d.setting,d.switchLabel),control:s.a.createElement(hn.a,{checked:n.showNotifications,onChange:i,value:"showNotifications"}),labelPlacement:"start",label:m.formatMessage({id:"settings.showNotifications",defaultMessage:"Show notifications"})}))}))),kn={onToggleAdvancedMode:rn.o,onToggleNotificationSounds:rn.s},Cn=Object(we.b)(Object(c.b)((function(e){return{settings:e.settings}}),kn,null,{areStatesEqual:function(e,a){return a.settings===e.settings}})(Object(m.a)((function(e){return{setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}}))((function(e){var a=e.roomClient,t=e.settings,n=e.onToggleAdvancedMode,r=e.onToggleNotificationSounds,o=e.classes,l=Object(ge.a)();return s.a.createElement(s.a.Fragment,null,s.a.createElement(cn.a,{className:Re()(o.setting,o.switchLabel),control:s.a.createElement(hn.a,{checked:t.advancedMode,onChange:n,value:"advancedMode"}),labelPlacement:"start",label:l.formatMessage({id:"settings.advancedMode",defaultMessage:"Advanced mode"})}),s.a.createElement(cn.a,{className:Re()(o.setting,o.switchLabel),control:s.a.createElement(hn.a,{checked:t.notificationSounds,onChange:r,value:"notificationSounds"}),labelPlacement:"start",label:l.formatMessage({id:"settings.notificationSounds",defaultMessage:"Notification sounds"})}),!window.config.lockLastN&&s.a.createElement("form",{className:o.setting,autoComplete:"off"},s.a.createElement(sn.a,{className:o.formControl},s.a.createElement(un.a,{value:t.lastN||"",onChange:function(e){e.target.value&&a.changeMaxSpotlights(e.target.value)},name:"Last N",autoWidth:!0,className:o.selectEmpty},Array.from({length:window.config.maxLastN||10},(function(e,a){return a+1})).map((function(e){return s.a.createElement(on.a,{key:e,value:e},e)}))),s.a.createElement(ln.a,null,s.a.createElement(k.a,{id:"settings.lastn",defaultMessage:"Number of visible videos"})))))})))),Sn=["media","appearence","advanced"],On={handleCloseSettings:g.x,setSettingsTab:g.y},Tn=Object(c.b)((function(e){return{currentSettingsTab:e.room.currentSettingsTab,settingsOpen:e.room.settingsOpen}}),On,null,{areStatesEqual:function(e,a){return a.room.currentSettingsTab===e.room.currentSettingsTab&&a.room.settingsOpen===e.room.settingsOpen}})(Object(m.a)((function(e){return{root:{},dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},tabsHeader:{flexGrow:1}}}))((function(e){var a=e.currentSettingsTab,t=e.settingsOpen,n=e.handleCloseSettings,r=e.setSettingsTab,o=e.classes,l=Object(ge.a)();return s.a.createElement(Wt.a,{className:o.root,open:t,onClose:function(){return n(!1)},classes:{paper:o.dialogPaper}},s.a.createElement(qt.a,{id:"form-dialog-title"},s.a.createElement(k.a,{id:"settings.settings",defaultMessage:"Settings"})),s.a.createElement(he.a,{className:o.tabsHeader,value:Sn.indexOf(a),onChange:function(e,a){return r(Sn[a])},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},s.a.createElement(ve.a,{label:l.formatMessage({id:"label.media",defaultMessage:"Media"})}),s.a.createElement(ve.a,{label:l.formatMessage({id:"label.appearance",defaultMessage:"Appearence"})}),s.a.createElement(ve.a,{label:l.formatMessage({id:"label.advanced",defaultMessage:"Advanced"})})),"media"===a&&s.a.createElement(yn,null),"appearence"===a&&s.a.createElement(Mn,null),"advanced"===a&&s.a.createElement(Cn,null),s.a.createElement(Ut.a,null,s.a.createElement(je.a,{onClick:function(){return n(!1)},color:"primary"},s.a.createElement(k.a,{id:"label.close",defaultMessage:"Close"}))))}))),Nn=t(648),xn=t(193),Pn=t(329),jn=t(603),Ln=t.n(jn),An=t(604),In=t.n(An),Rn=t(397),Bn=t.n(Rn),Dn=t(611),Vn=t.n(Dn),Fn=t(608),zn=t.n(Fn),Hn=t(605),Wn=t.n(Hn),qn=t(606),Un=t.n(qn),_n=t(607),Gn=t.n(_n),Kn=t(609),Yn=t.n(Kn),Qn=t(610),Xn=t.n(Qn),Jn=Object(m.a)((function(e){return{badge:{backgroundColor:e.palette.secondary.main,"&::after":{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"3px solid ".concat(e.palette.secondary.main),content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Ee.a),$n=Object(we.b)(Object(c.b)((function(){var e=fe(Te),a=fe(Me),t=fe(ke);return function(n){return{room:n.room,isMobile:"mobile"===n.me.browser.platform,peersLength:ce(n),lobbyPeers:Y(n),permanentTopBar:n.settings.permanentTopBar,drawerOverlayed:n.settings.drawerOverlayed,toolAreaOpen:n.toolarea.toolAreaOpen,loggedIn:n.me.loggedIn,loginEnabled:n.me.loginEnabled,myPicture:n.me.picture,unread:n.toolarea.unreadMessages+n.toolarea.unreadFiles+ue(n),canProduceExtraVideo:e(n),canLock:a(n),canPromote:t(n)}}}),(function(e){return{setToolbarsVisible:function(a){e(g.D(a))},setSettingsOpen:function(a){e(g.x(a))},setExtraVideoOpen:function(a){e(g.i(a))},setHelpOpen:function(a){e(g.j(a))},setAboutOpen:function(a){e(g.b(a))},setLockDialogOpen:function(a){e(g.n(a))},toggleToolArea:function(){e({type:"TOGGLE_TOOL_AREA"})},openUsersTab:function(){e({type:"OPEN_TOOL_AREA"}),e(b("users"))}}}),null,{areStatesEqual:function(e,a){return a.room===e.room&&a.peers===e.peers&&a.lobbyPeers===e.lobbyPeers&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.me.loggedIn===e.me.loggedIn&&a.me.browser===e.me.browser&&a.me.loginEnabled===e.me.loginEnabled&&a.me.picture===e.me.picture&&a.me.roles===e.me.roles&&a.toolarea.unreadMessages===e.toolarea.unreadMessages&&a.toolarea.unreadFiles===e.toolarea.unreadFiles&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen}})(Object(m.a)((function(e){return{persistentDrawerOpen:{width:"calc(100% - 30vw)",marginLeft:"30vw",[e.breakpoints.down("lg")]:{width:"calc(100% - 40vw)",marginLeft:"40vw"},[e.breakpoints.down("md")]:{width:"calc(100% - 50vw)",marginLeft:"50vw"},[e.breakpoints.down("sm")]:{width:"calc(100% - 70vw)",marginLeft:"70vw"},[e.breakpoints.down("xs")]:{width:"calc(100% - 90vw)",marginLeft:"90vw"}},menuButton:{margin:0,padding:0},logo:{display:"none",marginLeft:20,[e.breakpoints.up("sm")]:{display:"block"}},divider:{marginLeft:e.spacing(3)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},grow:{flexGrow:1},title:{display:"none",marginLeft:20,[e.breakpoints.up("sm")]:{display:"block"}},sectionDesktop:{display:"none",[e.breakpoints.up("md")]:{display:"flex"}},sectionMobile:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},actionButton:{margin:e.spacing(1,0),padding:e.spacing(0,1)},disabledButton:{margin:e.spacing(1,0)},green:{color:"rgba(0, 153, 0, 1)"},moreAction:{margin:e.spacing(.5,0,.5,1.5)}}}),{withTheme:!0})((function(e){var a=Object(ge.a)(),t=Object(i.useState)(null),n=Object(Ke.a)(t,2),r=n[0],o=n[1],l=Object(i.useState)(null),c=Object(Ke.a)(l,2),u=c[0],d=c[1],m=Object(i.useState)(null),p=Object(Ke.a)(m,2),f=p[0],g=p[1],b=function(e,a){d(e.currentTarget),g(a)},h=function(){d(null),o(null)},v=e.roomClient,E=e.room,y=e.peersLength,w=e.lobbyPeers,M=e.permanentTopBar,C=e.drawerOverlayed,S=e.toolAreaOpen,O=e.isMobile,T=e.myPicture,N=e.loggedIn,x=e.loginEnabled,P=e.fullscreenEnabled,j=e.fullscreen,L=e.onFullscreen,A=e.setSettingsOpen,I=(e.setExtraVideoOpen,e.setHelpOpen),R=(e.setAboutOpen,e.setLockDialogOpen),B=e.toggleToolArea,D=e.openUsersTab,V=e.unread,F=(e.canProduceExtraVideo,e.canLock),z=e.canPromote,H=e.classes,W=Boolean(u),q=Boolean(r),U=E.locked?a.formatMessage({id:"tooltip.unLockRoom",defaultMessage:"Unlock room"}):a.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),_=j?a.formatMessage({id:"tooltip.leaveFullscreen",defaultMessage:"Leave fullscreen"}):a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),G=N?a.formatMessage({id:"tooltip.logout",defaultMessage:"Log out"}):a.formatMessage({id:"tooltip.login",defaultMessage:"Log in"});return s.a.createElement(s.a.Fragment,null,s.a.createElement(be.a,{position:"fixed",className:Re()(E.toolbarsVisible||M?H.show:H.hide,O||C||!S?null:H.persistentDrawerOpen)},s.a.createElement(Nn.a,null,s.a.createElement(Jn,{color:"secondary",badgeContent:V,onClick:function(){return B()}},s.a.createElement(Qe.a,{color:"inherit","aria-label":a.formatMessage({id:"label.openDrawer",defaultMessage:"Open drawer"}),className:H.menuButton},s.a.createElement(Ln.a,null))),window.config.logo&&s.a.createElement("img",{alt:"Logo",className:H.logo,src:window.config.logo}),s.a.createElement(ze.a,{className:H.title,variant:"h6",color:"inherit",noWrap:!0},window.config.title?window.config.title:"New edutech"),s.a.createElement("div",{className:H.grow}),s.a.createElement("div",{className:H.sectionDesktop},s.a.createElement(ga.a,{title:a.formatMessage({id:"label.moreActions",defaultMessage:"More actions"})},s.a.createElement(Qe.a,{"aria-owns":W&&"moreActions"===f?"material-appbar":void 0,"aria-haspopup":!0,onClick:function(e){return b(e,"moreActions")},color:"inherit"},s.a.createElement(In.a,null))),P&&s.a.createElement(ga.a,{title:_},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),className:H.actionButton,color:"inherit",onClick:L},j?s.a.createElement(At.a,null):s.a.createElement(wt.a,null))),s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"})},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),color:"inherit",onClick:function(){return D()}},s.a.createElement(Ee.a,{color:"primary",badgeContent:y+1},s.a.createElement(Wn.a,null)))),s.a.createElement(ga.a,{title:U},s.a.createElement("span",{className:H.disabledButton},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),className:H.actionButton,color:"inherit",disabled:!F,onClick:function(){E.locked?v.unlockRoom():v.lockRoom()}},E.locked?s.a.createElement(Un.a,null):s.a.createElement(Gn.a,null)))),w.length>0&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"})},s.a.createElement("span",{className:H.disabledButton},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:H.actionButton,color:"inherit",disabled:!z,onClick:function(){return R(!E.lockDialogOpen)}},s.a.createElement(Jn,{color:"secondary",badgeContent:w.length},s.a.createElement(zn.a,null)))))),s.a.createElement("div",{className:H.sectionMobile},w.length>0&&s.a.createElement(ga.a,{title:a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"})},s.a.createElement("span",{className:H.disabledButton},s.a.createElement(Qe.a,{"aria-label":a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:H.actionButton,color:"inherit",disabled:!z,onClick:function(){return R(!E.lockDialogOpen)}},s.a.createElement(Jn,{color:"secondary",badgeContent:w.length},s.a.createElement(zn.a,null))))),s.a.createElement(Qe.a,{"aria-haspopup":!0,onClick:function(e){o(e.currentTarget)},color:"inherit"},s.a.createElement(Yn.a,null))),s.a.createElement("div",{className:H.divider}),s.a.createElement(je.a,{"aria-label":a.formatMessage({id:"label.leave",defaultMessage:"Leave"}),className:H.actionButton,variant:"contained",color:"secondary",onClick:function(){return v.close()}},s.a.createElement(k.a,{id:"label.leave",defaultMessage:"Leave"})))),s.a.createElement(Pn.a,{anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:W,onClose:h,onExited:function(){g(null)},getContentAnchorEl:null},"moreActions"===f&&s.a.createElement(ye.a,null,s.a.createElement(on.a,{onClick:function(){h(),I(!E.helpOpen)}},s.a.createElement(Xn.a,{"aria-label":a.formatMessage({id:"room.help",defaultMessage:"Help"})}),s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"room.help",defaultMessage:"Help"}))))),s.a.createElement(xn.a,{anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},open:q,onClose:h,getContentAnchorEl:null},x&&s.a.createElement(on.a,{"aria-label":G,onClick:function(){h(),N?v.logout():v.login()}},T?s.a.createElement($t.a,{src:T}):s.a.createElement(Bn.a,{className:N?H.green:null}),N?s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.logout",defaultMessage:"Log out"})):s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.login",defaultMessage:"Log in"}))),s.a.createElement(on.a,{"aria-label":U,disabled:!F,onClick:function(){h(),E.locked?v.unlockRoom():v.lockRoom()}},E.locked?s.a.createElement(Un.a,null):s.a.createElement(Gn.a,null),E.locked?s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.unLockRoom",defaultMessage:"Unlock room"})):s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.lockRoom",defaultMessage:"Lock room"}))),s.a.createElement(on.a,{"aria-label":a.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),onClick:function(){h(),A(!E.settingsOpen)}},s.a.createElement(Vn.a,null),s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.settings",defaultMessage:"Show settings"}))),s.a.createElement(on.a,{"aria-label":a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),onClick:function(){h(),D()}},s.a.createElement(Ee.a,{color:"primary",badgeContent:y+1},s.a.createElement(Wn.a,null)),s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.participants",defaultMessage:"Show participants"}))),P&&s.a.createElement(on.a,{"aria-label":a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),onClick:function(){h(),L()}},j?s.a.createElement(At.a,null):s.a.createElement(wt.a,null),s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}))),s.a.createElement(on.a,{"aria-label":a.formatMessage({id:"label.moreActions",defaultMessage:"Add video"}),onClick:function(e){return b(e,"moreActions")}},s.a.createElement(In.a,null),s.a.createElement("p",{className:H.moreAction},s.a.createElement(k.a,{id:"label.moreActions",defaultMessage:"More actions"})))))})))),Zn=t(612),er=t.n(Zn),ar={handleCloseExtraVideo:g.i},tr=Object(we.b)(Object(c.b)((function(e){return{webcamDevices:e.me.webcamDevices,extraVideoOpen:e.room.extraVideoOpen}}),ar,null,{areStatesEqual:function(e,a){return a.me.webcamDevices===e.me.webcamDevices&&a.room.extraVideoOpen===e.room.extraVideoOpen}})(Object(m.a)((function(e){return{dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},setting:{padding:e.spacing(2)},formControl:{display:"flex"}}}))((function(e){var a,t=e.roomClient,n=e.extraVideoOpen,r=e.webcamDevices,o=e.handleCloseExtraVideo,l=e.classes,i=Object(ge.a)(),c=s.a.useState(""),u=Object(Ke.a)(c,2),d=u[0],m=u[1];return a=r?Object.values(r):[],s.a.createElement(Wt.a,{open:n,onClose:function(){return o(!1)},classes:{paper:l.dialogPaper}},s.a.createElement(qt.a,{id:"form-dialog-title"},s.a.createElement(k.a,{id:"room.extraVideo",defaultMessage:"Extra video"})),s.a.createElement("form",{className:l.setting,autoComplete:"off"},s.a.createElement(sn.a,{className:l.formControl},s.a.createElement(un.a,{value:d,displayEmpty:!0,name:i.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:l.selectEmpty,disabled:0===a.length,onChange:function(e){m(e.target.value)}},a.map((function(e,a){return s.a.createElement(on.a,{key:a,value:e.deviceId},e.label)}))),s.a.createElement(ln.a,null,a.length>0?i.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):i.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"})))),s.a.createElement(Ut.a,null,s.a.createElement(je.a,{onClick:function(){return t.addExtraVideo(d)},color:"primary"},s.a.createElement(k.a,{id:"label.addVideo",defaultMessage:"Add video"}))))})))),nr=Object(we.b)(Object(c.b)((function(e){return Object(pa.a)(Object(pa.a)({toolbarsVisible:e.room.toolbarsVisible,hiddenControls:e.settings.hiddenControls,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen},me(e)),{},{me:e.me})}),null,null,{areStatesEqual:function(e,a){return a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.hiddenControls===e.settings.hiddenControls&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&a.producers===e.producers&&a.me===e.me}})(Object(m.a)((function(e){return{root:{position:"fixed",display:"flex",zIndex:30,[e.breakpoints.up("md")]:{top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center",left:e.spacing(1)},[e.breakpoints.down("sm")]:{flexDirection:"row",bottom:e.spacing(1),left:"50%",transform:"translate(-50%, -0%)"}},fab:{margin:e.spacing(1)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},move:{left:"30vw",top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center",[e.breakpoints.down("lg")]:{left:"40vw"},[e.breakpoints.down("md")]:{left:"50vw"},[e.breakpoints.down("sm")]:{left:"70vw"},[e.breakpoints.down("xs")]:{left:"90vw"}}}}),{withTheme:!0})((function(e){var a,t,n,r,o,l,i=Object(ge.a)(),c=e.roomClient,u=e.toolbarsVisible,d=e.hiddenControls,m=e.drawerOverlayed,p=e.toolAreaOpen,f=e.me,g=e.micProducer,b=e.webcamProducer,h=e.screenProducer,v=e.classes,E=e.theme;f.canSendMic?g?g.locallyPaused||g.remotelyPaused?(a="muted",t=i.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(a="on",t=i.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(a="off",t=i.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(a="unsupported",t=i.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),f.canSendWebcam?b?(n="on",r=i.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(n="off",r=i.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(n="unsupported",r=i.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),f.canShareScreen?h?(o="on",l=i.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(o="off",l=i.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(o="unsupported",l=i.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));var y=Object(Ja.a)(E.breakpoints.down("sm"));return s.a.createElement("div",{className:Re()(v.root,d?u?v.show:v.hide:v.show,p&&"mobile"!==f.browser.platform&&!m?v.move:null)},s.a.createElement(ga.a,{title:t,placement:y?"top":"right"},s.a.createElement(ht.a,{"aria-label":i.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:v.fab,disabled:!f.canSendMic||f.audioInProgress,color:"on"===a?"default":"secondary",size:y?"large":"medium",onClick:function(){"off"===a?c.updateMic({start:!0}):"on"===a?c.muteMic():c.unmuteMic()}},"on"===a?s.a.createElement(wa.a,null):s.a.createElement(ka.a,null))),s.a.createElement(ga.a,{title:r,placement:y?"top":"right"},s.a.createElement(ht.a,{"aria-label":i.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:v.fab,disabled:!f.canSendWebcam||f.webcamInProgress,color:"on"===n?"default":"secondary",size:y?"large":"medium",onClick:function(){"on"===n?c.disableWebcam():c.updateWebcam({start:!0})}},"on"===n?s.a.createElement(ha.a,null):s.a.createElement(Ea.a,null))),"mobile"!==f.browser.platform&&s.a.createElement(ga.a,{title:l,placement:y?"top":"right"},s.a.createElement(ht.a,{"aria-label":i.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:v.fab,disabled:!f.canShareScreen||f.screenShareInProgress,color:"on"===o?"primary":"default",size:y?"large":"medium",onClick:function(){"off"===o?c.updateScreenSharing({start:!0}):"on"===o&&c.disableScreenSharing()}},"on"===o||"unsupported"===o?s.a.createElement(ja.a,null):null,"off"===o?s.a.createElement(xa.a,null):null)))})))),rr=[{key:"h",label:"room.help",defaultMessage:"Help"},{key:"m",label:"device.muteAudio",defaultMessage:"Mute Audio"},{key:"v",label:"device.stopVideo",defaultMessage:"Mute Video"},{key:"1",label:"label.democratic",defaultMessage:"Democratic View"},{key:"2",label:"label.filmstrip",defaultMessage:"Filmstrip View"},{key:"space",label:"me.mutedPTT",defaultMessage:"Push SPACE to talk"},{key:"a",label:"label.advanced",defaultMessage:"Show advanced information"},{key:"".concat(String.fromCharCode(8592)," ").concat(String.fromCharCode(8594)),label:"room.browsePeersSpotlight",defaultMessage:"Browse participants into Spotlight"}],or={handleCloseHelp:g.j},lr=Object(we.b)(Object(c.b)((function(e){return{helpOpen:e.room.helpOpen}}),or,null,{areStatesEqual:function(e,a){return a.room.helpOpen===e.room.helpOpen}})(Object(m.a)((function(e){return{dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"},display:"flex",flexDirection:"column"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",marginRight:e.spacing(3),marginBottom:e.spacing(1),minWidth:e.spacing(8)},shortcuts:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},tabsHeader:{flexGrow:1,marginBottom:e.spacing(1)}}}))((function(e){var a=e.helpOpen,t=e.handleCloseHelp,n=e.classes,r=Object(ge.a)();return s.a.createElement(Wt.a,{open:a,onClose:function(){t(!1)},classes:{paper:n.dialogPaper}},s.a.createElement(qt.a,{id:"form-dialog-title"},s.a.createElement(k.a,{id:"room.help",defaultMessage:"Help"})),s.a.createElement(he.a,{value:0,className:n.tabsHeader,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},s.a.createElement(ve.a,{label:r.formatMessage({id:"room.shortcutKeys",defaultMessage:"Shortcut keys"})})),rr.map((function(e,a){return s.a.createElement("div",{key:a,className:n.shortcuts},s.a.createElement(ye.a,{className:n.paper},e.key),s.a.createElement(k.a,{id:e.label,defaultMessage:e.defaultMessage}))})),s.a.createElement(Ut.a,null,s.a.createElement(je.a,{onClick:function(){t(!1)},color:"primary"},s.a.createElement(k.a,{id:"label.close",defaultMessage:"Close"}))))})))),ir=t(649),sr=t(650),cr={handleCloseAbout:g.b},ur=Object(we.b)(Object(c.b)((function(e){return{aboutOpen:e.room.aboutOpen}}),cr,null,{areStatesEqual:function(e,a){return a.room.aboutOpen===e.room.aboutOpen}})(Object(m.a)((function(e){return{dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},logo:{marginRight:"auto"},link:{display:"block",textAlign:"center",marginBottom:e.spacing(1)},divider:{marginBottom:e.spacing(3)}}}))((function(e){var a=e.aboutOpen,t=e.handleCloseAbout,n=e.classes;return s.a.createElement(Wt.a,{open:a,onClose:function(){return t(!1)},classes:{paper:n.dialogPaper}},s.a.createElement(qt.a,{id:"form-dialog-title"},s.a.createElement(k.a,{id:"room.about",defaultMessage:"About"})),s.a.createElement(_t.a,{dividers:!0},s.a.createElement(Gt.a,{paragraph:!0},"Contributions to this work were made on behalf of the G\xc9ANT project, a project that has received funding from the European Union\u2019s Horizon 2020 research and innovation programme under Grant Agreement No. 731122 (GN4-2). On behalf of G\xc9ANT project, G\xc9ANT Association is the sole owner of the copyright in all material which was developed by a member of the G\xc9ANT project."),s.a.createElement(Gt.a,{paragraph:!0},"G\xc9ANT Vereniging (Association) is registered with the Chamber of Commerce in Amsterdam with registration number 40535155 and operates in the UK as a branch of G\xc9ANT Vereniging. Registered office: Hoekenrode 3, 1102BR Amsterdam, The Netherlands. UK branch address: City House, 126-130 Hills Road, Cambridge CB2 1PQ, UK."),s.a.createElement(Gt.a,{align:"center",paragraph:!0},s.a.createElement(ir.a,{href:"https://edumeet.org",target:"_blank",rel:"noreferrer",color:"secondary",variant:"h6"},"https://edumeet.org")),s.a.createElement(Gt.a,{align:"center",variant:"body2"},s.a.createElement(k.a,{id:"label.version",defaultMessage:"Version"}),":"," ".concat("3.3.0")),s.a.createElement(sr.a,{variant:"middle",light:!0,className:n.divider}),window.config.supportUrl&&s.a.createElement(Gt.a,{align:"center",paragraph:!0},s.a.createElement("span",null,"Visit for more info: "),s.a.createElement(ir.a,{href:window.config.supportUrl,target:"_blank",rel:"noreferrer",color:"secondary"},window.config.supportUrl)),s.a.createElement(ir.a,{href:window.config.privacyUrl?window.config.privacyUrl:"privacy/privacy.html",target:"_blank",rel:"noreferrer",color:"secondary",className:n.link},"Data protection and Privacy Policy")),s.a.createElement(Ut.a,null,window.config.logo&&s.a.createElement("img",{alt:"Logo",className:n.logo,src:window.config.logo}),s.a.createElement(je.a,{onClick:function(){t(!1)},color:"primary"},s.a.createElement(k.a,{id:"label.close",defaultMessage:"Close"}))))})))),dr=window.config.hideTimeout||5e3,mr=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).waitForHide=Object(h.b)((function(){r.props.setToolbarsVisible(!1)}),dr),r.handleMovement=function(){r.props.room.toolbarsVisible||r.props.setToolbarsVisible(!0),r.waitForHide()},r.handleToggleFullscreen=function(){r.fullscreen.fullscreenElement?r.fullscreen.exitFullscreen():r.fullscreen.requestFullscreen(document.documentElement)},r.handleFullscreenChange=function(){r.setState({fullscreen:null!==r.fullscreen.fullscreenElement})},r.fullscreen=new M(document),r.state={fullscreen:!1},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange),window.addEventListener("mousemove",this.handleMovement),window.addEventListener("touchstart",this.handleMovement)}},{key:"componentWillUnmount",value:function(){this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),window.removeEventListener("mousemove",this.handleMovement),window.removeEventListener("touchstart",this.handleMovement)}},{key:"render",value:function(){var e=this.props,a=e.room,t=e.browser,n=e.advancedMode,r=e.showNotifications,o=e.buttonControlBar,l=e.drawerOverlayed,i=e.toolAreaOpen,c=e.toggleToolArea,u=e.classes,d=e.theme,m={filmstrip:xt,democratic:St}[a.mode],p=void 0!==window?window.document.body:void 0;return s.a.createElement("div",{className:u.root},!f()()&&s.a.createElement(S.a,{buttonText:s.a.createElement(k.a,{id:"room.consentUnderstand",defaultMessage:"I understand"})},s.a.createElement(k.a,{id:"room.cookieConsent",defaultMessage:"This website uses cookies to enhance the user experience"})),s.a.createElement(It,{advancedMode:n}),s.a.createElement(Ht,{advancedMode:n}),s.a.createElement(jt,null),r&&s.a.createElement(R,null),s.a.createElement(O.a,null),s.a.createElement($n,{fullscreenEnabled:this.fullscreen.fullscreenEnabled,fullscreen:this.state.fullscreen,onFullscreen:this.handleToggleFullscreen}),"mobile"===t.platform||l?s.a.createElement("nav",null,s.a.createElement(x.a,{implementation:"css"},s.a.createElement(T.a,{container:p,variant:"temporary",anchor:"rtl"===d.direction?"right":"left",open:i,onClose:function(){return c()},onOpen:function(){return c()},classes:{paper:u.drawerPaper},ModalProps:{keepMounted:!0}},s.a.createElement(Xa,{closeDrawer:c})))):s.a.createElement("nav",{className:i?u.drawer:null},s.a.createElement(x.a,{implementation:"css"},s.a.createElement(N.a,{variant:"persistent",anchor:"rtl"===d.direction?"right":"left",open:i,onClose:function(){return c()},classes:{paper:u.drawerPaper}},s.a.createElement(Xa,{closeDrawer:c})))),"mobile"===t.platform&&"ios"!==t.os&&s.a.createElement(er.a,null),s.a.createElement(m,{advancedMode:n}),o&&s.a.createElement(nr,null),a.lockDialogOpen&&s.a.createElement(nn,null),a.settingsOpen&&s.a.createElement(Tn,null),a.extraVideoOpen&&s.a.createElement(tr,null),a.helpOpen&&s.a.createElement(lr,null),a.aboutOpen&&s.a.createElement(ur,null))}}]),t}(s.a.PureComponent);a.default=Object(c.b)((function(e){return{room:e.room,browser:e.me.browser,advancedMode:e.settings.advancedMode,showNotifications:e.settings.showNotifications,buttonControlBar:e.settings.buttonControlBar,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen}}),(function(e){return{setToolbarsVisible:function(a){e(g.D(a))},toggleToolArea:function(){e({type:"TOGGLE_TOOL_AREA"})}}}),null,{areStatesEqual:function(e,a){return a.room===e.room&&a.me.browser===e.me.browser&&a.settings.advancedMode===e.settings.advancedMode&&a.settings.showNotifications===e.settings.showNotifications&&a.settings.buttonControlBar===e.settings.buttonControlBar&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen}})(Object(m.a)((function(e){return{root:{display:"flex",width:"100%",height:"100%",backgroundColor:"var(--background-color)",backgroundImage:"url(".concat(window.config?window.config.background:null,")"),backgroundAttachment:"fixed",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},drawer:{width:"30vw",flexShrink:0,[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},drawerPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}}}}),{withTheme:!0})(mr))}}]);
//# sourceMappingURL=room.b99aa221.chunk.js.map